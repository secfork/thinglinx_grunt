{"version":3,"sources":["../../.tmp/concat/thing/app.js"],"names":["wrap","$compile","$translate","valid","restrict","priority","require","scope","label","link","$scope","$ele","$attrs","modelCtrl","console","log","width","tlWrapL","tlWrap","offset","labelWidth","left","hasOwnProperty","label_text","instant","cls","required","wrap_input","is","addClass","parent","before","copy_clip","copy","window","clipboardData","setData","netscape","security","PrivilegeManager","enablePrivilege","clip","Components","classes","createInstance","interfaces","nsIClipboard","trans","nsITransferable","addDataFlavor","str","Object","nsISupportsString","copytext","data","setTransferData","length","clipid","kGlobalClipboard","angular","module","controller","$state","$source","$show","$q","od","$user","get","pk","op","user","account_id","resp","account","ret","$region","regionNum","userNum","all","$system","$promise","state","then","totalSys","totalSys_act","initChart_sys","date","Date","d","end","getTime","start","RtnMonByWeekNum","getWeekNumber","alarm","extend","active","totalAlarm","totalAlarm_act","initChart_alarm","$sys","$modal","depuName2addUser","title","username","S","is_super_user","alert","confirmInvoke","note","close","name","page","unshift","$moduleNav","current","text","groups","loadPageData","pageNo","currentPage","itemsPerPage","f_name","test","showMask","query","updateUser","idObj","put","createUser","open","templateUrl","$modalInstance","__proto__","isAdd","ccField","done","validForm","save","id","cancel","err","delUser","arr","u","i","warn","next","delByPk","splice","verifyUser","temp","$interval","setInter","btnDom","type","disabled","times","smsInterval","$","replace","cofText","ver","email","phone","sendEmail","e","currentTarget","sendNote","mobile_phone","$note","verifyPhone","verifi","mobile_phone_verified","$stateParams","$localStorage","$sessionStorage","$utils","startInterval","interval","intervalTimes","t_","undefined","textCond","from","backState","thatScope","user_id","userself","loadUserPromise","sms_notice","mail_notice","role_KV","loadRolesPromise","$role","roles","forEach","v","acceptAlarm","acceptRegionAlarm","rr","sub","filter","region_id","sendee","$sub","sub_id","subScribKV","role_id","each","accountRol","privilge2Text","$watch","n","o","_$oldAccountRole_id","addAccountRole","isaccount","textArr","_$old_role_id","privilege","push","prText","join","loadRegionPromise","loadPermissionPromise","loadAllRegionPromise","obj_ref","getIsSubAlarm","objArray","x","total","addRegionAuthor","size","resolve","regions","reject","region","role","filter_regions","region_id_name","split","region_name","role_name","delRegionAuthor","$index","ccRegionRole","editUser","k","reSetPW","msg","ot","emailInterval","validPhone","validEmail","num","trueEmail","verifyEmail","email_verified","gp","$userGroup","rp","allgroups","allroles","role_category","$current","promise","regionP","accountP","text_arr","toText","privileges","addRole","index","r","authors","delRole","$timeout","setPicture","img","Image","url","src","height","$img","onload","URL","revokeObjectURL","empty","append","configWeiChat","evt","JSON","parse","target","response","wei","logo","ossRoot","configWei","menu","accountname","$weChat","activeServer","pictureFile","step","unBindServer","getServerInfo","status","enbaleCopy","Clipboard","setFiles","ele","files","createObjectURL","createUrl","wechat_id","server_url","verifyUrl","getServerStatus","verifySuccess","verifyError","setp2Commit","fd","FormData","old_logo","subString","lastIndexOf","xhr","XMLHttpRequest","addEventListener","rootUrl","setRequestHeader","send","$window","$animate","$location","$rootScope","$cookies","isSmartDevice","ua","transState","$title","tab","isString","params","pushNav","nav","nc","navs","$on","event","a","b","c","href","isIE","navigator","userAgent","match","element","document","body","app","version","color","primary","info","success","warning","danger","light","dark","black","settings","themeID","navbarHeaderColor","navbarCollapseColor","asideColor","headerFixed","asideFixed","asideFolded","arguments","value","isArray","Array","prototype","call","cache","$$cache","go","jsonString2Text","jsonString","fromJson","参数","formName","that","this","valids","$$childTail","$invalid","$error","k1","$setDirty","ccPassWord","isDefined","lang","isopen","langs","en","zh_CN","selectLang","proposedLanguage","setLang","langKey","$event","use","$rootNav","s","$appendNav","$popNav","navGo","dismiss","logout","chaStation","station","btn","effStation","dastations","todel","uuid","deactive","delStation","system_id","activateStation","jump","editStation","das","desc","projs","_proj","syncSystem","_show_sync_ok","_show_sync_error","sync","needsync","startSystem","sys","systems","d_call","system","$button","css","opacity","attr","post","toggleClass","fun","func","m","resp_err","handler","cancelHandler","todo","undo","showAlarmMsg","conformMsg","getConformMsg","ack_id","conformAlarm","message","conform","alarm_id","close_time","acceptSMS","acceptEmail","$modalStack","dismissAll","t","$common","need_idenfity","login","password","comp","time","$$search","verifyUuid","signup","dom","$account","reSendEmail","openEmail","admin","create","confirm_password","comp_name","identify","setp1","cc_done","code","do","verifyemail","argument","feedback","support","$log","$http","f_n","_timeout","w_st","w_h","off","scroll","scrollTop","innerHeight","$deviceModel","deviceModels","loadPoints","devModel","points","$dmPoint","device_model","add_edit_t","$filter","$driver","drivers","T","driver_id","upload_t","temp_upload","$$scope","export_t","temp_export","closePopupWin","$inject","delTemp","obj","ref","delPoint","p","dm_uuid","addOrEditPoint","point","dm","driver","basic","entity","par","clone_f","f_id","$sysModel","fristPage","updateSysModel","idobj","createSM","sm","mode","comm_type","create_time","device_count","profile_count","deleteSM","updateSM","da","gateway_default","error","sysmodel","tabs","icon","concat","viewPanel","odp","loadProfilePromise","$sysProfile","system_model","profiles","hasProfile","puuid","isModelState","loadSystemDevicePromise","loadSysDev","$sysDevice","sysdevices","loadAllDeviceModelsPromise","loadDevModels","devmodels","addSysProfile","P","$parent","updateSysProfile","deleteSysProfile","isG","devModelKV","addOrEditDevice","devices","dev","devModels","filterChannel","bool","_$channel","keys","D","network","channel","device","toJson","deleteSysD","sysd","ApplyDevPoint","oldDevModel","loadPoint","addConnect","tag","connect","isManageMode","manageMode","cc","splictC","$last","dev_id","point_id","dev_ref","getDevName","devicesKV","dev_name","loadSysTag","prof_uuid","promise_tag","$sysLogTag","profile","systags","$sysTag","addTag","L","deviation","scale","log_cycle","copyName","updateTag","dd","dt","true_conn","copyProp","deleteTag","editLogPart","hasLog","tp_desc","unit","save_log","log_type","condition_parmas_tojson","conditions","loadTagPromise","tags_arr","tags_nv","ar","prof_id","$sysProfTrigger","exp","right","fn","args","deleteTrigger","c_u_Trigger","add_OR_i","trigger","$webWorker","trigger_c","l","tags","appendVerb","verb","verb_default","delVerb","triggerConditions","regex","byte","substring","toUpperCase","char","charAt","prof_triger","loadMessages","$message","profile_id","messages","createMessage","M","trigger_id","triggers","message_id","deleteMessage","_this","project","description","createTime","modifyTime","systemModelUuid","accountId","initPanel","searchProjectBySystemModelUuidUrl","headers","config","createProject","currTime","createProjectUrl","modifyProjectMessage","modifyData","updateProjectUrl","deleteProject","delProjectUrl","delData","openDyaliasSystem","ack","g","distance","baud_rate","GateWay","needUpdate","enbaleGPS","GPS","canAddPort","gpsChange","types","gateway","c_u_Gateway","G","filterType","_$types","deleteGateway","saveGateWay","haveSave","getActiveSum","region_ids","count","getUnActiveSum","pop","isShowModul","_$nextState","per","f_projname","lll","collectRegionId","delProject","proj","addProj","updateRegion","fieldObj","regionResp","_$mapState","_$stationState","$backText","userIds","getUser","isLaset","getSubOfRegion","proj_id","issubed","createSubOfRegion","delSubOfRegion","undefind","editSub","commit","openCalendar","preventDefault","stopPropagation","$eval","loadSys","options","isactive","activeAlarmData","allAlarmDate","class_id","severity","alarmMsg","_$system","getState","online","daserver","logon","lastAlarm","state_interval","state_inter_time","sysModel","model","getByPk","systemModel","ala","pointSize","c_int","a_int","progValue","goHis","his_tag","latitude","myGeo","BMap","Geocoder","getLocation","Point","longitude","result","$apply","map_address","address","getCurrent","names","$dom","live","pv","auto_r","reg","filtTags","filterTags","RegExp","liveData","liveWrite","showSpinner","refreshChart","Highcharts","setOptions","global","useUTC","resetZoom","highcharts","chart","zoomType","events","load","xAxis","yAxis","legend","enabled","tooltip","formatter","dateFormat","series","y","credits","exporting","plotOptions","area","fillColor","linearGradient","x1","y1","x2","y2","stops","getOptions","colors","Color","setOpacity","marker","radius","lineWidth","states","hover","threshold","clearChart","remove","plotChartConfig","initFlotChart","_plot_data","btnType","leftTime","getMonth","getFullYear","getDate","queryData","rightTime","dateStr","changeTemp","background-color","border-color","box-shadow","prop","siblings","curdate","now","year","month","day","parseInt","json","queryHistory","his","cArr","rcv","ts","getActiveAlarm","pg","find","queryAlarm","$map","map","initMap","getProUrl","panel_id","sdata","sysName","currentProjectUrl","$templateCache","$templateRequest","$interpolate","pointMouseOver","rg_k_v","html","Marker","markerOptions","addOverlay","infoWindow","InfoWindow","openInfoWindow","pointMouseOut","closeInfoWindow","removeOverlay","ceratePointOverlay","pointArray","collection","PointCollection","collenTionOptions","_$projState","_$showRegionTH","includes","active2del","updataORdel","lm","loadSysModelPromise","analyzeRegionPromise","sysModels","reset","forMapPromise","clearOverlays","sys_ref","promise_A","promise_B","sta2sync","ids","needSync","resp_x","sysStatus","resp_B","createDAPoint2Map","showMsgHandler","shape","BMAP_POINT_SHAPE_WATERDROP","Size","createMap","createSystem","selectRegion","updateSystem","systemResp","uploadComplete","progressVisible","pic_url","uploadProgress","lengthComputable","progress","Math","round","loaded","l_m_P","deviceKV","rightfile","canupload","file","uploadFile","upload","toUpdate","field","hasSave","toSave","createTicket","sn","$ticket","ticket","unBindTicket","nT","initDaServer","getDtuServer","cmway_port","loadSupportDtus","dutList","dtuList","applyDtuData","port","cmway","driverid","p_uuid","initGatewayDevs","gatewayDevs","devRef","delete_dev","gateway_devs","idnex","c_u_dev","filterDev","_$devs","w","LAN_1","WLAN_1","c_u_way","way","dns","enable","del_way","update","assignSystem","assign","saveDaServer","d_stop","stop","d_id","loadProfileTagPromise","wait_interval","connect_wate","second","sendVer","C","validVer","$contact","updateContact","createContact","contact_id","$document","moveMarker","setPosition","toLocationSystem","openWinInfo","removeEventListener","enableCloseOnClick","enableAutoPan","pos","addSearch","mapMarker","centerAndZoom","markLocation","enableDragging","toNewLocation","locatedSation","lng","lat","disableDragging","letMarkerMove","delMarker","directive","template","$model","__$classfor","classfor","isOpen","idkey","$formatters","$ov","$modelValue","$commitViewValue","MODULE_CONFIG","uiLoad","compile","el","attrs","contents","clone","uiModule","clonedElement","to","method","uiShift","_el","hasClass","md","prev","removeClass","_window","resize","on","magic","_class","patt","cn","className","trim","uiToggleClass","targets","key","indexOf","_mb","backdrop","top","min","closest","position","appendTo","insertAfter","$anchorScroll","uiScroll","hash","screenfull","toggle","toState","toParams","fromState","targetScope","$element","setNgAnimate","valnew","valold","mousemove","pageY","startY","pageX","startX","mouseup","unbind","border","backgroundColor","cursor","spinner","token","wh","dh","st","display","ready","after","max","ngMinlength","ngMaxlength","pattern","ngPattern","notation","bytestr","toString","updataHex","focus","blur","$sce","$attr","f","driver_ver","$parse","modelControl","v1","tlDefault","mv","ngModel","$setViewValue","$render","whenChange","$viewChangeListeners","t_offset","p_offset","show","$maskDom","hide","wtcher","loadMask","translate","moment","fromNow","pager","array","slice","_log","device_modbus","temp_point","ingorErr","DEVICE_NOT_EXIST","ER_CONTACT_NOT_EXIST","ER_SYSTEM_HAS_NOT_BOUND","ACK_MESSAGE_NOT_EXIST","ER_USER_NOT_EXIST","ER_USER_EXIST","service","$resource","$createSource","config1","config2","verify","queryUser","cmd","$permission","factory","location","jsorder","request","when","order","responseError","brower","toLowerCase","ie","firefox","chrome","opera","safari","isSmart","Dom_id","Map","enableScrollWheelZoom","top_left_control","ScaleControl","anchor","BMAP_ANCHOR_TOP_LEFT","top_left_navigation","NavigationControl","BMAP_ANCHOR_TOP_RIGHT","BMAP_NAVIGATION_CONTROL_SMALL","addControl","centeredMap","markers","myCity","LocalCity","center","setCurrentCity","flushMarkers","stations","addMarkers2map","createDAPoint","inputid","resultid","getElementById","setPlace","myFun","pp","local","getResults","getPoi","LocalSearch","onSearchComplete","search","myValue","ac","Autocomplete","input","_value","fromitem","province","city","district","street","business","toitem","innerHTML","item","domid","h_offset","$mapdom","mapPoint","cb","clickHandler","mapCluster","marks","mark","BMapLib","MarkerClusterer","Label","setStyle","border-width","font-weight","setLabel","propWin","baseUrl","$workerConfig","jsFile","worker","Worker","defer","postMessage","terminate","access","hlbyte","yesOrNo","sysState","激活","未激活","permissionDesc","READ_DATA","WRITE_DATA","ALARM_VIEW","ACK_ALARM","SYSTEM_MANAGE","TICKET_MANAGE","REGION_USER_MANAGE","SYN_CONFIG","SYSTEM_CONTROL","REGION_MANAGE","MODEL_MANAGE","USER_MANAGE","ROLE_MANAGE","roleType","账户角色","区域角色","rootState","alarmtype","defalut","values","origin_default","origin",0,"action_default","action","action_alarm","action_event","action_task","type_default",1,"fn_default","PV","op_default","severity_default","2","3","4","class_id_default","sysManageMode","sysModelMode","default","save_his","log_period","RAW","CHANGED","device_type","dev_cycle","cycle_unit","slow_cycle","slow_cycle_unit","dev_timeout","dev_retry","delay","timeUnit","PI_SHCYA","link_address","PLC_MITSUBISHI_FX_PG","FCS_MODBUS","protocol_type","offset_format","max_packet_length","packet_offset","int_order","int64_order","float_order","double_order","crc_order","protocol","offsetformat","reglength","order_a","order_b","order_c","PLC_SIEMENS_PPI","poll","is_packet","pointPoll","packet","th","app_address","type_id","infor_address","type_ex","AreaCC","initDtatType","initAccessType","_dataType","_accerssType","TypeCC",8,12,13,"areaCC","tt","typeCC","ad",6,9,5,"_accessType","user_category","category","RS232_1","RS232_2","RS232_3","RS232_4","RS485_1","RS485_2","RS422_1","RS422_2","data_bits","stop_bits","parity","none","even","odd","gps_distance","gps_baud_rate","getCookie","cookie","unescape","delCookie","setTime","cval","toGMTString","controllerName","findTempByid","temps","tempid","template_id","containTemp","copyText","flashcopier","divholder","createElement","appendChild","divinfo","encodeURIComponent","run","$cacheFactory","fadeOut","$sceHtml","trustAsHtml","$session","$debug","funtest","$stateProvider","$urlRouterProvider","$controllerProvider","$compileProvider","$filterProvider","$provide","$httpProvider","$resourceProvider","$templateCacheProvider","interceptors","defaults","actions","delete","getArr","register","constant","otherwise","userResp","$$user","easyPieChart","chosen","filestyle","$translateProvider","useStaticFilesLoader","prefix","suffix","preferredLanguage","useLocalStorage"],"mappings":"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etwB,IAAI,2BACjB,geAIFswB,EAAetwB,IAAI,+BACjB,2nBAIFswB,EAAetwB,IAAI,iCACjB,kyBAIFswB,EAAetwB,IAAI,kCACjB,y6KAIFswB,EAAetwB,IAAI,4BACjB,kzDAIFswB,EAAetwB,IAAI,iCACjB,+VAIFswB,EAAetwB,IAAI,yCACjB,27BAIFswB,EAAetwB,IAAI,yCACjB,25BAIFswB,EAAetwB,IAAI,kBACjB,6vBAIFswB,EAAetwB,IAAI,oBACjB,yHAIFswB,EAAetwB,IAAI,0BACjB,owCAIFswB,EAAetwB,IAAI,wBACjB,kMAaFswB,EAAetwB,IAAI,+CACjB,6jEAKFswB,EAAetwB,IAAI,iDACjB,omDAIFswB,EAAetwB,IAAI,6CACjB,02CAIFswB,EAAetwB,IAAI,8CACjB,0vDAIFswB,EAAetwB,IAAI,2CACjB,kOAIA,2lDAIFswB,EAAetwB,IAAI,2CACjB;AAKFswB,EAAetwB,IAAI,uCACjB,osCAIFswB,EAAetwB,IAAI,uCACjB,yOAIFswB,EAAetwB,IAAI,6CACjB,26HAIFswB,EAAetwB,IAAI,mCACjB,80EAIFswB,EAAetwB,IAAI,oCACjB,ihGAIFswB,EAAetwB,IAAI,qCACjB,ukIAIFswB,EAAetwB,IAAI,iCACjB,2tBAIFswB,EAAetwB,IAAI,0CACjB,wrBAIFswB,EAAetwB,IAAI,uCACjB,yjBAIFswB,EAAetwB,IAAI,kCACjB,ogCAIFswB,EAAetwB,IAAI,yCACjB,2gCAIFswB,EAAetwB,IAAI,uCACjB,sqBAIFswB,EAAetwB,IAAI,uCACjB,4SAIFswB,EAAetwB,IAAI,qCACjB,ikBAIFswB,EAAetwB,IAAI,yCACjB,6YAIFswB,EAAetwB,IAAI,4BACjB,qRAIFswB,EAAetwB,IAAI,kCACjB,8nBAIFswB,EAAetwB,IAAI,oCACjB,shBAIFswB,EAAetwB,IAAI,wCACjB,gZAIFswB,EAAetwB,IAAI,iCACjB,sPAIFswB,EAAetwB,IAAI,mCACjB,gNAIFswB,EAAetwB,IAAI,4BACjB,gVAIFswB,EAAetwB,IAAI,2BACjB,6VAIFswB,EAAetwB,IAAI,oCACjB,ohBAIFswB,EAAetwB,IAAI,8BACjB,oYAIFswB,EAAetwB,IAAI,gCACjB,21EAIFswB,EAAetwB,IAAI,+BACjB,6XAIFswB,EAAetwB,IAAI,+BACjB,8xBAIFswB,EAAetwB,IAAI,uBACjB,kVAIFswB,EAAetwB,IAAI,qBACjB,u/CAIFswB,EAAetwB,IAAI,kBACjB;AAIFswB,EAAetwB,IAAI,0BACjB,+JAIFswB,EAAetwB,IAAI,6BACjB,+hFAIFswB,EAAetwB,IAAI,0BACjB,m3DAIFswB,EAAetwB,IAAI,0BACjB,ykHAIFswB,EAAetwB,IAAI,+BACjB,0UAIFswB,EAAetwB,IAAI,6BACjB,otBAIFswB,EAAetwB,IAAI,8BACjB,iRAIFswB,EAAetwB,IAAI,gCACjB,oLAIFswB,EAAetwB,IAAI,oCACjB,8qFAIFswB,EAAetwB,IAAI,kCACjB,2iBAIFswB,EAAetwB,IAAI,sCACjB,uYAIFswB,EAAetwB,IAAI,kCACjB,uzBAIFswB,EAAetwB,IAAI,kCACjB,qzDAIFswB,EAAetwB,IAAI,iCACjB,moBAIFswB,EAAetwB,IAAI,uBACjB,w+OAoDFswB,EAAetwB,IAAI,yBACjB,k8IAIFswB,EAAetwB,IAAI,4BACjB;AAIFswB,EAAetwB,IAAI,iCACjB,iTAIFswB,EAAetwB,IAAI,6BACjB,imBAIFswB,EAAetwB,IAAI,iCACjB,gVAIFswB,EAAetwB,IAAI,+BACjB,smCAIFswB,EAAetwB,IAAI,qCACjB,i4GAIFswB,EAAetwB,IAAI,qCACjB,6nDAIFswB,EAAetwB,IAAI,uCACjB,49DAIFswB,EAAetwB,IAAI,uCACjB,83EAIFswB,EAAetwB,IAAI,mCACjB,2FAIFswB,EAAetwB,IAAI,qCACjB,gHAIFswB,EAAetwB,IAAI,2BACjB,wsDAIFswB,EAAetwB,IAAI,iCACjB,gqKAIFswB,EAAetwB,IAAI,iCACjB,2tBAIFswB,EAAetwB,IAAI,mCACjB,k9BAMFswB,EAAetwB,IAAI,mCACjB,+UAIFswB,EAAetwB,IAAI,mCACjB,69BAIFswB,EAAetwB,IAAI,uCACjB,+rKAOFswB,EAAetwB,IAAI,qCACjB,4jGAIFswB,EAAetwB,IAAI,oCACjB;AAIFswB,EAAetwB,IAAI,oCACjB,kXAIFswB,EAAetwB,IAAI,sCACjB,4ZAIFswB,EAAetwB,IAAI,kCACjB,+mCAIFswB,EAAetwB,IAAI,2CACjB,IAIFswB,EAAetwB,IAAI,iCACjB,kqCAIFswB,EAAetwB,IAAI,kCACjB,4uCAIFswB,EAAetwB,IAAI,mCACjB,ktEAIFswB,EAAetwB,IAAI,0CACjB,wsCAIFswB,EAAetwB,IAAI,iCACjB,q0CAIFswB,EAAetwB,IAAI,mCACjB,w/BAIFswB,EAAetwB,IAAI,uCACjB,ioDAIFswB,EAAetwB,IAAI,+BACjB,65DAIFswB,EAAetwB,IAAI,gCACjB,miDAIFswB,EAAetwB,IAAI,qCACjB,qbAIFswB,EAAetwB,IAAI,8BACjB,qVAIFswB,EAAetwB,IAAI,4BACjB,ysBAIFswB,EAAetwB,IAAI,6BACjB,4hBAIFswB,EAAetwB,IAAI,4BACjB,yiBAKFswB,EAAetwB,IAAI,mCACjB,6WAIFswB,EAAetwB,IAAI,mCACjB,4xBAIFswB,EAAetwB,IAAI,gCACjB,yvEAIFswB,EAAetwB,IAAI,yBACjB,wZAIFswB,EAAetwB,IAAI,0BACjB,eAIFswB,EAAetwB,IAAI,wBACjB,gqEAIFswB,EAAetwB,IAAI,2BACjB,yaAIFswB,EAAetwB,IAAI,yBACjB,gqCAmBA,qZAIFswB,EAAetwB,IAAI,2BACjB,23CAkBA,23BAUFswB,EAAetwB,IAAI,mCACjB,qnCAIFswB,EAAetwB,IAAI,kCACjB","file":"app.js","sourcesContent":["\n// http://thinglinx-test.oss-cn-beijing.aliyuncs.com/10108.0/NyqTgJE-gi7=ffu630ns.jpeg\n\n// http://thinglinx-test.oss-cn-beijing.aliyuncs.com/10108/system/Vke2gdxrluZ_x4f2u9fz2527\n\nangular.module('app.account', [])\n\n.controller(\"account_info\", [\"$scope\", \"$state\", \"$source\", \"$show\", \"$q\", function($scope, $state, $source, $show, $q) {\n\n\n\n    $scope.od = {};\n\n    // 账户信息;  \n    $source.$user.get({\n        pk: \"getaccount\",\n        op: $scope.user.account_id\n    }, function(resp) {\n        $scope.account = resp.ret;\n    })\n\n    // 得到 区域 数目;\n    $source.$region.get({\n            op: \"total\"\n        }, function(resp) {\n            $scope.regionNum = resp.ret;\n        })\n        // 得到 用户数目;\n    $source.$user.get({\n        op: \"total\"\n    }, function(resp) {\n        $scope.userNum = resp.ret;\n    })\n\n    // 得到系统 激活 , 非激活 数据; \n    $q.all([\n        $source.$system.get({\n            pk: \"total\"\n        }).$promise,\n        $source.$system.get({\n            pk: \"total\",\n            state: 1\n        }).$promise\n    ]).then(function(resp) {\n        $scope.totalSys = resp[0].ret || 0;\n        $scope.totalSys_act = resp[1].ret || 0;\n        $scope.initChart_sys = true;\n    })\n\n\n    // 得到  本周 报警  数目( 总数, 未处理数目 )\n    var date = new Date();\n    var d = {\n        end: date.getTime(),\n        start: date.RtnMonByWeekNum(date.getWeekNumber()) - 604800000\n    };\n\n    $q.all([\n        $show.alarm.get(angular.extend({\n            op: \"total\"\n        }, d)).$promise,\n        $show.alarm.get(angular.extend({\n            op: \"total\",\n            active: 1\n        }, d)).$promise\n    ]).then(function(resp) {\n        $scope.totalAlarm = resp[0].ret || 0;\n        $scope.totalAlarm_act = resp[1].ret || 0;\n        $scope.initChart_alarm = true;\n    })\n\n}])\n\n.controller(\"account_users\", [\"$scope\", \"$state\", \"$source\", \"$sys\", \"$q\", \"$modal\", \"$modal\", function($scope, $state, $source, $sys, $q, $modal, $modal  ) {\n\n    //$scope.$moduleNav(\"用户pop\", \"_user\");\n    // $scope.$moduleNav(\"账户信息\", $state);\n    $scope.$moduleNav(\"用户\", $state);\n\n\n\n    // 分页 加载 users ;\n\n    $state.current.text = \"用户管理\";\n\n\n    $scope.page = {};\n    // $scope.user = {};\n    $scope.op = {};\n    $scope.od = {\n        groups: []\n    };\n\n    // var loadAllGroupsPromise = $source.$userGroup.query({\n    //     currentPage: 1\n    // }).$promise;\n\n\n\n    // 添加用户时 所属的 组;  \n    $scope.loadPageData = function(pageNo) {\n\n\n\n        var d = {\n            currentPage: pageNo || 1,\n            itemsPerPage: $sys.itemsPerPage,\n            username: $scope.op.f_name\n        };\n\n        d.username && (d.username += /.\\*$/.test(d.username) ? \"\" : \"*\");\n\n\n\n        $scope.showMask = true;\n\n        $source.$user.query(d, function(resp) {\n                $scope.page = resp;\n                $scope.page.currentPage = pageNo;\n                $scope.showMask = false;\n            },\n            function() {\n                $scope.showMask = false;\n            }\n        );\n    };\n    $scope.loadPageData(1);\n\n    // 加载所有 角色 信息;\n\n\n    // 更改user ;\n    var S = $scope;\n\n    console.log( 1111111 , $scope.user  )\n\n\n    $scope.updateUser = function(idObj) {\n        return $source.$user.put({}, idObj).$promise;\n\n    }\n\n    $scope.createUser = function() {\n        $modal.open({\n            templateUrl: \"athena/account/users_edit.html\",\n            controller: [\"$scope\", \"$modalInstance\", function($scope, $modalInstance) {\n                $scope.__proto__ = S;\n                $scope.$modalInstance = $modalInstance;\n                $scope.user = {};\n                $scope.isAdd = true;\n \n\n                // 验证 user.username 是否已经存在;  // 创建者是否有 区域管理权限; \n                $scope.ccField = function( ){   \n                    console.log( S.user );\n                    // if( S.user.is_super_user ){\n                    //     return ; \n                    // }\n\n                    // $scope.user.username && $source.$user.get( \n                    //     { op:\"getbyname\" , name: $scope.user.username , account_id: S.user.account_id  } ,\n\n                    //     function(resp){ \n                           \n                    //     }\n                    // )\n                }\n\n                $scope.done = function() {\n\n                    $scope.validForm();\n\n                    $source.$user.save($scope.user, function(resp) {\n\n                        $scope.user.id = resp.ret;\n                        $scope.page.data.unshift($scope.user)\n                        $scope.cancel();\n\n                    } , function( resp ){ \n                        // 用户已存在, 或其他错误; \n                        // 用户存在 , 且有区域管理权限; \n                        $scope.cancel();\n                        if( resp.err == \"ER_USER_EXIST\"){\n                            depuName2addUser( $scope ) ;\n                        }\n\n\n\n                        // return ;\n                        // if( resp.err ==\"ER_USER_EXIST\"   ){  // 名字被占用; \n\n                        //     var exist_user = resp.ret ; \n                        //     var title = $scope.$translate.instant('ER_USER_EXIST');\n\n                        //     if( S.user.is_super_user  ||\n                        //      exist_user.is_super_user  ||\n                        //       exist_user.id == S.user.id ){\n                        //         angular.alert(   title   );\n                        //         return ;\n                        //     } \n\n                        //     // 有没有 区域管理权限;   \n                        //     // &&  S.user.accountRol.privilege.indexOf( 'REGION_MANAGE') > 0   'REGION_MANAGE' S.user.accountRol.privilege\n                        //     if( S.user.accountRol.privilege.indexOf( 'REGION_MANAGE') >= 0  ){\n                        //         $scope.confirmInvoke( { title: title , note:  \"是否将用户 \" +  exist_user.username+ ' 加入您所管理的区域?' } , function( close ){\n\n                        //             $source.$user.get( { op:\"appendregionrole\" , user_id: exist_user.id } , function(){\n                        //                 close();\n                        //                 $scope.cancel();\n\n                        //                 // angular.alert(\"附加成功!\") ;\n\n                        //                 $scope.page.data.unshift( exist_user )\n\n                        //             } ,  function(){\n                        //                  close();\n                        //                  $scope.cancel();\n                        //             }) \n                        //         })\n                        //         return ;\n                        //     } \n                        // }; \n\n                    });\n                }\n\n            }]\n        })\n    };\n\n    // 名字被占用时  , 且 区域用户管理 时, 添加user ; \n    function  depuName2addUser ( scope ){\n\n        var title = $scope.$translate.instant('ER_USER_EXIST')  ,\n            username = scope.user.username ,\n            loadTheUser ;\n \n        if( S.user.is_super_user  ||   username == S.user.username ){\n            angular.alert(   title   );\n            return ;\n        }   \n\n        $scope.confirmInvoke( { title: title , note:  \"是否将用户 \" +  username+ '加入您所管理的区域?' } , \n            function( close ){\n\n            // 返回 exist_user 对象; \n            $source.$user.get( { op:\"appendregionrole\" , name: username } , function( resp ){\n                close(); \n\n               // angular.alert(\"附加成功!\") ;\n\n                $scope.page.data.unshift( resp.ret  )\n\n            } ,  function(){\n                 close(); \n            }) \n        })\n\n\n    }\n\n\n\n\n\n    $scope.delUser = function(arr, u, i) {\n        $scope.confirmInvoke({\n            title: \"删除用户:\" + u.username,\n            warn: \"确认要删除该用户吗?\"\n        }, function(next) {\n            $source.$user.delByPk({\n                    pk: u.id\n                },\n                function(resp) {\n                    arr.splice(i, 1);\n                    next();\n                },\n                next\n            );\n        });\n    };\n\n\n\n    // 验证联系方式;\n    //        jjw 添加参数temp，标记是phone还是email\n    $scope.verifyUser = function(u, i, temp) {\n        $modal.open({\n            templateUrl: temp == 'phone' ? \"athena/account/users_verify_phone.html\" : \"athena/account/users_verify_email.html\",\n            controller: [\"$scope\", \"$modalInstance\", \"$interval\", function($scope, $modalInstance, $interval) {\n                $scope.$modalInstance = $modalInstance;\n\n                $scope.__proto__ = S;\n                $scope.u = angular.copy(u);\n                $scope.ver = {};\n\n                var smsInterval, emailInterval;\n\n                var text = \"重新发送(%)\";\n\n\n                var cofText = {\n                    \"email\": \"发送验证邮件\",\n                    \"phone\": '发送验证码'\n                };\n\n                function setInter(btnDom, type) {\n                    btnDom.disabled = true;\n                    var times = 120;\n                    smsInterval = $interval(function() {\n                        $(btnDom).text(text.replace(\"%\", times));\n                        times--;\n                        if (times < 0) {\n                            btnDom.disabled = false;\n\n                            $(btnDom).text(cofText[type || \"phone\"]);\n\n                            $interval.cancel(smsInterval);\n                        }\n                    }, 1000)\n                }\n\n\n\n                $scope.sendEmail = function(e) {\n\n                    if (!$scope.u.email) {\n                        angular.alert(\"请输入邮箱!\");\n                        return;\n                    }\n                    setInter(e.currentTarget, \"email\");\n\n                    var d = {\n                        id: u.id,\n                        email: $scope.u.email\n                    };\n\n                    $source.$user.save({\n                        pk: \"sendverifyemail\"\n                    }, d);\n\n                }\n\n                $scope.sendNote = function(e) {\n                    if (!$scope.u.mobile_phone) {\n                        angular.alert(\"请输入手机号\");\n                        return;\n                    }\n\n                    setInter(e.currentTarget, \"phone\");\n\n                    $source.$note.get({\n                            op: \"user\",\n                            mobile_phone: $scope.u.mobile_phone\n                        },\n                        function() {\n\n                        });\n\n                }\n\n\n\n\n                $scope.verifyPhone = function() {\n                    if (!$scope.u.mobile_phone) {\n                        angular.alert(\"请输入手机号\");\n                        return;\n                    }\n                    if (!$scope.ver.phone) {\n                        angular.alert(\"请输入验证码\");\n                        return;\n                    }\n\n                    var d = {\n                        id: u.id,\n                        mobile_phone: $scope.u.mobile_phone,\n                        verifi: $scope.ver.phone\n                    };\n\n                    $source.$user.save({\n                        pk: \"verifyphone\"\n                    }, d, function(resp) {\n                        u.mobile_phone_verified = true;\n                        $scope.cancel();\n\n                        u.mobile_phone = $scope.u.mobile_phone;\n\n                        $scope.user.mobile_phone_verified = true;\n                    });\n\n\n                }\n\n\n            }]\n        })\n    }\n\n}])\n\n.controller(\"account_userdetail\", [\"$scope\", \"$source\", \"$state\", \"$stateParams\", \"$modal\", \"$sys\", \"$translate\", \"$interval\", \"$localStorage\", \"$sessionStorage\", \"$q\", \"$utils\", function($scope, $source, $state, $stateParams,\n    $modal, $sys, $translate, $interval, $localStorage, $sessionStorage, $q, $utils) {\n\n    $scope.from = $utils.backState('account_userdetail');\n\n\n    var thatScope = $scope;\n\n    var user_id = $stateParams.id || $scope.user.id;\n\n\n    // $scope.userself = $state.includes(\"app.my_detail\"); \n    $scope.userself = !$stateParams.id;\n\n\n    $scope.user = undefined;\n\n    // 得 id 用户; \n    var loadUserPromise = $source.$user.get({\n        pk: user_id\n    }, function(resp) {\n        $scope.user = resp.ret;\n        $scope.user.sms_notice = !!$scope.user.sms_notice;\n        $scope.user.mail_notice = !!$scope.user.mail_notice;\n    }).$promise;\n\n    // 得到 所有 角色;  \n    var role_KV = {};\n\n    var loadRolesPromise = $source.$role.get(function(resp) {\n\n        $scope.roles = resp.ret || [];\n        // $scope.roles.unshift( {  name:\"-无-\" , id:null ,  role_category: 0 } )\n\n        angular.forEach($scope.roles, function(v, i) {\n            role_KV[v.id] = v;\n        })\n\n\n    }).$promise;\n\n    // 报警总开关; \n    // 接收 报警;  // type = \"sms_notice\" || \"mail_notice\"\n    $scope.acceptAlarm = function acceptAlarm(type) {\n\n        var d = {};\n        d[type] = $scope.user[type] ? 1 : 0;\n        $source.$user.save({\n                op: \"notice\"\n            }, d,\n            function() {\n\n            },\n            function() {\n                $scope.user[type] = !$scope.user[type]\n            }\n        )\n\n    }\n\n    // 报警区域开关; \n    // 编辑是否接收 某个 region 报警; \n    $scope.acceptRegionAlarm = function(rr) {\n\n        var sub = {\n            filter: {\n                region_id: rr.region_id || rr.id,\n                type: \"alarm\"\n            },\n            sendee: {\n                user_id: user_id\n            }\n        };\n\n        if (rr.acceptAlarm || rr.acceptAlarm == undefined) {\n            // 创建 , \n            $source.$sub.save({}, sub, function(resp) {\n                rr.sub_id = resp.ret;\n                subScribKV[rr.id || rr.region_id] = true;\n\n            }, function() {\n                rr.acceptAlarm = !rr.acceptAlarm;\n\n\n\n            })\n\n        } else {\n            // 删除;  \n\n            $source.$sub.delete({\n                pk: rr.sub_id\n            }, function() {\n                subScribKV[rr.id || rr.region_id] = false;\n            }, function() {\n                rr.acceptAlarm = !rr.acceptAlarm;\n\n            })\n\n        }\n\n    }\n\n\n    // 得到用户的 账户权限; \n    $source.$user.get({\n        pk: \"getaccountrole\",\n        op: user_id\n    }, function(resp) {\n\n        //$scope.user.accountRoleId = req.ret.role_id ; \n        var id = resp.ret.role_id;\n\n        $q.all([loadUserPromise, loadRolesPromise]).then(function() {\n            id && $.each($scope.roles, function(i, v) {\n                if (id == v.id) {\n                    $scope.user.accountRol = { id: v.id }; //= v;\n                    $scope.privilge2Text($scope.user.accountRol)\n                    return false;\n                }\n                return true;\n            })\n\n        })\n    })\n\n\n    $scope.$watch(\"user.accountRol.id\", function(n, o) {\n\n        console.log(\"watch user.accountRol\", n, o);\n        $scope.user && ($scope.user._$oldAccountRole_id = o);\n\n    });\n\n    $scope.addAccountRole = function() {\n\n        var n = $scope.user.accountRol.id,\n            note = n ? \"将用户\" + $scope.user.username + \" 的账户角色修改为 \" + role_KV[n].name + \"?\" : \"删除账户角色!\";\n        $scope.confirmInvoke({ title: \"更改账户角色\", note: note },\n            function(next) {\n                if (n) {\n                    $source.$user.put({\n                        pk: \"addrole\",\n                        op: user_id,\n                        isaccount: true\n                    }, {\n                        role_id: $scope.user.accountRol.id\n                    }, function(resp) {\n                        $scope.privilge2Text($scope.user.accountRol);\n                        next();\n                    }, function() {\n                        $scope.user.accountRol.id = $scope.user._$oldAccountRole_id;\n                        $scope.privilge2Text($scope.user.accountRol);\n\n                        next();\n                    })\n                } else {\n                    $source.$user.delete({\n                        pk: \"delrole\",\n                        op: user_id,\n                        isaccount: true\n                    }, null, function() {\n                        $scope.privilge2Text($scope.user.accountRol)\n                        next()\n                    }, function() {\n                        $scope.user.accountRol.id = $scope.user._$oldAccountRole_id;\n                        $scope.privilge2Text($scope.user.accountRol)\n                        next();\n                    })\n                }\n            },\n            function() {\n                $scope.user.accountRol.id = $scope.user._$oldAccountRole_id;\n                $scope.privilge2Text($scope.user.accountRol)\n            }\n        )\n    }\n\n\n    var textArr = [];\n    $scope.privilge2Text = function(rr, scope) {\n\n        // 超级管理员时;  rr 不是 role , 而是 区域 region ;  \n        if (!$scope.user.is_super_user) {\n            scope && scope.$watch('rr.role_id', function(n, o) {\n                rr._$old_role_id = o;\n            })\n\n            console.log('privilge2Text', rr)\n\n            textArr = [];\n            if (rr.id) {\n                role_KV[rr.id].privilege.forEach(function(v, i) {\n                    textArr.push($translate.instant(v));\n                })\n            } else if (rr.privilege) {\n                rr.privilege.forEach(function(v, i) {\n                    textArr.push($translate.instant(v));\n                })\n            }\n\n            rr.prText = textArr.join(\" ; \");\n        }\n    }\n\n\n    // 得到 所有 区域 权限;   /getpermissions/:user_id\n    //  admin 用户 得到所有区域, 普通用户得:getPermisseion ; \n\n    var loadRegionPromise,\n        loadPermissionPromise,\n        loadAllRegionPromise,\n        subItems,\n        Allregions,\n        subScribKV, //  删除 添加 报警 要维护 该对象;  \n        obj_ref = {}; //  添加 删除 区域权限时 需要维护 该对象 ;  obj = region  || promisesion  ; \n\n    loadUserPromise.then(function() {\n        // regionIdkey = !!$scope.user.is_super_user?\"id\":\"region_id\" ;\n\n        $scope.page = {};\n        // 超级管理员时,  不用加载区域角色 , 有所有权限 ; \n        if ($scope.user.is_super_user) {\n\n            $scope.loadPageData = function(pageNo) {\n                // 得到  分页 区域; \n                loadRegionPromise = $source.$region.query({\n                    currentPage: pageNo,\n                    itemsPerPage: 5\n                }).$promise;\n\n                loadRegionPromise.then(function(resp) {\n                    $scope.page.total = resp.total;\n                    $scope.page.data = resp.data;\n                    $scope.page.currentPage = pageNo;\n                    \n                    // $scope.userself &&  getIsSubAlarm($scope.page.data);\n                    getIsSubAlarm($scope.page.data);\n\n                })\n            }\n\n            $scope.loadPageData(1);\n        } else {\n            // 加载所有 区域;  \n\n            // 得到  user_id 的  所有  promissions ;    promission 分页 就无法添加过滤; \n            // 还要 加载   subscript ; \n            $source.$user.get({\n                pk: \"getpermissions\",\n                op: user_id,\n                // currentPage: pageNo ,\n                // itemsPerPage: 5 \n            }, function(resp) {\n                // $scope.page.total = resp.total;\n                $scope.page.data = resp.ret;\n                // $scope.page.currentPage = pageNo;\n\n                // 加载 所有的 订阅  subscritt ; \n                $scope.userself && getIsSubAlarm($scope.page.data)\n\n                if( $scope.userself ){\n                    getIsSubAlarm( $scope.page.data )\n                }else{\n                     // obj_ref 用来 添加 region author 时过滤   region.id , promission.region_id ;\n                    $scope.page.data.forEach(function(v, i) {\n                        obj_ref[v.id || v.region_id] = v;\n                    }); \n                } \n\n            });\n        }\n\n\n\n        //  admin 用户时 , 根据 page.data   的  region_id 去查询 订阅 ; 回显 ;   \n        // regionArray 中 带有region_id ; \n\n        // 第一次就 查询除了 所有订阅?   \n        function getIsSubAlarm(objArray) {\n\n            if (!objArray) {\n                return;\n            };\n\n            // 单例查询; 所有订阅 ; \n            if (!subScribKV) {\n\n                loadPermissionPromise = $source.$sub.get({\n                    op: \"select\",\n                    user: user_id,\n                }, function(resp) {\n                    subScribKV = {};\n                    resp.ret.forEach(function(v, i) {\n                        subScribKV[v.region_id] = v;\n                    })\n                }).$promise;\n\n            };\n\n            loadPermissionPromise.then(function() {\n                // acceptAlarm \n                var x;\n                objArray.forEach(function(v, i) {\n                    x = subScribKV[v.id || v.region_id];\n                    v.sub_id = x && x.id;\n                    v.acceptAlarm = !!x;\n                })\n\n            })\n\n        }\n\n\n        $scope.addRegionAuthor = function() {\n            $scope.showMask = true;\n            $modal.open({\n                templateUrl: \"athena/account/author_region_add.html\",\n                size: \"sm\",\n                resolve: {\n                    regions: function() {\n                        return $q(function(resolve, reject) {\n                            loadAllRegionPromise = loadAllRegionPromise || $source.$region.query({\n                                currentPage: 1\n                            }).$promise;\n\n                            loadAllRegionPromise.then(function(resp) {\n                                // allregion = resp.data ;  \n                                resolve(\n                                    resp.data.filter(function(v, i) {\n                                        console.log( obj_ref )\n                                        return !obj_ref[v.id]\n                                    })\n                                );\n                            })\n                        });\n                    }\n                },\n                controller: [\"$scope\", \"$modalInstance\", \"regions\", function($scope, $modalInstance, regions) {\n                    $scope.__proto__ = thatScope;\n                    $scope.$modalInstance = $modalInstance;\n                    thatScope.showMask = false;\n\n\n                    $scope.od = {\n                        region: undefined,\n                        role: undefined\n                    };\n\n                    $scope.filter_regions = regions;\n\n\n                    $scope.done = function() {\n\n                        $scope.validForm();\n\n                        // 添加  region role 信息; \n                        // dev_id = tag.connect.replace(/(\\d+).(\\d+)/, \"$1\");\n                        var region_id_name = $scope.od.region.split(\"&\"),\n                            region_id = region_id_name[0],\n                            region_name = region_id_name[1];\n\n                        // regionid_role_ref[region_id] = {\n                        //     id: region_id,\n                        //     name: region_name\n                        // };\n\n                        $source.$user.put({\n                                pk: \"addrole\",\n                                op: user_id,\n                                // region_id: $scope.od.region.id\n                                region_id: region_id\n                            }, {\n                                role_id: $scope.od.role.id\n                            },\n                            function(resp) { \n\n                                // page.data  ,  obj_ref 内 添加数据 ; \n                                var d = {\n                                    role_id: $scope.od.role.id,\n                                    role_name: $scope.od.role.name,\n\n                                    privilege: $scope.od.role.privilege,\n\n                                    region_name: region_name,\n                                    region_id: region_id\n                                } \n\n                                $scope.page.data.push( d );\n                                obj_ref[ region_id ] = d ;   // obj = promission ;\n\n                                $scope.cancel();\n\n                            })\n                    }\n                }]\n            })\n\n        }\n\n    });\n\n\n\n    // del region author ()\n    $scope.delRegionAuthor = function(rr, $index) {\n\n        $scope.confirmInvoke({\n            title: \"移除用户\",\n            note: \"您确定将用户\" + $scope.user.username + \"从区域\" + rr.region_name + \"中移除?\"\n\n        }, function(next) {\n            $source.$user.delete({\n                pk: \"delpermissions\",\n                op: user_id,\n                region_id: rr.region_id\n            }, function() {\n                $scope.page.data.splice($index, 1);\n                \n                delete obj_ref[rr.region_id];\n                next();\n            })\n\n        })\n\n    }\n\n    // 更改  user region 的 Role\n    $scope.ccRegionRole = function(rr, scope) {\n        // 在创建一次; 覆盖原先的; \n        console.log(scope);\n\n        var note = \"将用户\" + $scope.user.username + \" 在区域 \" + (rr.region_name || rr.name) + \" 的角色修改为\" + role_KV[rr.role_id].name + \"?\";\n\n        $scope.confirmInvoke({ title: \"更改区域角色\", note: note },\n            function(next) {\n                $source.$user.put({\n                        pk: \"addrole\",\n                        op: user_id,\n                        region_id: rr.region_id\n                    }, {\n                        role_id: rr.role_id\n                    },\n                    function() {\n                        rr.privilege = angular.copy(role_KV[rr.role_id].privilege);\n                        $scope.privilge2Text(rr);\n                        next();\n                    }\n                );\n            },\n            function() {\n                console.log(rr)\n                rr.role_id = rr._$old_role_id;\n            }\n        )\n\n    }\n\n\n    // editUser()\n    $scope.editUser = function(u) {\n        $modal.open({\n            templateUrl: \"athena/account/users_edit.html\",\n            controller: [\"$scope\", \"$modalInstance\", function($scope, $modalInstance) {\n                $scope.__proto__ = thatScope;\n\n                $scope.ccField = function(k, v) {\n                    $scope.od[k] = v;\n                } \n                $scope.done = function() {\n                    $scope.od.id = u.id;\n\n                    $scope.updateUser($scope.od).then(function() {\n                        angular.extend(u, $scope.user);\n                        $scope.cancel();\n                    })\n\n                }\n\n                $scope.$modalInstance = $modalInstance;\n                $scope.user = angular.copy(u);\n                $scope.op = {};\n                $scope.od = {}; // 接受 changeuser 字段; \n            }]\n        })\n\n    }\n\n    $scope.updateUser = function(idObj) {\n        return $source.$user.put(null, idObj).$promise;\n    }\n\n\n    // resetPassword ()\n    $scope.reSetPW = function() {\n        $modal.open({\n            templateUrl: \"athena/cc_password.html\",\n            // size:\"sm\",\n            controller: [\"$scope\", \"$modalInstance\", \"$source\", function($scope, $modalInstance, $source) {\n                $scope.op = {},\n                    $scope.od = {},\n                    $scope.__proto__ = thatScope,\n                    $scope.$modalInstance = $modalInstance;\n\n                $scope.done = function() {\n                    $scope.validForm();\n\n                    $source.$user.save({\n                        op: \"pwdreset\"\n                    }, $scope.op, function(resp) {\n                        if (resp.msg) {\n                            $scope.od.msg = resp.msg;\n                            return;\n                        }\n\n                        angular.alert(\"修改成功!\");\n                        $scope.cancel();\n                    })\n                }\n            }]\n        })\n\n    }\n\n    // sms , emial  xx秒后 重发;     \n    $scope.ot = {};\n\n    var t_ = 120;\n\n    var text = \"重新发送(%)\";\n    textCond = {\n        smsInterval: \"发送验证码\",\n        emailInterval: \"发送验证邮件\"\n    }; \n    // \n    window.interval = window.interval || {\n        smsInterval: undefined,\n        emailInterval: undefined\n    }\n    $scope.interval = window.interval ;\n\n    window.intervalTimes = {\n        smsInterval: $sessionStorage.smsInterval > 0 ? $sessionStorage.smsInterval : t_,\n        emailInterval: $sessionStorage.emailInterval > 0 ? $sessionStorage.emailInterval : t_\n    };\n\n    //  type = smsInterval || emailInterval\n    function startInterval(type) {\n\n        window.interval[type] = window.interval[type] || $interval(function() {\n\n            $(\"#\" + type).text(text.replace(\"%\", window.intervalTimes[type]));\n            $sessionStorage[type] = --window.intervalTimes[type]\n\n            if (window.intervalTimes[type] < 0) {\n                window.intervalTimes[type] = t_;\n                $interval.cancel(window.interval[type]);\n                window.interval[type] = undefined;\n                $(\"#\" + type).text(textCond[type])\n            }\n        }, 1000);\n    }\n\n    $sessionStorage.smsInterval > 0 && startInterval(\"smsInterval\");\n    $sessionStorage.emailInterval > 0 && startInterval(\"emailInterval\");\n\n\n\n    $scope.validPhone = function() {\n        $modal.open({\n            templateUrl: \"athena/account/users_verify_phone.html\",\n            controller: [\"$scope\", \"$modalInstance\", function($scope, $modalInstance) {\n                $scope.$modalInstance = $modalInstance;\n                $scope.__proto__ = thatScope;\n\n                $scope.u = {\n                    mobile_phone: $scope.user.mobile_phone || $sessionStorage[\"user_phone_\" + user_id]\n                };\n\n                $scope.$watch('u.mobile_phone', function(u) {\n                    $sessionStorage[\"user_phone_\" + user_id] = u;\n                })\n\n                $scope.sendNote = function(e) {\n                    if (!$scope.u.mobile_phone) {\n                        angular.alert(\"请输入手机号\");\n                        return;\n                    }\n                    startInterval(\"smsInterval\");\n                    $source.$note.get({\n                            op: \"user\",\n                            mobile_phone: $scope.u.mobile_phone\n                        },\n                        function() {\n\n                        });\n                }\n\n                // 去 验证  用户 手机;  userself ; \n                $scope.verifyPhone = function() {\n\n                    $source.$user.save({\n                        op: \"verifyphone\"\n                    }, $scope.u, function() {\n\n                        $scope.cancel();\n\n                        angular.alert(\"验证成功!\");\n                        $scope.user.mobile_phone = $scope.u.mobile_phone;\n                        $scope.user.mobile_phone_verified = 1;\n                    })\n                }\n            }]\n        })\n    }\n\n    $scope.validEmail = function() {\n        $modal.open({\n            templateUrl: \"athena/account/users_verify_email.html\",\n            controller: [\"$scope\", \"$modalInstance\", function($scope, $modalInstance) {\n                $scope.$modalInstance = $modalInstance;\n                $scope.__proto__ = thatScope;\n\n                $scope.u = {\n                    email: $scope.user.email || $sessionStorage[\"user_email_\" + user_id],\n                    num: undefined\n                };\n\n                $scope.$watch('u.email', function(e) {\n                    $sessionStorage[\"user_email_\" + user_id] = e;\n                })\n\n                var trueEmail;\n\n                $scope.sendEmail = function(e) {\n\n                    if (!$scope.u.email) {\n                        angular.alert(\"请正确输入邮箱\");\n                        return;\n                    }\n                    startInterval(\"emailInterval\");\n\n\n                    $source.$user.save({\n                            op: \"sendverifyemail\"\n                        }, {\n                            email: $scope.u.email\n                        },\n                        function() {\n                            trueEmail = angular.copy($scope.u.email);\n\n                        }\n                    );\n                }\n\n                $scope.verifyEmail = function() {\n\n                    $source.$user.save({ op: 'verifyuseremail' }, { num: $scope.u.num }, function(resp) {\n\n                        $scope.cancel();\n\n                        angular.alert(\"验证成功!\");\n                        $scope.user.email = trueEmail;\n                        $scope.user.email_verified = 1;\n\n                    })\n\n                }\n\n            }]\n        })\n    }\n\n\n    // 验证联系方式;\n    //        jjw 添加参数temp，标记是phone还是email\n    $scope.verifyUser = function(temp) {\n        $modal.open({\n            templateUrl: temp == 'phone' ? \"athena/account/users_verify_phone.html\" : \"athena/account/users_verify_email.html\",\n            controller: [\"$scope\", \"$modalInstance\", \"$interval\", function($scope, $modalInstance, $interval) {\n                $scope.$modalInstance = $modalInstance;\n\n                $scope.__proto__ = thatScope;\n\n                $scope.u = angular.copy($scope.user);\n                $scope.ver = {};\n\n                var smsInterval, emailInterval;\n\n                var text = \"重新发送(%)\";\n\n\n                var cofText = {\n                    \"email\": \"发送验证邮件\",\n                    \"phone\": '发送验证码'\n                };\n\n                function setInter(btnDom, type) {\n                    btnDom.disabled = true;\n                    var times = 120;\n                    smsInterval = $interval(function() {\n                        $(btnDom).text(text.replace(\"%\", times));\n                        times--;\n                        if (times < 0) {\n                            btnDom.disabled = false;\n\n                            $(btnDom).text(cofText[type || \"phone\"]);\n\n                            $interval.cancel(smsInterval);\n                        }\n                    }, 1000)\n                }\n\n\n\n                $scope.sendEmail = function(e) {\n\n                    if (!$scope.u.email) {\n                        angular.alert(\"请输入邮箱!\");\n                        return;\n                    }\n                    setInter(e.currentTarget, \"email\");\n\n                    var d = {\n                        id: u.id,\n                        email: $scope.u.email\n                    };\n\n                    $source.$user.save({\n                        pk: \"sendverifyemail\"\n                    }, d);\n\n                }\n\n\n\n\n\n\n                $scope.verifyPhone = function() {\n                    if (!$scope.u.mobile_phone) {\n                        angular.alert(\"请输入手机号\");\n                        return;\n                    }\n                    if (!$scope.ver.phone) {\n                        angular.alert(\"请输入验证码\");\n                        return;\n                    }\n\n                    var d = {\n                        id: u.id,\n                        mobile_phone: $scope.u.mobile_phone,\n                        verifi: $scope.ver.phone\n                    };\n\n                    $source.$user.save({\n                        pk: \"verifyphone\"\n                    }, d, function(resp) {\n                        u.mobile_phone_verified = true;\n                        $scope.cancel();\n\n                        u.mobile_phone = $scope.u.mobile_phone;\n\n                        $scope.user.mobile_phone_verified = true;\n                    });\n\n\n                }\n\n\n            }]\n        })\n    }\n\n\n\n}])\n\n.controller('acco_role', [\"$scope\", \"$state\", \"$stateParams\", \"$sys\", \"$source\", \"$modal\", function($scope, $state, $stateParams, $sys, $source, $modal) {\n\n}])\n\n.controller('acco_author', [\"$scope\", \"$state\", \"$source\", \"$q\", function($scope, $state, $source, $q) {\n    // 预先加载 所有组;\n    $scope.$moduleNav(\"权限\", $state);\n\n\n    $scope.gp = $source.$userGroup.query({\n        currentPage: 1\n    }).$promise;\n\n    // 预先加载所有 角色 ;\n    $scope.rp = $source.$role.get().$promise;\n\n\n\n    $q.all([$scope.gp, $scope.rp]).then(function(resp) {\n        $scope.allgroups = resp[0].data;\n        $scope.allroles = resp[1].ret;\n\n\n    })\n\n    // $scope.gp.then(function(resp) {\n    //     $scope.allgroups = resp.data;\n    // })\n\n    // $scope.rp.then(function(resp) {\n    //     $scope.allroles = resp.ret;\n    // })\n\n}])\n\n.controller(\"role_ctrl\", [\"$scope\", \"$state\", \"$stateParams\", \"$source\", \"$sys\", \"$modal\", \"$q\", \"$translate\", function($scope, $state, $stateParams, $source, $sys, $modal, $q, $translate) {\n\n\n    var thatScope = $scope;\n    var role_category = $state.$current.data.role_category;\n\n    $scope.promise = role_category == 1 ? $sys.regionP : $sys.accountP;\n\n    var text_arr;\n    $scope.toText = function(privileges) {\n        text_arr = [];\n        angular.forEach(privileges, function(k, v) {\n            text_arr.push($translate.instant(k))\n        })\n        return text_arr.join(\"; \")\n\n    }\n\n\n    // type = 1 , region ;  =0 , account ;\n    // add or update \n    $scope.addRole = function(role, index) {\n        $modal.open({\n            templateUrl: \"athena/account/role_add.html\",\n            controller: [\"$scope\", \"$modalInstance\", function($scope, $modalInstance) {\n\n                $scope.__proto__ = thatScope;\n                $scope.$modalInstance = $modalInstance;\n\n\n                if (role) {\n                    var o = {};\n                    $scope.r = angular.copy(role);\n\n                    angular.forEach(role.privilege, function(k, v) {\n                        o[k] = true;\n                    })\n\n                    $scope.r.authors = o;\n                } else {\n                    $scope.r = {\n                        role_category: role_category,\n                        authors: {}\n                    }\n                }\n\n\n                $scope.done = function() {\n\n\n\n                    $scope.validForm();\n\n                    var r = angular.copy($scope.r);\n                    r.privilege = [];\n\n                    angular.forEach($scope.r.authors, function(v, i) {\n                        v && (r.privilege.push(i))\n                    });\n\n                    if (!r.privilege.length) {\n                        angular.alert(\"请选择权限!\")\n                        return;\n                    }\n\n\n                    delete r.authors;\n\n                    if (role) {\n                        $source.$role.put({\n                            pk: r.id\n                        }, r, function(resp) {\n                            $scope.roles[index] = r;\n                            $scope.cancel();\n                        }, $scope.cancel)\n                    } else {\n                        $source.$role.save(\n                            r,\n                            function(resp) {\n                                r.id = resp.ret;\n                                thatScope.roles.unshift(r);\n\n                                $scope.cancel();\n                            },\n                            $scope.cancel\n                        )\n\n                    }\n\n                }\n            }]\n        })\n    }\n\n    $scope.delRole = function(r, index) {\n        $scope.confirmInvoke({\n            title: '删除角色:' + r.name,\n            note: \"确认要删除该角色吗?\"\n        }, function(next) {\n\n            $source.$role.delete({\n                pk: r.id\n            }, function(resp) {\n\n                $scope.roles.splice(index, 1)\n\n                next();\n            }, next)\n        })\n    }\n\n\n\n    var d = {\n        role_category: role_category\n    };\n    $scope.loadPageData = function(pageNo) {\n        d.currentPage = pageNo;\n        $scope.showMask = true;\n\n        $source.$role.get(d, function(resp) {\n            // $scope.page = resp;\n            // $scope.page.currentPage = pageNo;\n            $scope.roles = resp.ret || [];\n            $scope.showMask = false;\n\n        }, function() {\n            $scope.showMask = false;\n        });\n    }\n\n    $scope.loadPageData(1);\n\n}])\n\n\n.controller('account_weichat', [\"$scope\", \"$sessionStorage\", \"$source\", \"$timeout\", \"$localStorage\", function($scope, $sessionStorage, $source, $timeout , $localStorage ) {\n\n    console.log(\" account_weichat\" , $scope.user );\n\n    $scope.wei = {}; // weiChatNo , serverUrl  // 第一步; \n\n    $scope.op = { step: undefined };\n\n    $scope.menu = [];\n    $scope.data = {}; // 第二部; \n\n    $scope.showMask = true ;\n\n    // 注销 微信服务号; \n    $scope.unBindServer = function() {\n        $source.$weChat.unBindServer(function() {\n            angular.alert('注销成功!');\n            $scope.wei = {};\n            $scope.op.step = 0;\n        })\n    }\n\n\n    // 得到  weChatServer  信息; \n\n    $source.$weChat.getServerInfo(function(resp) {\n        console.log(resp.ret);\n        $scope.showMask = false ;\n\n        // resp.ret =  angular.fromJson( resp.ret );\n\n        $scope.wei = JSON.parse(resp.ret || '{}');\n\n        $scope.menu = $scope.wei.menu && $scope.wei.menu.split(\",\") || [];\n\n\n        // $scope.op.step = 0 ;\n        // return ;\n\n        if (!!resp.ret && $scope.wei.status == 4) {\n\n            $scope.op.step = -1;\n\n        } else {\n            $scope.op.step = 0;\n\n        }\n    } , function(){\n        $scope.showMask  = false ;\n    })\n\n    // $scope.op.step  = $sessionStorage.weichat_step ; \n\n    // $scope.$watch('op.step' , function( n ){\n    //     $sessionStorage.weichat_step = n ; \n    // });\n\n    $scope.enbaleCopy = function() { // copy_url\n        new Clipboard('#copy_url');\n    }\n\n    // wechat logo 图片; \n    var pictureFile;\n    $scope.setFiles = function(ele) {\n\n        console.log(\"file change \", ele);\n        pictureFile = ele.files[0],\n\n            setPicture(URL.createObjectURL(pictureFile));\n\n    }\n\n    function setPicture(data) {\n\n\n        img = new Image(),\n\n            url = img.src = data;\n\n        img.height = 66,\n            img.width = 296;\n\n        var $img = $(img)\n        img.onload = function() {\n            URL.revokeObjectURL(url)\n            $('#weichat_logo_preview').empty().append($img)\n        }\n\n    }\n\n\n\n    // 第一步;\n    // 输入 \n    $scope.createUrl = function() {\n\n        $scope.validForm('form1')\n\n        //$scope.wei.serverUrl = 'gaefaefffffff'\n        // \n        $source.$weChat.createUrl({ wechat_id: $scope.wei.wechat_id }, function(resp) {\n            $scope.wei.server_url = resp.ret;\n        })\n\n    }\n\n\n    // 验证 serverurl；\n    var status = {\n        0: \"该账号微信服务器地址不存在\",\n        1: \"该账号微信服务器地址已存在\",\n        2: \"该账号微信服务器地址已通过微信验证\", // 验证通过 , \n        4: \"该账号微信服务器地址已通过微信验证，并且服务器已激活\"\n    };\n\n    $scope.verifyUrl = function() {\n\n        $source.$weChat.getServerStatus(function(resp) {\n\n            if (resp.ret == 2) { // 4 该账号微信服务器地址已通过微信验证，并且服务器已激活\n                $scope.op.verifySuccess = true;\n                $timeout(function() {\n                    $scope.op.step = 2;\n                    // $timeout( function(){ \n                    $scope.wei.logo && setPicture($scope.wei.logo);\n                    // } , 1000)     \n                }, 1000)\n            } else {\n                $scope.op.verifyError = true;\n                // $scope.op.weChatStatusMsg = status[resp.ret ] || \"server 无返回数据\" ;\n            }\n\n            // dele --!!!!! \n            // $timeout( function(){\n            //     $scope.op.step = 2 ;  \n            //     $scope.wei.logo  &&  setPicture( $scope.wei.logo ) ;     \n            // },1000)\n\n\n        })\n\n    }\n\n\n    // 第二步 提交;  // menu=1,2,3&logo=xxx&email=xxx&phoneno=xxx\n    // 1: 上传图片,\n    // 2: 调用 借口激活 server;\n    // 1 \n    $scope.setp2Commit = function() {\n\n        if (!($scope.wei.logo || pictureFile)) {\n            angular.alert(\"请设置微信LOGO图片\")\n            return;\n        }\n\n\n        $scope.validForm(\"step2\");\n\n        if (pictureFile) {\n\n            var fd = new FormData();\n            if ($scope.wei.logo) {\n                // http://thinglinx-test.oss-cn-beijing.aliyuncs.com/10108/wechat/logo_fnmgh3\n                var old_logo = $scope.wei.logo;\n                old_logo = old_logo.subString(old_logo.lastIndexOf('/') + 1);\n                // 删除老的 logo 图片;  \n                fd.append(\"old_logo\", old_logo)\n            }\n            // for (var i in $scope.files) {\n            fd.append(\"wechat_picture\", pictureFile);\n\n            var xhr = new XMLHttpRequest();\n\n            xhr.addEventListener(\"load\", configWeiChat, false);\n\n            //  xhr.addEventListener(\"error\", uploadFailed, false) ;\n            //  xhr.addEventListener(\"abort\", uploadCanceled, false) ;\n\n            xhr.open(\"POST\", angular.rootUrl + \"picture/wechat\");\n            xhr.setRequestHeader(\"Accept\", 'application/json');\n\n            xhr.send(fd);\n        } else {\n            configWei();\n        }\n\n\n\n\n    }\n\n    //  2 微信图片上传完后,提交;\n    function configWeiChat(evt) {\n        var resp = JSON.parse(evt.target.response);\n        if (resp.ret) {\n            $scope.wei.logo = $scope.ossRoot + resp.ret;\n            configWei();\n        } else {\n            alert('错误')\n        }\n    }\n\n    function configWei() {\n        $scope.wei.menu = $scope.menu.join(',');\n        var accountname = $localStorage.account;\n        if( !accountname){\n            alert(\"no account name !\");\n            return ; \n        }\n        $source.$weChat.activeServer(  angular.extend( { accountname:  accountname } , $scope.wei), function(resp) {\n            pictureFile = null;\n            $scope.op.step = 3;\n        })\n    }\n\n\n}])\n\n/* Controllers   单独的modul  ; 其他控制器 属于app模块 */\n\n\n\nangular.module('app.basecontroller', [])\n\n.controller('AppCtrl', [\"$scope\", \"$translate\", \"$localStorage\", \"$window\", \"$modal\", \"$state\", \"$timeout\", \"$sessionStorage\", \"$source\", \"$q\", \"$source\", \"$animate\", \"$location\", \"$rootScope\", \"$utils\", \"$cookies\", function(\n    $scope, $translate, $localStorage, $window, $modal, $state,\n    $timeout, $sessionStorage, $source, $q, $source, $animate,\n    $location, $rootScope, $utils , $cookies )  {\n\n    var S = $scope;\n\n\n    $scope.$on('$stateChangeStart', function(event, a, b, c, d) {\n        // console.log( \"stateChangeStart\", event , a,b,c,d)\n\n        angular.from = {\n            text: c.text,\n            url: $state.href(c.name, d)\n        };\n\n    });\n\n\n\n\n    //\"f7846f55cf23e14eebeab5b4e1550cad5b509e3348fbc4efa3a1413d393cb650\";\n\n    // add 'ie' classes to html\n\n    function isSmartDevice($window) {\n        // Adapted from http://www.detectmobilebrowsers.com\n        var ua = $window['navigator']['userAgent'] || $window['navigator']['vendor'] || $window['opera'];\n        // Checks for iOs, Android, Blackberry, Opera Mini, and Windows mobile devices\n        return (/iPhone|iPod|iPad|Silk|Android|BlackBerry|Opera Mini|IEMobile/).test(ua);\n    }\n\n    var isIE = !!navigator.userAgent.match(/MSIE/i);\n    isIE && angular.element($window.document.body).addClass('ie');\n    isSmartDevice($window) && angular.element($window.document.body).addClass('smart');\n\n    // config\n    $scope.app = {\n        name: 'Angulr',\n        version: '1.3.0',\n        // for chart colors\n        color: {\n            primary: '#7266ba',\n            info: '#23b7e5',\n            success: '#27c24c',\n            warning: '#fad733',\n            danger: '#f05050',\n            light: '#e8eff0',\n            dark: '#3a3f51',\n            black: '#1c2b36'\n        },\n        settings: {\n\n            themeID: 1,\n            navbarHeaderColor: 'bg-black',\n            navbarCollapseColor: 'bg-white-only',\n            asideColor: 'bg-black',\n            headerFixed: true,\n            asideFixed: true,\n            asideFolded: false\n        }\n    };\n\n\n    // click 跳转 , 第一个  必须为 state ,\n    //               第二个 必须是 params || null ; ,\n    //              第三个以后 ( 可多个) 是 cache,\n    // 参数可以是: ( a, b, c, d ) 或者 (a, b, [c,d])\n    $scope.goto = function() {\n        var state = arguments[0],\n            params = arguments[1], //\n            value = arguments[2];\n\n        // if (value) {\n        var v = angular.isArray(value) ? value : Array.prototype.splice.call(arguments, 2)\n        $sessionStorage.cache = v;\n        $scope.$$cache = v;\n        // }\n        $state.go(state, params);\n    }\n\n    var text_arr;\n    $scope.jsonString2Text = function(jsonString) {\n        text_arr = [];\n\n        $.each(angular.fromJson(jsonString) || {\n            \"参数\": \"无\"\n        }, function(i, v) {\n            text_arr.push(i)\n            text_arr.push(\"=\")\n            text_arr.push(v + \"; \")\n        })\n        return text_arr.join(\"\");\n\n    }\n\n\n    // 赋初始值 ;\n    $scope.$$cache = $sessionStorage.cache;\n\n\n    //=========form 验证=====  默认 验证 form[ name = \"form\"] ;\n    $scope.validForm = function(formName, scope) {\n        formName = formName || \"form\";\n        var that = scope || this;\n        var valids = that[formName] || // 递归去找 ? 不了;\n            that.$$childTail[formName] ||\n            that.$$childTail.$$childTail[formName];\n\n        if (valids && valids.$invalid) {\n            // 处理 form 的 validate ;\n            var errName;\n            angular.forEach(valids.$error, function(e, k) {\n                angular.forEach(e, function(modelCtrl, k1) {\n                    modelCtrl.$setDirty(true); // = true ; \n\n                    //modelCtrl.$setViewValue(modelCtrl.$viewValue);\n\n                })\n            });\n\n\n            throw (\" form invalid !!\", valids.$error);\n\n        }\n    }\n\n    $scope.ccPassWord = function() {\n        $modal.open({\n            templateUrl: \"athena/cc_password.html\",\n            // size:\"sm\",\n            controller: [\"$scope\", \"$modalInstance\", \"$source\", function($scope, $modalInstance, $source) {\n                $scope.op = {},\n                    $scope.od = {},\n                    $scope.__proto__ = S,\n                    $scope.$modalInstance = $modalInstance;\n\n\n\n                $scope.done = function() {\n                    $scope.validForm();\n\n                    $source.$user.save({\n                        op: \"pwdreset\"\n                    }, $scope.op, function(resp) {\n                        if (resp.msg) {\n                            $scope.od.msg = resp.msg;\n                            return;\n                        }\n\n                        angular.alert(\"修改成功!\");\n                        $scope.cancel();\n                    })\n                }\n            }]\n        })\n    }\n\n\n    // save settings to local storage\n    if (angular.isDefined($localStorage.settings)) {\n        $scope.app.settings = $localStorage.settings;\n    } else {\n        $localStorage.settings = $scope.app.settings;\n    }\n    $scope.$watch('app.settings', function() {\n        $localStorage.settings = $scope.app.settings;\n    }, true);\n\n    // angular translate\n    $scope.lang = {\n        isopen: false\n    };\n    $scope.langs = {\n        en: 'English',\n        zh_CN: '简体中文'\n    };\n    $scope.selectLang = $scope.langs[$translate.proposedLanguage()] || \"简体中文\";\n    $scope.setLang = function(langKey, $event) {\n        // set the current lang\n        $scope.selectLang = $scope.langs[langKey];\n        // You can change the language during runtime\n        $translate.use(langKey);\n        $scope.lang.isopen = !$scope.lang.isopen;\n    };\n\n\n\n    //===================================================================================\n    //===================================================================================\n    //===================================================================================\n\n\n    if (!$sessionStorage.navs) {\n        $sessionStorage.navs = [];\n    }\n\n    $scope.navs = $sessionStorage.navs;\n\n    function transState($title, $state, tab) {\n        //var msg = $translate.instant(\"valid.\" + type);\n        if (angular.isString($state)) {\n            return {\n                id: $state,\n                title: $title\n            }\n        } else {\n            return {\n                id: $state.current.name,\n                title: $title,\n                state: {\n                    name: $state.current.name,\n                    params: $state.params\n                },\n                tab: tab\n            }\n        };\n    }\n\n\n    function pushNav(nav) {\n        var nc, index; // nc  意思 : 包包括;\n\n        $.each($scope.navs, function(i, n) {\n            index = i;\n            return nc = (n.id != nav.id);\n        });\n        if (nc) {\n            $scope.navs.push(nav);\n        }\n        return [nc, index]\n    }\n\n    // 管理  || 展示 根 ;\n    $scope.$rootNav = function($title) {\n        $scope.navs[0] = {\n            title: $title,\n            id: 'root'\n        };\n    };\n\n    // 清空 nav ;\n    $scope.$moduleNav = function($title, $state) {\n        var s = transState($title, $state);\n        $scope.navs = $sessionStorage.navs = $scope.navs.splice(0, 1);\n        pushNav(s);\n    };\n\n\n    // 追加 nav  ;\n    $scope.$appendNav = function($title, $state) {\n        // if ($scope.navs[$scope.navs.length - 1].title != $title) {\n        //     pushNav(transState($title, $state));\n        // }\n    };\n\n    // (tab 类型 )替换最后一个 nav;\n    $scope.$popNav = function($title, $state) {\n        // var l, s, r;\n        // l = $scope.navs[$scope.navs.length - 1];\n        // s = transState($title, $state, true);\n\n        // if (l.tab) {\n        //     $scope.navs.pop();\n        // }\n        // r = pushNav(s);\n        // if (!r[0]) {\n        //     $scope.navs = $scope.navs.splice(0, r[1] + 1);\n        // };\n    };\n\n\n    $scope.navGo = function(n) {\n        if (!n.state) return;\n        $state.go(n.state.name, n.state.params);\n        //$state.go();\n    };\n\n\n    // 关闭弹出 window\n    $scope.cancel = function() {\n        this.$modalInstance && this.$modalInstance.dismiss('cancel');\n    };\n\n    // 登出;\n    $scope.logout = function() { //ui-sref=\"access.signin\"\n        $source.$user.logout(\n            function(ret) {\n\n                $cookies ;\n\n\n                $scope.user = null;\n                // $utils.delCookie('session_id'); \n                $state.go('access.signin');\n                // $window.location =\"/athena\" ;\n            }\n        );\n    };\n\n    // 公共 采集站 模版 的  替换, 失败, 移除 ,  在  appCtrl中定义;\n\n    // 替换;\n    $scope.chaStation = function(scope, station, index) {\n\n        $modal.open({\n            templateUrl: 'athena/dastation/station_change.html',\n            size: \"md\", //size  lg md  sm\n            resolve: {\n                station: function() {\n                    return station\n                }\n            },\n            controller: [\"$scope\", \"station\", \"$modalInstance\", \"$source\", function($scope, station, $modalInstance, $source) {\n                $scope.__proto__ = scope;\n\n                $scope.station = station;\n                $scope.cancel = function() {\n                    $modalInstance.dismiss('cancel')\n                };\n                // 替换逻辑;\n                $scope.done = function(btn) {\n                    //$scope.checkModalForm(btn, $scope);\n                    // if (!$scope.$$childTail.form.$valid) return;\n                    $scope.validForm();\n\n\n                }\n            }]\n        });\n    };\n\n    //  采集占失效   失败; effactive ;\n\n    $scope.effStation = function(dastations, station, index, todel) {\n        $scope.confirmInvoke({\n            title: \"失效系统 \" + station.name,\n            note: \"确认要失效该系统吗?\"\n        }, function(next) {\n            var d = {\n                uuid: station.uuid,\n                state: 0\n            };\n\n            $source.$system.deactive({\n                pk: station.uuid\n            }, function() {\n                station.state = 0;\n\n                todel && (dastations.splice(index, 1));\n\n                next();\n            }, function() {\n                next();\n            })\n\n        })\n    };\n\n\n    // 移除;\n    $scope.delStation = function(dastations, station, index) {\n        $scope.confirmInvoke({\n            title: \"您是否要删除系统:\" + station.name,\n            warn: \"删除系统将会丢失此系统的全部历史数据\"\n        }, function(next) {\n            $source.$system.delete({\n                system_id: station.uuid\n            }, function(resp) {\n\n                dastations.splice(index, 1);\n\n                next();\n            }, function() {\n\n                next()\n            });\n        })\n    };\n\n    //激活采集站;\n    //  jump 是否 跳转;\n    $scope.activateStation = function(dastations, station, index, jump) {\n\n\n        $scope.confirmInvoke({\n            // jjw 采集站->系统\n            title: \"激活系统 \" + station.name,\n            note: \"确认要激活该系统吗?\"\n        }, function(next) {\n            // 激活采集站;\n            $source.$system.active({\n                pk: station.uuid\n            }, function(resp) {\n                station.state = 1;\n                dastations && (dastations.splice(index, 1));\n                next();\n                jump && $scope.goto('app.station.prop._basic', station, station);\n\n            }, function() {\n                angular.alert(\"激活失败!\");\n                next();\n            });\n        })\n    };\n\n    // 编辑采集站;\n\n    $scope.editStation = function(scope, s) {\n        $modal.open({\n            templateUrl: \"athena/dastation/station_edit.html\",\n            controller: [\"$scope\", \"$source\", \"$modalInstance\", function($scope, $source, $modalInstance) {\n                $scope.__proto__ = scope;\n                $scope.das = {\n                    uuid: s.uuid,\n                    name: s.name,\n                    desc: s.desc\n                }; //angular.copy(s) ;\n\n                $scope.op = {};\n\n                $source.$region.query({\n                    currentPage: 1\n                }, function(resp) {\n                    $scope.projs = resp.data;\n                    if (s.region_id) {\n                        $.each($scope.projs, function(i, n) {\n                            if (s.region_id == n.id) {\n                                $scope.op._proj = n;\n                                return false;\n                            }\n                        })\n                    }\n\n                })\n\n\n                $scope.cancel = function() {\n                    $modalInstance.dismiss('cancel')\n                };\n                $scope.done = function() {\n                    // $scope.checkModalForm(btn, $scope);\n                    $scope.validForm();\n                    var region = $scope.op._proj;\n                    $scope.das.region_id = region.id,\n\n                        $source.$system.put($scope.das, function(resp) {\n                            $scope.das.region_name = region.name;\n                            angular.extend(s, $scope.das);\n                            $scope.cancel();\n\n\n                        }, $scope.cancel);\n                }\n\n            }]\n        });\n    };\n\n\n    // 同步 das 配置;\n    $scope.syncSystem = function(das, e, scope) {\n\n\n        // if( scope._$preventDefault){\n        //     angular.alert(\"请不要频繁操作!\");\n        //     return ;\n        // }\n        // scope._$preventDefault = true ; \n\n\n\n        var that = this;\n        this._show_sync_ok = false;\n        this._show_sync_error = false;\n\n        $source.$system.sync({\n                pk: das.uuid\n            },\n            function(resp) {\n\n                das.needsync = false;\n                that._show_sync_ok = true;\n            },\n            function(resp) {\n                that._show_sync_error = true;\n            });\n    };\n\n\n\n\n\n    //  启动 采集站;\n    //  在\n    $scope.startSystem = function(sys, systems, index) {\n        // var uuid = sys.uuid;\n\n        function start() {\n            return $source.$system.start({\n                pk: sys.uuid\n            }).$promise;\n        }\n        if (systems) {\n            $scope.confirmInvoke({\n                title: \"启动系统 \" + sys.name,\n                note: \"确认要启动该系统吗?\"\n            }, function(next) {\n                start().then(function(resp) {\n                    systems.splice(index, 1); // ?? 启动后移除; ???\n                    next();\n                    $scope.alert({\n                        title: \"启动成功\"\n                    });\n                });\n            })\n        } else {\n            start().then(function(resp) {\n                $scope.alert({\n                    title: \"启动成功\"\n                });\n            });\n        }\n    }\n\n    // type => 召唤实时 : undefined ,  超换参数: 1  召唤 所有: 3   ,\n    $scope.d_call = function(system, type, e) {\n        var $button = $(e.currentTarget);\n\n        $button.css({\n            opacity: 1\n        });\n        // var s = $animate.removeClass( button.children[1] ,\"hide\");\n        $button.text(\"召唤中...\").attr(\"disabled\", true);\n\n        $source.$system.post({\n            pk: system.uuid,\n            type: type\n        }, {}, function(resp) {\n            //                jjw 召唤成功不显示\n            //                angular.alert(\"召唤成功\");\n            $button.text(\"召唤成功\");\n            $timeout(function() {\n                $button.text(\"召唤\").attr(\"disabled\", false);\n            }, 5000);\n        }, function() {\n            $button.text(\"召唤失败\").toggleClass(\"btn-danger\");\n            $timeout(function() {\n                $button.text(\"召唤\").toggleClass(\"btn-danger\").attr(\"disabled\", false);\n            }, 5000);\n        });\n\n    };\n\n\n    // resp_err , info , warn ;\n    angular.alert = $scope.alert = function(msg, fun, func) {\n        $modal.open({\n            templateUrl: \"athena/debris/_alert.html\",\n            controller: [\"$scope\", \"$modalInstance\", \"$translate\", function($scope, $modalInstance, $translate) {\n\n                if (angular.isString(msg)) {\n                    msg = {\n                        title: msg\n                    };\n                };\n\n                if (msg.type == \"resp_err\") {\n                    msg.title = $translate.instant(msg.title);\n                }\n\n                $scope.msg = msg;\n                var m = {\n                    'resp_err': \"fa-exclamation-circle text-info\",\n                    \"info\": \"fa-exclamation-circle text-info\",\n                    \"warn\": \"fa-exclamation-triangle\"\n                }\n                $scope.msg.type = m[$scope.msg.type || 'info'] || m.info;\n\n\n                $scope.cancel = function() {\n\n                    $modalInstance.dismiss('cancel');\n                    func && func();\n                };\n                $scope.done = function() {\n                    $scope.cancel();\n                    fun && fun();\n                };\n            }]\n        })\n    }\n\n    /**\n     * msg = { title : '标题' , note:  注释 , warn: 警告  ,\n     *     todo: 确定按钮字符 ,\n     *     undo : 取消按钮字符 }\n     * handler : funcction  ;     handler 最好有 true false 返回值 , 以便derfer 处理 ;\n     * @param msg\n     * @param handler\n     */\n    $scope.confirmInvoke = function(msg, handler, cancelHandler) {\n        $modal.open({\n            templateUrl: 'athena/debris/confirm_invoke.html',\n            //resolve:{ msg: function (){ return  msg } ,  handler: function (){ return handler} } ,\n            //  controller: function( $scope ,$modalInstance , $q ,  msg , handler  ){\n            controller: [\"$scope\", \"$modalInstance\", function($scope, $modalInstance) {\n                $scope.cancel = function() {\n                    cancelHandler && cancelHandler();\n                    $modalInstance.dismiss();\n                };\n\n\n\n                $scope.todo = msg.todo || \"do\";\n                $scope.undo = msg.undo || \"cancel\"\n\n                $scope.done = function() {\n                    // handler ? handler($scope.cancel) : $scope.cancel();\n                    handler ? handler($modalInstance.dismiss) : $modalInstance.dismiss();\n                };\n                $scope.msg = msg;\n\n            }]\n        });\n    };\n\n\n    //********************\n    //\n\n    $scope.showAlarmMsg = function(alarm, system_id) {\n        $modal.open({\n            templateUrl: \"athena/show/alarm_msg.html\",\n            resolve: {\n                // triger: function(){\n                //    return  $source.$sysProfTrigger.get({pk:1}).$promise\n                // }\n                conformMsg: [\"$show\", function($show) {\n                    return $show.alarm.getConformMsg({\n                        ack_id: alarm.ack_id,\n                        system_id: alarm.system_id\n                    }).$promise;\n                }]\n            },\n            controller: [\"$scope\", \"$modalInstance\", \"conformMsg\", function($scope, $modalInstance, conformMsg) {\n                $scope.__proto__ = S;\n                $scope.$modalInstance = $modalInstance;\n                // $scope.done = $scope.cancel;\n                $scope.alarm = alarm;\n                $scope.conformMsg = conformMsg.ret;\n\n                conformMsg.ret.user_id && $source.$user.get({\n                    pk: conformMsg.ret.user_id\n                }, function(resp) {\n                    $scope.conformMsg.username = resp.ret.username;\n                })\n\n            }]\n        });\n    }\n\n    $scope.conformAlarm = function(page, alarm, index, system_id, active) {\n        $modal.open({\n            templateUrl: \"athena/show/alarm_conform.html\",\n            controller: [\"$scope\", \"$modalInstance\", \"$show\", function($scope, $modalInstance, $show) {\n                $scope.__proto__ = S;\n                $scope.$modalInstance = $modalInstance;\n                // $scope.done = $scope.cancel;\n                $scope.alarm = alarm;\n\n                $scope.od = {\n                    message: \"\"\n                }\n\n                $scope.done = function() {\n\n                    $scope.validForm();\n                    $show.alarm.conform(\n                        angular.extend({\n                            alarm_id: alarm.id,\n                            system_id: alarm.system_id\n                        }, $scope.od),\n                        null,\n                        function(resp) {\n                            $scope.cancel();\n\n                            alarm.active = -1;\n                            alarm.ack_id = resp.ret;\n                            alarm.close_time = new Date();\n\n                            //angular.alert(\"确认报警成功\");\n                            page.total--;\n\n                            if (\"a\" == active) {\n                                page.data.splice(index, 1);\n                            }\n\n\n                        },\n                        function() {\n                            $scope.cancel();\n                            //angular.alert(\"确认报警失败\")\n                        })\n                }\n\n            }]\n        });\n\n    }\n\n    // 接收邮件通知 ;\n    $scope.acceptSMS = function(user) {\n        //\"mail_notice\":0,\"sms_notice\":0\n\n        // if( !user.mobile_phone_verified ){\n        //     angular.alert(\"您的手机未通过验证,不可接收短信通知!\");\n        //     return ;\n        // }\n\n        $source.$user.save({\n                op: \"notice\"\n            }, {\n                sms_notice: user.sms_notice ? 0 : 1\n            },\n            function() {\n                user.sms_notice = !user.sms_notice;\n\n            }\n        )\n\n    }\n\n\n    // 接收短信通知;\n    $scope.acceptEmail = function(user) {\n\n        // if( !user.email_verified ){\n        //     angular.alert(\"您的邮箱未通过验证,不可接收邮件通知!\");\n        //     return ;\n        // }\n\n        $source.$user.save({\n            op: \"notice\"\n        }, {\n            mail_notice: user.mail_notice ? 0 : 1\n        }, function() {\n            user.mail_notice = !user.mail_notice;\n        })\n    }\n\n\n}])\n\n//登录\n.controller(\"access_signin\", [\"$scope\", \"$state\", \"$timeout\", \"$localStorage\", \"$sys\", \"$compile\", \"$source\", \"$modalStack\", \"$rootScope\", \"$modalStack\", function($scope, $state, $timeout, $localStorage, $sys,\n    $compile, $source, $modalStack, $rootScope, $modalStack) {\n\n    $modalStack.dismissAll();\n\n    $scope.op = {\n        t: 1, // 图片验证码;\n        b: false, // 登录按钮是否可用; \n    };\n  \n    // 获取登录次数;\n    $source.$common.get({\n        op: 'logintimes'\n    }, function(resp) {\n        $scope.op.need_idenfity = !!resp.ret;\n    });\n\n\n\n    $scope.user = {};\n\n\n\n    $scope.user.account = $localStorage.account;\n\n\n\n    // $scope.st.login_errtimes ++ ;\n\n    $scope.login = function() {\n\n\n        var u = $scope.user;\n        if (!u.account) {\n            angular.alert(\"请输入公司名称\");\n            throw (\"\");\n        }\n        if (!u.username) {\n            angular.alert(\"请输用户名\");\n            throw (\"\");\n        }\n        if (!u.password) {\n            angular.alert(\"请输入密码\");\n            throw (\"\");\n        }\n\n\n        $scope.validForm();\n\n        $scope.op.b = true;\n\n        $localStorage.account = $scope.user.account;\n\n        $source.$user.login($scope.user,\n            function(resp) {\n\n                // resp.ret.sms_notice = !!resp.ret.sms_notice;\n                // resp.ret.mail_notice = !!resp.ret.mail_notice;\n                // $(\"body\").scope().user  = resp.ret ;\n\n                if (resp.ret) {\n\n                    //$state.go( $sys.rootState );\n                    $state.go(\"app.m_region\");\n                    //$state.go(\"app.template\");\n                } else {\n                    $scope.op.b = false;\n                    $scope.resp = resp;\n                }\n            },\n\n            function(resp) { // {err:.. , ret: ... }\n                if (resp.err == \"login_yet\") {\n                    $timeout(function() {\n                        $state.go(\"app.m_region\");\n                        $modalStack.dismissAll();\n\n                    }, 2000)\n\n                    return;\n                }\n                if (resp.img) {\n                    $scope.op.need_idenfity = true;\n                    $(\"#login_identify\").attr(\"src\", \"data:image/jpg;base64,\" + resp.img)\n                }\n\n                $scope.op.t++;\n\n                $scope.op.b = false;\n\n\n\n            }\n\n        );\n    };\n\n}])\n\n\n.controller(\"access_signup\", [\"$scope\", \"$state\", \"$location\", \"$source\", \"$localStorage\", \"$interval\", function($scope, $state, $location, $source, $localStorage, $interval) {\n\n    // signup ;\n    $scope.comp = {};\n    $scope.op = {};\n\n    $scope.time = 0;\n    var inter, time = 0;\n\n\n    // 是否是 第三部;\n    var uuid = $location.$$search.v;\n\n    if (uuid) {\n\n        $source.$common.verifyUuid({\n            uuid: uuid\n        }, function(resp) {\n\n            // verify uuid ;\n            // $source.$account.get({\n            //     pk: \"admin\",\n            //     uuid: uuid\n            // }, function(resp) {\n\n            if (resp.ret) {\n                $scope.op.step = \"step3\"\n            } else {\n                $state.go(\"access.signin\");\n            }\n        })\n    } else {\n        $scope.op.step = \"step1\";\n    }\n\n    // 发送 account 验证码;\n\n\n    // 去缓存account,到 website ;\n    // setp1\n    $scope.signup = function($event) {\n\n\n\n        $scope.validForm('form1');\n\n        $scope.showMask = true;\n\n        var dom = $event.currentTarget;\n        dom.disabled = true;\n\n\n        $source.$account.save($scope.comp, function(resp) {\n\n\n            $scope.op.step = \"step2\";\n            $scope.showMask = false;\n\n            // 注册成功;\n            //$localStorage.comp_name = $scope.comp.name;\n            // $scope.alert({  type: 'info',   title: \"注册成功!\"  }, function() {\n            //     $state.go(\"access.signin\");\n            // })\n\n        }, function() {\n            $scope.showMask = false;\n            dom.disabled = false;\n            $scope.op.t++;\n        })\n    };\n\n\n    $scope.reSendEmail = function() {\n        $scope.validForm(\"form1\");\n        $source.$account.save($scope.comp, function(resp) {\n            angular.alert(\"邮件重发成功\");\n        })\n    }\n\n    $scope.openEmail = function() {\n        window.open(\"//mail.\" + $scope.comp.admin.email.replace(/.*@(.+)/, \"$1\"))\n    }\n\n\n    // 创建 account ; step3 ;\n    $scope.create = function() {\n\n        if ($scope.confirm_password != $scope.comp.admin.password) {\n            angular.alert(\"两次密码输入不一致\");\n        }\n\n        $scope.validForm(\"form2\");\n\n\n\n\n\n        $scope.showMask = true;\n\n        $source.$account.save({\n            pk: 'admin',\n            uuid: uuid\n        }, $scope.comp.admin, function(resp) {\n\n            $scope.showMask = false;\n            // 注册成功;\n            $localStorage.comp_name = $scope.comp.name;\n\n            $scope.alert({\n                type: 'info',\n                title: \"注册成功!\"\n            }, function() {\n                $scope.showMask = false;\n                $state.go(\"access.signin\");\n            })\n\n        })\n    }\n\n\n}])\n\n\n// 更改管理员密码;\n.controller(\"access_fogpas\", [\"$scope\", \"$state\", \"$sessionStorage\", \"$source\", \"$interval\", \"$location\", \"$timeout\", function($scope, $state, $sessionStorage, $source, $interval, $location, $timeout) {\n\n    $scope.od = {};\n    $scope.account = {\n        op: \"admin\",\n        account: null, // account  name ;\n        identify: null, // 图片验证码;\n    }\n    $scope.admin = {};\n\n\n    $scope.t = 123111;\n\n    var uuid = $location.$$search.v;\n    if (uuid) {\n        $source.$common.verifyUuid({\n            uuid: uuid\n        }, function(resp) {\n            // })\n\n            // verify uuid ;\n            // $source.$account.get({\n            //     pk: \"admin\",\n            //     uuid: uuid\n            // }, function(resp) {\n            if (resp.ret) {\n                $scope.od.step = 3;\n            } else {\n                $scope.od.step = 4;\n                $timeout(function() {\n\n                    $state.go(\"access.signin\");\n                }, 5000)\n            }\n\n        })\n    } else {\n        $scope.od.step = 1;\n    }\n\n\n\n    $scope.setp1 = function($event) {\n\n        $scope.validForm(\"step1\");\n\n\n        $scope.showMask = true;\n\n        $event.currentTarget.disabled = true;\n\n        //$scope.od.identi.length <4  return ;\n        $source.$common.get(\n            $scope.account,\n            function(resp) {\n                // $scope.od.phone = resp.ret;\n\n                $scope.showMask = false;\n                $scope.od.step = 2;\n                $event.currentTarget.disabled = false;\n            },\n            function(resp) {\n                $scope.showMask = false;\n                $scope.t++;\n                $event.currentTarget.disabled = false;\n            }\n        )\n    };\n\n\n    // 更改密码;\n    $scope.cc_done = function() {\n\n        $scope.validForm(\"form2\");\n\n        $scope.admin.code = uuid;\n\n        $scope.showMask = true;\n        $source.$common.save({\n                op: \"admin\"\n            },\n            $scope.admin,\n            function(resp) {\n                $scope.showMask = false;\n                $scope.alert({\n                        title: \"修改成功\",\n                        do: \"\"\n                    }, function() {\n                        $state.go('access.signin');\n                    }),\n                    function() {\n                        $scope.showMask = false;\n                    }\n            });\n    };\n}])\n\n\n.controller(\"verifyemail\", [\"$scope\", \"$state\", \"$source\", \"$timeout\", \"$location\", function($scope, $state, $source, $timeout, $location) {\n\n    $scope.op = {};\n\n    var code = $location.$$search.code;\n\n\n    if (code) {\n        $source.$common.get(angular.extend({\n            op: \"verifyemail\"\n        }, $location.$$search), function(resp) {\n\n\n            if (!resp.err) {\n                $scope.op.verifyemail = 1;\n                $timeout(function(argument) {\n                    // $state.go(\"access.signin\");\n                }, 5000)\n\n            } else {\n\n                $scope.op.verifyemail = 2;\n\n                $timeout(function() {\n                    //    $state.go(\"access.signin\");\n\n                }, 2000);\n            }\n\n\n        });\n\n\n    } else {\n        //$scope.op.verifyemail = false ;\n        //$state.go(\"access.signin\");\n    }\n\n\n\n\n\n}])\n\n//========================================================================\n//========================================================================\n\n\n// 联系我们; 技术支持; 问题反馈, 帮助;\n// 在 app.html 中!\n.controller('service', [\"$scope\", \"$modal\", function($scope, $modal) {\n\n    var S = $scope;\n    //联系我们;\n    $scope.c = function() {\n        $modal.open({\n            templateUrl: 'athena/contactus.html'\n        })\n    }\n\n    //使用条框;\n    $scope.u = function() {\n        $modal.open({\n            templateUrl: 'athena/useclauses.html'\n        })\n    }\n\n    // 问题反馈;\n    $scope.feedback = function() {\n        $modal.open({\n            templateUrl: 'athena/feedback.html',\n            controller: [\"$scope\", \"$modalInstance\", function($scope, $modalInstance) {\n                $scope.$modalInstance = $modalInstance;\n                $scope.__proto__ = S;\n\n\n            }]\n        })\n    }\n\n\n    // 技术支持;\n    $scope.support = function() {\n\n\n    }\n\n\n}])\n\n\n\n//========================================================================\n\n;\n\n \n\n\n    angular.module('app.model.device', [])\n        .controller(\"devmodel\", [\"$scope\", \"$compile\", \"$state\", \"$modal\", \"$log\", \"$http\", \"$timeout\", \"$source\", function($scope, $compile, $state, $modal, $log, $http,\n            $timeout, $source) {\n\n            $scope.op = {\n                f_n: \"\"\n            };\n\n            // $scope.status = {\n            //     isFirstOpen: true,\n            //     isFirstDisabled: false\n            // };\n\n\n            var tempScope = $scope;\n\n\n            var $window = $(window);\n\n\n\n            // 监视屏幕滚动;\n            var _timeout, w_st, w_h, t_p, t_b, p_t, p_b,\n                t_doms, $t_dom;\n\n            $scope.$on(\"$destroy\", function() {\n                $window.off(\"scroll\");\n            })\n\n            $window.scroll(function() {\n                $timeout.cancel(_timeout);\n\n                _timeout = $timeout(function() {\n\n                    w_st = $(window).scrollTop();\n                    w_h = $(window).innerHeight();\n\n                    return;\n\n                    // 判断 temp 滚动;  当 temp 超上限 判断是否展开;  若展开判断 point ;\n                    t_doms = $(\"#temp_context .temp\");\n\n\n                    $.each(t_doms, function(i) {\n                        $t_dom = $(this);\n                        if ($dom.position().top < w_st) {\n                            // 上超限 ;\n\n\n                        }\n                        if ($dom.position().top > (w_h + w_st)) {\n                            // 下超限;\n\n                        }\n                    })\n\n                    // 判断 point 滚动;\n\n                }, 200);\n\n            });\n\n            // 加载 device model ;\n            $scope.showMask = true;\n            $source.$deviceModel.get(function(resp) {\n                $scope.deviceModels = resp.ret;\n                $scope.showMask = false;\n            }, function() {\n                $scope.showMask = false;\n            });\n\n\n            // 加载 device model  下 的 points ;\n            $scope.loadPoints = function(scope, $event, index, devModel) {\n                if (!scope.points) {\n                    $source.$dmPoint.get({\n                            device_model: devModel.uuid\n                        },\n                        function(resp) {\n                            scope.points = resp.ret;\n                        }\n                    );\n                }\n            };\n\n            var  drivers;\n            // 添加 || 编辑  模版; 弹出框 ;=================================================\n            $scope.add_edit_t = function(scope, t) { //  temp-scope , 或者; super-scope ;\n                $modal.open({\n                    templateUrl: 'athena/template/temp.html',\n                    controller: [\"$scope\", \"$modalInstance\", \"$source\", \"$filter\", function($scope, $modalInstance, $source, $filter) {\n                        $scope.__proto__ = scope;\n                        $scope.$modalInstance = $modalInstance;\n\n                        $scope.isAdd = !t;\n\n                        if (!t) { // 新建;\n                            //$scope.drivers =\n                            \n                            \n                            $source.$driver.get({\n                                type: \"device\"\n                            }, function(resp) {\n\n                                $scope.drivers =  resp.ret ;\n                                $scope.T.driver_id = $scope.drivers[0].driver_id;\n                            });\n                        }\n\n\n\n                        $scope.T = t ? angular.copy(t) : {};\n\n\n\n                        // 编辑 新建 template ;\n                        $scope.done = function(btn) {\n                            $scope.validForm();\n\n                            if (!t) {\n                                // 新建;   \n                                $source.$deviceModel.save($scope.T, function(resp) {\n\n                                    $scope.T.uuid = resp.ret;\n                                    $scope.deviceModels.push($scope.T);\n                                    // $scope.page.total ++ ;\n                                    $scope.cancel()\n                                });\n                            } else {\n                                //更名;\n                                $source.$deviceModel.put({\n                                    uuid: t.uuid,\n                                    name: $scope.T.name,\n                                    desc: $scope.T.desc\n                                }, function(resp) {\n                                    t.name = $scope.T.name;\n                                    t.desc = $scope.T.desc;\n                                    $scope.cancel()\n                                })\n                            }\n                        }\n                    }]\n                });\n            };\n\n\n            // 上传模版;==================================================================================\n            $scope.upload_t = function() {\n                $modal.open({\n                    templateUrl: 'athena/template/temp_upload.html',\n                    controller: temp_upload,\n                    size: \"m\", //size\n                    resolve: {\n                        $$scope: function() {\n                            return $scope;\n                        }\n                    }\n                });\n            };\n\n\n\n\n\n\n            // 导出模版;===============================================================================\n            $scope.export_t = function(T) {\n                $modal.open({\n                    templateUrl: '../views/template/temp_export.html',\n                    controller: temp_export,\n                    size: \"m\", //size\n                    resolve: {\n                        $$scope: function() {\n                            return $scope;\n                        },\n                        T: function() {\n                            return T\n                        }\n                    }\n                });\n            };\n\n\n\n            var temp_export = function($scope, $$scope, $modalInstance, T) {\n                $scope.cancel = $$scope.closePopupWin($modalInstance);\n                $scope.T = T;\n            };\n            temp_export.$inject = [\"$scope\", \"$$scope\", \"$modalInstance\", \"T\"];\n\n\n            // ============================= 用户删除 tempalte  group file ===========================\n            // 删除 tempalte\n\n            $scope.delTemp = function(index, obj) {\n\n                var msg = {\n                    title: \"删除模版: \" + obj.name,\n                    warn: \"确认要删除该设备模型吗?\"\n                };\n\n                if (obj.ref)\n                    msg.warn = \"该模版被\" + obj.ref + \"个设备使用! 不可删除!\";\n\n                $scope.confirmInvoke(msg, function(next) {\n                    if (obj.ref) return;\n                    $source.$deviceModel.delete({\n                        uuid: obj.uuid\n                    }, function(resp) {\n\n                        $scope.deviceModels.splice(index, 1);\n\n                        next();\n                    }, next)\n                });\n            };\n\n            $scope.delPoint = function(scope, index, p, dm_uuid) {\n                $scope.confirmInvoke({\n                    title: \"删除点: \" + p.name,\n                    warn: \"确认要删除该点吗?\"\n                }, function(next) {\n                    $source.$dmPoint.delete({\n                        id: p.id,\n                        device_model: dm_uuid\n                    }, function(resp) {\n                        scope.points.splice(index, 1);\n                        next();\n                    }, next);\n                })\n            };\n\n\n            //--------------\n            //添加 point;\n\n            $scope.addOrEditPoint = function(scope, p, index) {\n\n                $modal.open({\n                    templateUrl: 'athena/template/file.html',\n                    controller: [\"$scope\", \"$modalInstance\", \"$sys\", function($scope, $modalInstance, $sys) {\n\n                        $scope.__proto__ = scope;\n                        $scope.$modalInstance = $modalInstance;\n\n                        $scope.point = {};\n                        $scope.isAdd = !!p;\n\n                        if (p) { //编辑; \n                            $scope.point = angular.copy(p);\n                            $scope.point.params = angular.fromJson($scope.point.params);\n                        } else {\n                            var dm = scope.dm, // repeat 中的 属性;\n                                driver = $sys.point[dm.driver_id];\n\n                            var basic = $sys.point.entity;\n                            // var  par =   driver.entity   ;     \n                            var par = angular.copy(driver.entity);\n\n                            $scope.point = angular.extend({},\n                                basic,\n                                par\n                            );\n\n                        };\n\n                        // $scope.g = {hex: \"0001ffdf\", show: \"2\", type: \"2\", mask: true};\n\n                        $scope.done = function() {\n                            $scope.validForm();\n                            // 创建 ? || 编辑?\n                            $scope.point.device_model = scope.dm.uuid;\n\n                            if (p) {\n                                // 编辑;\n                                $source.$dmPoint.put($scope.point, function(resp) {\n\n                                    $scope.points[index] = angular.copy($scope.point);\n                                    $scope.cancel();\n\n                                });\n                            } else {\n                                // 创建\n                                $source.$dmPoint.save($scope.point, function(resp) {\n\n                                    $scope.point.id = resp.ret;\n                                    $scope.points.push($scope.point);\n                                    $scope.cancel();\n\n                                });\n                            }\n                            // $scope.cancel(); \n                        };\n                    }]\n                });\n            };\n            $scope.clone_f = function(f_id) {\n            };\n\n        }]);\n\n\n \n\n\n\nangular.module(\"app.model.system\", [])\n    .controller(\"sysmodel\", [\"$scope\", \"$state\", \"$modal\", \"$source\", \"$utils\", function($scope, $state, $modal, $source, $utils) {\n\n\n\n        $scope.$moduleNav(\"系统模型\", $state);\n        $scope.op = {\n            f_n: \"\"\n        };\n\n        var t = $scope,\n            page;\n\n        // 加载所有 sysmodel ;\n        $scope.showMask = true;\n        $source.$sysModel.get($scope.$sys.fristPage, function(resp) {\n            $scope.page = page = {\n                    data: resp.ret\n                } // $utils.page(resp);\n\n            $scope.showMask = false;\n        }, function() {\n            $scope.showMask = false;\n        });\n\n        $scope.updateSysModel = function(idobj) {\n            return $source.$sysModel.put(null, idobj).$promise;\n        }\n\n        $scope.createSM = function() {\n            $modal.open({\n                templateUrl: 'athena/sysmodel/add_sysmodel.html',\n                controller: [\"$scope\", \"$modalInstance\", function($scope, $modalInstance) {\n                    $scope.__proto__ = t,\n                        $scope.$modalInstance = $modalInstance,\n                        $scope.sm = {\n                            mode: '1',\n                            comm_type: '1'\n                        },\n                        $scope.isAdd = true;\n                    $scope.done = function() {\n                        // 验证表格;\n                        $scope.validForm();\n                        // 新建 sysmodel ;\n                        $source.$sysModel.save($scope.sm, function(resp) {\n                            var d = {\n                                uuid: resp.ret,\n                                create_time: new Date(),\n                                device_count: 0,\n                                profile_count: 1\n                            };\n\n                            page.data.push(angular.extend(d, $scope.sm));\n                            page.total++;\n                            $scope.cancel();\n                        });\n                    }\n                }]\n            })\n        }\n\n        $scope.deleteSM = function(index, sm) {\n            $scope.confirmInvoke({\n                title: \"删除系统模型: \" + sm.name,\n                warn: \"确认要删除该系统模型吗?\"\n            }, function(next) {\n                $source.$sysModel.delete({\n                    uuid: sm.uuid\n                }, function(resp) {\n                    page.data.splice(index, 1);\n                    page.total--;\n\n                    next();\n                }, next)\n            })\n        }\n\n        $scope.updateSM = function(scope, index, sm) {\n            $modal.open({\n                templateUrl: 'athena/sysmodel/add_sysmodel.html',\n                controller: [\"$scope\", \"$modalInstance\", function($scope, $modalInstance) {\n                    $scope.__proto__ = scope;\n                    $scope.$modalInstance = $modalInstance;\n                    $scope.sm = angular.copy(sm);\n                    $scope.done = function() {\n                        $scope.validForm();\n                        var n = $scope.sm.name,\n                            m = $scope.sm.mode,\n                            d = $scope.sm.desc,\n                            c = $scope.sm.comm_type,\n                            da = {\n                                uuid: sm.uuid,\n                                name: n,\n                                desc: d,\n                                comm_type: c,\n                                mode: m\n                            };\n                        $source.$sysModel.put(da, function(resp) {\n                            sm.name = n,\n                                sm.desc = d,\n                                sm.mode = m,\n                                sm.comm_type = c;\n                            $scope.cancel();\n                        })\n                    }\n\n                }]\n            })\n        }\n\n    }])\n\n.controller('sysmodelProp',\n    [\"$scope\", \"$source\", \"$q\", function($scope, $source, $q) {\n\n\n\n        var d = $scope.$$cache[0]\n        try {\n            d.gateway_default = angular.fromJson(d.gateway_default || {});\n        } catch (e) {\n            angular.alert(\"GateWay Default 严重错误!\")\n            console.error(\"  SystemModel  gateway_default 字段 不合法!!\");\n        }\n\n        $scope.sysmodel = d;\n\n        $scope.title = d.name\n\n        // 属性 tabs 配置;\n        $scope.tabs = [{\n            title: \"tab.t16\",\n            icon: \"icon icon-info\",\n            state: \"app.sysmodel_p.basic\"\n        }];\n        $scope.tabs.push({\n            title: \"tab.t12\",\n            icon: \"icon icon-wrench\",\n            state: \"app.sysmodel_p.sysprofile\"\n        });\n\n        if ($scope.sysmodel.mode == 1) {\n            $scope.tabs.push({\n                title: \"tab.t10\",\n                icon: \"icon icon-screen-desktop\",\n                state: \"app.sysmodel_p.sysdevice\"\n            })\n        }\n\n        $scope.tabs = $scope.tabs.concat([{\n                title: \"tab.t11\",\n                icon: \"icon icon-tag\",\n                state: \"app.sysmodel_p.systag\"\n            },\n\n            {\n                title: \"tab.t13\",\n                icon: \"icon icon-rocket\",\n                state: \"app.sysmodel_p.trigger\"\n            },\n            /*\n             {\n                 title: \"tab.t14\",\n                 icon: \"icon icon-flag\",\n                 state: \"app.sysmodel_p.message\"\n             }\n             */\n\n        ]);\n\n        if ($scope.user.viewPanel) {\n\n            $scope.tabs.push({\n                title: \"信息板\",\n                icon: \"icon icon-flag\",\n                state: \"app.sysmodel_p.panel\"\n            })\n        }\n\n\n        if ($scope.sysmodel.mode == 1 && $scope.sysmodel.comm_type == 2) {\n            $scope.tabs.push({\n                title: \"tab.t15\",\n                icon: \"glyphicon glyphicon-random\",\n                state: \"app.sysmodel_p.gateway\"\n            });\n        }\n\n        // tags , triggers,  message 对应的 prifile ;\n        $scope.odp = {};\n\n        $scope.loadProfilePromise = $source.$sysProfile.get({\n            system_model: $scope.sysmodel.uuid\n        }).$promise;\n\n        $scope.loadProfilePromise.then(function(resp) {\n            $scope.profiles = resp.ret,\n                $scope.hasProfile = !!resp.ret.length;\n\n\n            $scope.odp.puuid = resp.ret[0] && resp.ret[0].uuid;\n        })\n\n        // 得到 sys model 点数; \n\n\n        // 控控制 tag , 触发器, 通知  在 systemodel ,\n        $scope.isModelState = true;\n\n\n        var loadSystemDevicePromise;\n        $scope.loadSysDev = function() {\n\n            if (!loadSystemDevicePromise) {\n                loadSystemDevicePromise = $source.$sysDevice.get({\n                    system_model: $scope.sysmodel.uuid\n                }).$promise;\n                loadSystemDevicePromise.then(function(resp) {\n                    $scope.sysdevices = resp.ret;\n                });\n            }\n\n\n            return loadSystemDevicePromise;\n        }\n\n\n\n        var loadAllDeviceModelsPromise;\n        $scope.loadDevModels = function() {\n            if (!loadAllDeviceModelsPromise) {\n                loadAllDeviceModelsPromise = $source.$deviceModel.get().$promise;\n                loadAllDeviceModelsPromise.then(function(resp) {\n                    $scope.devmodels = resp.ret;\n                });\n            }\n            return loadAllDeviceModelsPromise;\n\n        }\n\n\n    }]\n)\n\n.controller(\"sysmodel_basic\", [\"$scope\", \"$source\", \"$state\", function($scope, $source, $state) {\n\n\n    $scope.$popNav($scope.sysmodel.name + \"(信息)\", $state);\n\n}])\n\n.controller(\"sysmodel_profile\",\n    [\"$scope\", \"$source\", \"$modal\", \"$filter\", \"$state\", function($scope, $source, $modal, $filter, $state) {\n        $scope.$popNav($scope.sysmodel.name + \"(Profile)\", $state);\n        var sysmodel = $scope.sysmodel,\n            t = $scope;\n\n        $scope.addSysProfile = function() {\n            $modal.open({\n                templateUrl: \"athena/sysmodel/add_sysprofile.html\",\n                controller: [\"$scope\", \"$modalInstance\", function($scope, $modalInstance) {\n                    $scope.$modalInstance = $modalInstance,\n                        $scope.__proto__ = t,\n                        $scope.P = {},\n                        $scope.isAdd = true;\n\n                    $scope.done = function() {\n                        // 验证表格;\n                        $scope.validForm();\n                        $scope.P.system_model = sysmodel.uuid;\n\n                        $source.$sysProfile.save($scope.P, function(resp) {\n                            $scope.P.uuid = resp.ret;\n                            //$scope.p.create_time = $filter(\"date\")( new Date() , '2015-07-07T00:33:54.000Z' )  ;\n                            // $scope.p.create_time =  $filter(\"date\")( new Date() , 'yyyy-MM-07T00:33:54.000Z' )  ;\n                            $scope.profiles.push($scope.P);\n                            $scope.__proto__.$parent.hasProfile = true;\n                            $scope.cancel();\n                        })\n                    }\n                }]\n            })\n        }\n\n\n\n        $scope.updateSysProfile = function(idobj) {\n            return $source.$sysProfile.put(idobj).$promise;\n        }\n\n        $scope.deleteSysProfile = function(s, i, p) {\n            $scope.confirmInvoke({\n                title: \"删除配置项: \" + p.name,\n                warn: \"确认要删除该配置项吗?\"\n            }, function(n) {\n                $source.$sysProfile.delete({\n                    uuid: p.uuid\n                }, function() {\n                    $scope.profiles.splice(i, 1);\n\n                    if ($scope.odp.puuid == p.uuid) {\n                        $scope.odp.puuid = $scope.profiles[0] && $scope.profiles[0].uuid;\n                    }\n\n                    $scope.$parent.hasProfile = !!$scope.profiles.length;\n                    n();\n\n                }, n)\n            })\n        }\n    }]\n)\n\n\n.controller(\"sysmodel_device\",\n    [\"$scope\", \"$sessionStorage\", \"$source\", \"$modal\", \"$sys\", \"$state\", function($scope, $sessionStorage, $source, $modal, $sys, $state) {\n\n\n        console.log(\"sysmodel_device\")\n\n\n        var sysmodel = $scope.sysmodel;\n\n        // 是否为 gateway 模式; \n        $scope.isG = sysmodel.comm_type == 2;\n        var t = $scope;\n\n\n        // 得到suoyou sysmode 下的 sysDevice ;\n        $scope.showMask = true;\n        $scope.loadSysDev().then(function(resp) {\n        });\n\n        // 转换 devModel 为 kv 格式; 回显 sysdevice 因用的那个devicemodel;\n        $scope.devModelKV = {}; // 用来列出 设备模版 下拉表;\n\n        $scope.loadDevModels().then(function() {\n            $scope.showMask = false;\n            $.each($scope.devmodels, function(i, v, t) {\n                $scope.devModelKV[v.uuid] = v;\n            });\n        }, function() {\n            $scope.showMask = false;\n        });\n\n        $scope.addOrEditDevice = function(devices, index, dev) {\n            $modal.open({\n                templateUrl: \"athena/sysmodel/add_sysdevice.html\",\n                resolve: {\n                    data: function() {\n                        return $scope.loadDevModels();\n                    }\n                },\n                controller: [\"$scope\", \"$modalInstance\", \"data\", function($scope, $modalInstance, data) {\n\n                    $scope.$modalInstance = $modalInstance;\n\n                    $scope.__proto__ = t,\n                        $scope.isAdd = !dev,\n                        $scope.devModels = $scope.devmodels;\n\n                    // gateway 网络参数 过滤;  bool 是否初始化 params 值;\n                    $scope.filterChannel = function(type, bool) {\n\n                        $scope._$channel = t.sysmodel.gateway_default[type];\n                        if (bool) {\n                            var d;\n                            if (type == \"ETHERNET\") {\n                                d = \"LAN_1\";\n                            } else {\n                                if ($scope._$channel) {\n                                    d = Object.keys($scope._$channel)[0];\n                                } else {\n                                    d = null;\n                                }\n                            }\n                            $scope.D.network.params = {\n                                channel: d\n                            };\n                        }\n                    }\n\n\n                    if ($scope.isAdd) { // 新建;\n\n                        $scope.devModel = $scope.devModelKV[Object.keys($scope.devModelKV)[0]];\n\n                        if (!$scope.devModel) {\n                            $scope.alert({\n                                type: \"info\",\n                                title: \"请先创建设备模型!\"\n                            })\n                            throw (\"_Error: No Device Model !\");\n\n                        }\n\n                        // 初始化D;\n                        $scope.D = angular.extend({\n                                device_model: $scope.devModel.uuid\n                            },\n                            $sys.device.entity,\n                            angular.copy($sys.device[$scope.devModel.driver_id].entity)\n                        );\n\n                        // 托管; gateway模式;\n                        if ($scope.sysmodel.mode == 1 && $scope.sysmodel.comm_type == 2) {\n                            $scope.D.network = {\n                                type: \"RS232\"\n                            };\n                        }\n\n                    } else {\n                        dev.network = angular.fromJson(dev.network || {});\n                        dev.params = angular.fromJson(dev.params || {});\n\n                        $scope.D = angular.copy(dev);\n                        $scope.devModel = $scope.devModelKV[$scope.D.device_model];\n\n                    }\n\n                    // 缓存 操作; 的配置;\n                    var cache = {};\n                    $scope.$watch(\"D.device_model\", function(n, o) {\n\n                        var a, b;\n                        a = $scope.devModelKV[n].driver_id;\n                        b = $scope.devModelKV[o].driver_id;\n                        if (a != b) {\n                            // 缓存驱动 params ;\n                            //cache[a] =  angular.copy( $scope.D.params );\n\n                            // 驱动参数赋值;\n                            angular.extend($scope.D, $sys.device[a].entity);\n                            $scope.devModel = $scope.devModelKV[n];\n                        }\n\n                    })\n\n\n\n                    // 添加 sysmodel device ;\n                    $scope.done = function(btn) {\n                        // 验证表格;\n                        $scope.validForm();\n\n                        // 不是 gateway 删除 gatetway 字段;\n                        if (!$scope.isG) {\n                            delete $scope.D.network;\n                        }\n\n                        var d = angular.copy($scope.D);\n\n                        d.system_model = $scope.sysmodel.uuid,\n                            d.params = angular.toJson(d.params),\n                            d.network = angular.toJson(d.network);\n\n                        if ($scope.isAdd) {\n                            $source.$sysDevice.save(d, function(resp) {\n\n                                d.id = resp.ret;\n                                $scope.sysdevices.push(d);\n                                $scope.cancel();\n\n                            })\n\n                        } else {\n                            $source.$sysDevice.put(d, function(resp) {\n\n                                devices[index] = d;\n                                $scope.cancel();\n\n                            })\n                        };\n                    };\n                }]\n            })\n        }\n\n        $scope.deleteSysD = function(scope, index, sysd) {\n            $scope.confirmInvoke({\n                title: \"删除系统设备: \" + sysd.name,\n                note: \"确认要删除该设备吗?\"\n            }, function(next) {\n                $source.$sysDevice.delete({\n                    system_model: sysmodel.uuid,\n                    id: sysd.id\n                }, function() {\n                    $scope.sysdevices.splice(index, 1);\n                    next();\n                }, next)\n            })\n        }\n\n\n    }]\n)\n\n\n.controller(\"sysmodel_tag\", [\"$scope\", \"$source\", \"$modal\", \"$q\", \"$utils\", \"$sys\", \"$state\", \"$timeout\", \"$q\", function($scope, $source, $modal, $q, $utils, $sys, $state, $timeout, $q) {\n    $scope.$popNav($scope.sysmodel.name + \"(Tags)\", $state);\n\n\n\n\n\n    var sysmodel = $scope.sysmodel, // $scope.$$cache[0],\n        t = $scope;\n    t.isManageMode = sysmodel.mode == $sys.manageMode;\n\n    // 拆分 connect 字段;\n    // connect 回显 ;  device id ( 整合成 kv形式)--> 得到 demodel( ) --> 再去加载point数据;\n    var cc;\n    $scope.splictC = function(tag, $last) {\n        cc = tag.connect.split('.');\n        tag.dev_id = cc[0],\n            tag.point_id = cc[0];\n    };\n\n\n\n    var dev_id, dev_ref;\n    $scope.getDevName = function(tag, scope) {\n        if (!tag.connect) return;\n\n        dev_id = tag.connect.replace(/(\\d+).(\\d+)/, \"$1\");\n\n        dev_ref = $scope.devicesKV[dev_id],\n            // 是否真的连接了设备, dev_name 来判断;\n            scope.dev_name = dev_ref && dev_ref.name;\n\n        // 不连接设备时 ,  Type 忽略显示;\n        //tag.type = scope.dev_name ? tag.type : null;\n\n\n\n    }\n\n\n\n\n    // 组织 device 的kv 形式;\n    $scope.loadSysDev().then(function() {\n        //  // 加载 sys device ;  放到下面发昂只 deivice 增删时, devKV 跟着改变;\n        $scope.devicesKV = {};\n        $scope.sysdevices.forEach(function(v, i) {\n            $scope.devicesKV[v.id] = v;\n        });\n    })\n\n\n    // $scope.prof_uuid = 111\n    // profile ng-chage ;   tag 比较特殊 没profile 也可以创建;\n    //\n\n    $scope.showMask = true;\n    $scope.loadSysTag = function(prof_uuid) {\n        // { profile_id: $scope.profile }\n        if (prof_uuid) {\n            // 有profile时 ; 去检索是否连接了设备;\n            var promise_tag = $source.$sysLogTag.get({\n                profile: prof_uuid\n            }).$promise;\n            $q.all([promise_tag, $scope.loadSysDev()]).then(function(resp) {\n                    $scope.systags = resp[0].ret;\n\n                    $scope.showMask = false;\n                }\n                //If any of the promises is resolved with a rejection,\n                // this resulting promise will be rejected with the same rejection value.\n                ,\n                function() {\n                    $scope.showMask = false;\n                }\n            )\n        } else {\n            // query ; 无profile时 ;  跟定不连接  设备;\n            $source.$sysTag.get({\n                system_model: sysmodel.uuid\n            }, function(argument) {\n                $scope.systags = argument.ret;\n\n                $scope.showMask = false;\n            }, function() {\n                $scope.showMask = false;\n            })\n        }\n    }\n\n    // 加载 点;\n    $scope.loadProfilePromise.then(function() {\n        $scope.loadSysTag($scope.odp.puuid);\n    });\n\n    //  manage 模式时 ,  tag 的编辑, 新建; 增加 dev , devModelPoint 联动;\n    function ApplyDevPoint(scope) {\n        var oldDevModel;\n\n        scope.op = {};\n\n        //zai 父scope中添加 sysdevices ;\n        var promise = $scope.loadSysDev();\n\n\n        // bool 是否去初始化point ;\n        scope.loadPoint = function(dev ) {\n            if (!dev) return;\n            if (dev.device_model == oldDevModel) return;\n\n            scope.showMask = true;\n            oldDevModel = dev.device_model;\n            var promise;\n            promise = $source.$dmPoint.get({\n                device_model: oldDevModel\n            }).$promise;\n\n            promise.then(function(resp) {\n                scope.points = resp.ret;\n                //if ( scope.isAdd ) {\n                    var p = resp.ret[0];\n                    scope.op.point = p && ( p.id + \"&\" + p.name )    ;\n                    scope.isAdd && (  scope.T.name = p && p.name );\n                // }\n                scope.showMask = false;\n            }, function() {\n                scope.showMask = false;\n            })\n            return promise;\n        };\n\n        // 拼接  connnet  字段;\n        scope.addConnect = function(tag) {\n            // tag.connect = scope.op.dev.id + \".\" + scope.op.point.id;\n            tag.connect = scope.op.dev.id + \".\" + scope.op.point.replace(/(.+)&(.+)/, '$1');\n\n        };\n\n        return promise;\n    }\n\n\n\n\n    // 创建 点 , 带 log 部分;\n    $scope.addTag = function() {\n\n        if (!$scope.profiles.length) {\n            angular.alert(\"请先创建系统配置!\");\n            // $state.go('app.model.sysprofile');\n            return;\n        }\n\n        $modal.open({\n            templateUrl: \"athena/sysmodel/add_systag.html\",\n            controller: [\"$scope\", \"$modalInstance\", function($scope, $modalInstance) {\n\n                if (t.isManageMode) { // 托管模式;\n                    ApplyDevPoint($scope);\n                }\n\n                $scope.$modalInstance = $modalInstance,\n                $scope.__proto__ = t,\n                $scope.isAdd = true,\n\n                $scope.T = {\n                    type: undefined,\n\n                },\n                $scope.L = {\n                    deviation: 0,\n                    scale: 1\n                };\n\n                $scope.$watch(\"L.log_type\" , function( n , o ){\n                    if( n == \"RAW\"){\n                        $scope.L.log_cycle = '300'\n                    }\n                })\n\n                $scope.copyName = function() {\n                    $scope.T.name = $scope.op.point.replace(/(.+)&(.+)/, \"$2\");\n                    // isAdd && ( T.name = op.point.name )\n                }\n\n                $scope.done = function() {\n                    // 验证表格;\n                    $scope.validForm(\"form_tag\"),\n                        $scope.validForm(\"form_log\"),\n\n                        $scope.T.system_model = sysmodel.uuid;\n\n                    $scope.addConnect && $scope.addConnect($scope.T);\n\n                    // 组装 connect 字段 的值;\n                    // 先保存点, 在保存log数据;\n                    $source.$sysTag.save($scope.T, function(resp) {\n\n\n                        function call() {\n                            var d;\n                            if (t.hasProfile) {\n                                d = angular.extend($scope.T, $scope.L);\n                            } else {\n                                d = angular.extend($scope.T, {\n                                    id: resp.ret\n                                })\n                            }\n                            $scope.systags.push(d);\n                            $scope.cancel();\n                        }\n\n\n                        if (t.hasProfile) { // 日志参数;\n                            $scope.L.id = resp.ret,\n                                $scope.L.profile = t.odp.puuid,\n                                // $scope.L.save_log = $scope.L.log_cycle ? 1 : 0;\n                                $source.$sysLogTag.save($scope.L, call);\n                        } else {\n                            call()\n                        }\n                    });\n                };\n            }]\n        });\n    }\n\n    // 编辑点; 不带 log ;\n    $scope.updateTag = function(index, tag, scope) {\n        $modal.open({\n            templateUrl: \"athena/sysmodel/add_systag.html\",\n            controller: [\"$scope\", \"$modalInstance\", function($scope, $modalInstance) {\n                var a, b, c, d, dd, dt;\n\n                $scope.$modalInstance = $modalInstance,\n                    $scope.__proto__ = t,\n                    $scope.T = a = angular.copy(tag);\n                $scope.true_conn = scope.true_conn;\n\n                // dev , point 回显 待定;  conncet 是 id 还是那么;\n\n                if (t.isManageMode) { // 托管模式;\n\n                    // 非托管的无 connect 字段;\n                    d = a.connect.split(\".\"),\n                        dd = d[0],\n                        dt = d[1];\n\n\n\n                    // ApplyDevPoint 会初始化第一个point名字;\n                    ApplyDevPoint($scope).then(function() {\n\n                        $.each($scope.sysdevices, function(i, v) {\n                            if (v.id == dd) {\n                                $scope.op.dev = v;\n                                return false;\n                            }\n                            return true;\n                        });\n\n                        $scope.op.dev && $scope.loadPoint($scope.op.dev).then(function() {\n\n                            $.each($scope.points, function(i, v) {\n                                if (dt == v.id) {\n                                    $scope.op.point = v.id + \"&\" + v.name;\n                                    return false;\n                                }\n                                return true;\n\n                            })\n                        });\n\n                    })\n                }\n\n\n\n                $scope.done = function() {\n                    // 验证表格;\n                    $scope.validForm(\"form_tag\");\n\n                    var d = $utils.copyProp(a, 'system_model', 'id', 'name', 'type', 'desc');\n\n                    $scope.addConnect && $scope.addConnect(d);\n\n                    $source.$sysTag.put(d, function(resp) {\n                        if (t.isManageMode) {\n                            // 连接上了 设备;\n                            scope.$parent.true_conn = true;\n                            scope.$parent.dev_name = $scope.devicesKV[$scope.op.dev.id].name;\n                        }\n\n                        angular.extend(tag, d);\n                        $scope.cancel();\n                    })\n                }\n            }]\n        })\n    }\n\n    $scope.deleteTag = function(index, tag) {\n        $scope.confirmInvoke({\n            title: \"删除模型变量 : \" + tag.name + \" ?\",\n            warn: \"删除变量将会丢失此变量的全部历史数据!\"\n        }, function(next) {\n            $source.$sysTag.delete({\n                system_model: sysmodel.uuid,\n                id: tag.id\n            }, function(resp) {\n                $scope.systags.splice(index, 1);\n                next();\n            }, next)\n        })\n    }\n\n    //==================================================================\n\n    //  编辑 log 部分 ;\n    $scope.editLogPart = function(index, tag) {\n\n        if (!t.hasProfile) {\n            angular.alert(\"请先创建 系统配置!\");\n            $state.go('app.model.sysprofile');\n            return;\n        }\n\n        $modal.open({\n            templateUrl: \"athena/sysmodel/add_log_tag.html\",\n            controller: [\"$scope\", \"$modalInstance\", function($scope, $modalInstance) {\n\n                var a, b, c, d;\n\n                console.log(tag);\n\n                $scope.hasLog = b = tag.profile;\n\n                $scope.$modalInstance = $modalInstance,\n                    $scope.__proto__ = t,\n                    $scope.L = a = angular.copy(tag),\n                    $scope.T = angular.copy(tag);\n\n                // ng-init=\" L.log_cycle = '300' \" \n                if (b) {\n                    $scope.L.log_cycle  =  ( $scope.L.log_cycle +\"\") || \"300\";\n                } else {\n                    $scope.L.log_cycle = '300';\n\n                } \n\n                $scope.done = function() {\n                    $scope.validForm(\"form_log\"),\n                        // $scope.L.save_log = $scope.L.log_cycle ? 1 : 0;\n                        $scope.L.id = tag.id;\n\n                    d = {\n                        id: a.id,\n                        tp_desc: a.tp_desc,\n                        //profile: t.odp.puuid, //profile  read-only\n                        unit: a.unit,\n                        scale: a.scale,\n                        deviation: a.deviation,\n                        save_log: a.save_log,\n                        log_cycle: a.log_cycle,\n                        log_type: a.log_type\n                    };\n\n                    // 更新;\n                    if (b) {\n                        d.profile = a.profile;\n                        $source.$sysLogTag.put(d, function() {\n                            angular.extend(tag, d);\n                        })\n                    } else { // 新建 log ;\n                        d.profile = t.odp.puuid;\n                        $source.$sysLogTag.save(d, function() {\n                            angular.extend(tag, d);\n                        })\n                    }\n                    $scope.cancel();\n                }\n            }]\n        });\n    }\n\n\n\n\n\n}])\n\n\n\n.controller(\"sysmodel_prof_trigger\",\n    [\"$scope\", \"$source\", \"$modal\", \"$state\", \"$q\", \"$sys\", \"$utils\", function($scope, $source, $modal, $state, $q, $sys, $utils) {\n\n        $scope.$popNav($scope.sysmodel.name + \"(触发器)\", $state);\n\n        var sysmodel = $scope.sysmodel,\n            S = $scope;\n        // tags_nv,\n        // tags_arr;\n\n        $scope.byte = 32; // 32 位 报警;\n\n\n        // 加载 Tag 数据; ;\n\n        var loadTagPromise = $source.$sysTag.get({\n            system_model: sysmodel.uuid\n        }).$promise;\n\n        loadTagPromise.then(function(resp) {\n            $scope.tags_arr = resp.ret;\n            $scope.tags_nv = {};\n            $scope.tags_arr.forEach(function(v, i, ar) {\n                $scope.tags_nv[v.name] = v;\n            });\n        })\n\n        function condition_parmas_tojson(x) {\n            x.conditions = angular.fromJson(x.conditions);\n            x.params = angular.fromJson(x.params);\n        }\n\n\n        $scope.page = {};\n        // 加载triger ;\n        // var lose_tag = { 'background-color':'grey' };\n        $scope.loadPageData = function(pageNo) {\n            var prof_id = $scope.odp.puuid;\n            if (!prof_id) return;\n            var d = {\n                profile: prof_id\n            };\n            d.currentPage = pageNo,\n                d.itemsPerPage = $sys.itemsPerPage;\n\n            $scope.showMask = true;\n\n            $q.all([\n                $source.$sysProfTrigger.get(d).$promise,\n                loadTagPromise\n            ]).then(function(resp) {\n                var p = resp[0];\n                p.data.forEach(function(t) {\n\n\n                    condition_parmas_tojson(t);\n                    // 检查tag是否存在;\n\n                    angular.isArray(t.conditions) && t.conditions.forEach(function(v) {\n                        var left = v.exp.left,\n                            right = v.exp.right;\n                        if (left.fn == \"PV\" && !$scope.tags_nv[left.args]) {\n                            left.args = null;\n                            // t.lose_tag = lose_tag ;\n\n                        }\n                        if (right.fn == \"PV\" && !$scope.tags_nv[right.args]) {\n                            right.args = null;\n                            // t.lose_tag = true ;\n                        }\n\n                    })\n                })\n\n                $scope.page.data = p.data,\n                    $scope.page.currentPage = pageNo,\n                    $scope.page.total = p.total;\n\n                $scope.showMask = false;\n            }, function() {\n                $scope.showMask = false;\n            })\n        }\n\n\n        $scope.loadProfilePromise.then(function() {\n            $scope.loadPageData(1);\n        });\n\n\n\n        $scope.deleteTrigger = function(i, t) {\n            $scope.confirmInvoke({\n                title: \"删除触发器: \" + t.name,\n                warn: \"确认要删除该触发器吗?\"\n            }, function(n) {\n                $source.$sysProfTrigger.delete({\n                    profile: t.profile,\n                    id: t.id\n                }, function(resp) {\n                    $scope.page.data.splice(i, 1);\n                    n();\n                }, n)\n            })\n        }\n\n        // 创建 , 编辑 触发器;\n        $scope.c_u_Trigger = function(add_OR_i, trigger) {\n            if (!$scope.profiles.length) {\n                angular.alert(\"请先创建 系统配置!\");\n                $state.go('app.model.sysprofile');\n                return;\n            }\n\n            $modal.open({\n                templateUrl: \"athena/sysmodel/add_proftrigger.html\",\n                //                jjw\n                size: \"lg\",\n                controller: [\"$scope\", \"$modalInstance\", \"$source\", \"$sys\", \"$webWorker\", function($scope, $modalInstance, $source, $sys, $webWorker) {\n                    var a, b, c, i;\n                    $scope.isAdd = i = add_OR_i == 'create',\n                        $scope.__proto__ = S,\n                        $scope.$modalInstance = $modalInstance;\n\n                    if (i) { // 创建;\n                        $scope.T = a = {\n                            profile: S.odp.puuid,\n                            conditions: [angular.copy($sys.trigger_c)],\n                            params: {}\n                        };\n                    } else {\n                        $scope.T = a = angular.copy(trigger);\n                    }\n\n                    $scope.done = function() {\n                        var x = angular.copy($scope.T),\n                            l,\n                            r,\n                            tags = {};\n\n                        // 收集 tags ;\n                        angular.forEach(x.conditions, function(v, k) {\n                            l = v.exp.left,\n                                r = v.exp.right;\n\n                            if (l.fn == \"PV\") {\n                                tags[l.args] = true;\n                            }\n                            if (r.fn == \"PV\") {\n                                tags[r.args] = true;\n                            }\n\n                        });\n\n                        x.conditions = angular.toJson(x.conditions),\n                            x.params.tags = Object.keys(tags),\n                            x.params = angular.toJson(x.params);\n\n\n\n                        if (i) { // 新建;\n                            $source.$sysProfTrigger.save(x, function(resp) {\n                                condition_parmas_tojson(x);\n\n                                x.id = resp.ret;\n                                $scope.page.data.unshift(x);\n                                $scope.cancel();\n                            })\n                        } else { // 更新;\n                            $source.$sysProfTrigger.put(x, function(resp) {\n                                condition_parmas_tojson(x);\n\n                                $scope.page.data[add_OR_i] = x;\n                                $scope.cancel();\n                            })\n                        }\n                    }\n\n                    $scope.appendVerb = function() {\n                        var verb = a.conditions.length ? $sys.trigger.verb_default : null;\n                        a.conditions.push(angular.extend({\n                            verb: verb\n                        }, angular.copy($sys.trigger_c)));\n                    }\n\n                    $scope.delVerb = function(index) {\n                        a.conditions.splice(index, 1);\n                        if (0 == index)\n                            a.conditions[0].verb = null;\n                    }\n\n                }]\n            })\n        }\n\n        // 显示 触发器的 condition ;\n        $scope.conditions = $utils.triggerConditions;\n\n\n        // prof alarm  params  为报警时! 验证十六进制 数;\n        var regex = /^[0-9a-fA-F]$/;\n        $scope.cc = function($scope) {\n            //位 报警时 才验证;\n            if (!$scope.T.params) return;\n            var byte = $scope.byte, // 位数;\n                s = $scope.T.params,\n                l = s.length,\n                n = byte / 4;\n            if (l > n) {\n                $scope.T.params = s.substring(0, n).toUpperCase();\n                return;\n            }\n            //验证字符合法;\n            var char = s.charAt(l - 1);\n            if (!regex.test(char)) {\n                $scope.T.params = s.substring(0, l - 1).toUpperCase();\n            } else {\n                $scope.T.params = s.toUpperCase();\n            }\n        }\n\n\n\n\n    }]\n)\n\n\n.controller('sysmodel_message',\n    [\"$scope\", \"$source\", \"$modal\", \"$sys\", \"$state\", function($scope, $source, $modal, $sys, $state) { // $source\n        $scope.$popNav($scope.sysmodel.name + \"(通知)\", $state);\n\n        var sysmodel = $scope.sysmodel,\n            S = $scope,\n\n            prof_triger = {}; // profile - trigger 缓存;\n\n\n\n        $scope.loadMessages = function(prof_uuid) {\n            if (!prof_uuid) return;\n            $source.$message.get({\n                profile_id: prof_uuid\n            }, function(resp) {\n                $scope.messages = resp.ret;\n            })\n        }\n\n        // 加载 profile 下的 message ;\n        // $scope.odp = {};\n\n        $scope.loadProfilePromise.then(function() {\n            // $scope.odp.puuid = $scope.odp.puuid || $scope.profiles[0] && $scope.profiles[0].uuid;\n            $scope.loadMessages($scope.odp.puuid);\n        });\n\n\n\n        // crate or  update ;\n        $scope.createMessage = function(index, message) {\n            //无配置项 不能创建;\n            if (!$scope.profiles.length) {\n                angular.alert(\"请先创建 系统配置!\");\n                // $state.go('app.model.sysprofile');\n                return;\n            }\n            // 无触发器 不能创建;\n            $modal.open({\n                templateUrl: \"athena/sysmodel/add_message.html\",\n                resolve: {},\n                controller: [\"$scope\", \"$modalInstance\", \"$sys\", function($scope, $modalInstance, $sys) {\n                    $scope.__proto__ = S,\n                        $scope.$modalInstance = $modalInstance,\n                        $scope.M = angular.copy(message || $sys.message.entity),\n                        $scope.isAdd = !(index || index == 0);\n\n                    $scope.op = {};\n\n                    var puuid = $scope.odp.puuid,\n\n                        triggers = prof_triger[puuid];\n\n\n                    // 加载trigger ;\n                    if (triggers) {\n                        $scope.triggers = triggers;\n                        cc();\n\n                    } else {\n                        $source.$sysProfTrigger.get({\n                            profile: puuid\n                        }, function(resp) {\n                            var d = resp.ret;\n                            prof_triger[puuid] = d;\n                            $scope.triggers = d;\n                            cc();\n                        })\n                    }\n\n                    function cc() {\n                        if ($scope.isAdd)\n                            $scope.M.trigger_id = $scope.triggers[0] && $scope.triggers[0].id\n                    }\n\n                    $scope.done = function() {\n                        $scope.validForm();\n\n\n                        if ($scope.isAdd) {\n                            $scope.M.profile = puuid;\n                            $source.$message.save($scope.M, function(resp) {\n                                $scope.M.message_id = resp.ret;\n                                $scope.messages.push($scope.M);\n                                $scope.cancel();\n                            })\n                        } else {\n                            $source.$message.put($scope.M, function() {\n                                $scope.messages[index] = $scope.M;\n                                $scope.cancel();\n                            })\n                        }\n                    }\n                }]\n            })\n        }\n\n        $scope.deleteMessage = function(index, message) {\n\n            $scope.confirmInvoke({\n                title: \"删除通知 \" + message.name,\n                note: \"确认要删除通知吗?\"\n            }, function(next) {\n\n                $source.$message.delete({\n                    profile_id: message.profile,\n                    message_id: message.message_id\n                }, function() {\n                    $scope.messages.splice(index, 1);\n                    next();\n                }, next)\n            })\n        }\n\n    }]\n)\n\n\n.controller('sysmodel_panel',\n    [\"$scope\", \"$source\", \"$modal\", \"$sys\", \"$state\", \"$http\", \"$filter\", function($scope, $source, $modal, $sys, $state, $http, $filter) {\n        var _this = $scope;\n        $scope.project = {\n            name: null,\n            description: null,\n            createTime: null,\n            modifyTime: null,\n            systemModelUuid: null,\n            accountId: null\n        }\n\n        $scope.initPanel = function() {\n            var searchProjectBySystemModelUuidUrl = \"/v5/json/syalias/project.search?smid=\" + $scope.sysmodel.uuid;\n\n\n            $http.get(searchProjectBySystemModelUuidUrl).\n            success(function(data, status, headers, config) {\n                if (data.err) {\n                    console.log('Search Project Error');\n                    return;\n                } else {\n                    _this.project = data.ret[0];\n                    return;\n                }\n            }).\n            error(function(data, status, headers, config) {\n                console.log(data);\n            });\n        }\n\n        $scope.initPanel()\n\n        $scope.createProject = function() {\n\n            $modal.open({\n                templateUrl: \"athena/sysmodel/add_syspanel.html\",\n                size: \"lg\",\n                controller: [\"$scope\", \"$modalInstance\", \"$source\", \"$sys\", \"$webWorker\", \"$http\", function($scope, $modalInstance, $source, $sys, $webWorker, $http) {\n                    $scope.project = {\n                        name: null,\n                        description: null,\n                        createTime: null,\n                        modifyTime: null,\n                        systemModelUuid: null,\n                        accountId: null\n                    }\n\n                    $scope.done = function(evt) {\n                        // 检查项目名是否已经填写，如果没有填写，默认不给创建项目\n                        $scope.validForm()\n                            // 如果检查项目名已经填写，为创建的项目补全其他信息 createTime，modifyTime\n                        var currTime = new Date().getTime();\n                        $scope.project.createTime = currTime;\n                        $scope.project.modifyTime = currTime;\n                        $scope.project.systemModelUuid = $scope.sysmodel.uuid;\n                        $scope.project.accountId = $scope.user.account_id;\n                        console.log($scope.project)\n                            /*\n                                  补充完整数据以后,首先查询当前的 systemModel 下是否已经创建过\n                                   project，如果创建过，则提示用户不能创建，并且显示已经创建好的项目\n                                  如果没有创建过项目，则新建项目\n                            */\n                        var searchProjectBySystemModelUuidUrl = \"/v5/json/syalias/project.search?smid=\" + $scope.project.systemModelUuid;\n                        var createProjectUrl = \"/v5/json/syalias/project.create\";\n                        $http.get(searchProjectBySystemModelUuidUrl).\n                        success(function(data, status, headers, config) {\n                            if (data.err) {\n                                console.log('Search Project Error');\n                                return;\n                            } else {\n                                if (data.ret) {\n                                    _this.project = data.ret;\n                                    angular.alert({\n                                        title: \"本模板已经存在视图，不能再次创建\"\n                                    })\n                                    $scope.cancel();\n                                    return;\n                                } else {\n                                    $http.put(createProjectUrl, $scope.project).\n                                    success(function(data, status, headers, config) {\n                                        if (!data.err) {\n                                            console.log(\"项目创建成功\");\n                                            _this.initPanel();\n                                            $scope.cancel();\n                                        } else {\n                                            console.log(\"项目创建失败 1\");\n                                            console.log(data.err);\n                                        }\n                                    }).\n                                    error(function(data, status, headers, config) {\n                                        console.log(\"项目创建失败 2\");\n                                    });\n                                }\n                            }\n                        }).\n                        error(function(data, status, headers, config) {\n                            console.log(data);\n                        });\n\n                    }\n                    $scope.$modalInstance = $modalInstance;\n                    $scope.__proto__ = _this;\n                }]\n            })\n\n        }\n\n        $scope.modifyProjectMessage = function() {\n\n            $modal.open({\n                templateUrl: \"athena/sysmodel/add_syspanel.html\",\n                size: \"lg\",\n                controller: [\"$scope\", \"$modalInstance\", \"$source\", \"$sys\", \"$webWorker\", \"$http\", function($scope, $modalInstance, $source, $sys, $webWorker, $http) {\n                    $scope.project = angular.copy(_this.project);\n\n                    $scope.done = function(evt) {\n                        // 用户修改项目名称，或者修改描述时，获取用户输入信息，并且自动补全修改时间\n                        var modifyData = {\n                            name: $scope.project.name,\n                            description: $scope.project.description,\n                            modifyTime: new Date().getTime(),\n                            systemModelUuid: $scope.project.systemModelUuid\n                        }\n                        var updateProjectUrl = \"/v5/json/syalias/project.update\";\n                        $http.put(updateProjectUrl, modifyData).\n                        success(function(data, status, headers, config) {\n                            if (!data.err) {\n                                console.log(\"项目修改成功\");\n                                _this.project.name = $scope.project.name;\n                                _this.project.description = $scope.project.description;\n                                _this.project.modifyTime = $scope.project.modifyTime;\n                                $scope.cancel();\n                            } else {\n                                console.log(\"项目修改失败 1\");\n                                console.log(data.err);\n                            }\n                        }).\n                        error(function(data, status, headers, config) {\n                            console.log(\"项目修改失败 2\");\n                        });\n                        $scope.cancel();\n                    }\n                    $scope.$modalInstance = $modalInstance;\n                    $scope.__proto__ = _this;\n                }]\n            })\n\n        }\n\n        $scope.deleteProject = function() {\n\n            $scope.confirmInvoke({\n                    title: \"删除信息板\",\n                    note: \"确认要删除该信息板吗?\"\n                },\n                function(next) {\n                    var delProjectUrl = \"/v5/json/syalias/project.del\";\n                    var delData = {\n                        systemModelUuid: $scope.project.systemModelUuid\n                    }\n                    $http.put(delProjectUrl, delData).\n                    success(function(data, status, headers, config) {\n                        if (!data.err) {\n                            $scope.project = {\n                                name: null,\n                                description: null,\n                                createTime: null,\n                                modifyTime: null,\n                                systemModelUuid: null,\n                                accountId: null\n                            }\n                            $scope.initPanel()\n                            next();\n                        } else {\n                            console.log(\"项目修改失败 1\");\n                            console.log(data.err);\n                        }\n                    }).\n                    error(function(data, status, headers, config) {\n                        console.log(\"项目修改失败 2\");\n                    });\n\n                }\n            )\n        }\n\n        $scope.openDyaliasSystem = function() {\n            // 获取 ack 和 system model uuid ， 然后跳转到 dyalias\n            $source.$user.get({\n                op: 'getack'\n            }, function(data) {\n\n                var ack = data.ret;\n                var name = $scope.sysmodel.name;\n                var uuid = $scope.project.uuid;\n                var url = \"/syalias/trunk/dyalias.html?ack=\" + ack + \"&uuid=\" + uuid + \"&systemModelName=\" + name;\n\n                window.open(url);\n            })\n\n        }\n\n\n\n    }]\n)\n\n\n.controller('sysmodel_gateway',\n    [\"$scope\", \"$modal\", \"$source\", \"$state\", function($scope, $modal, $source, $state) { // $source   $source.$sysModel\n\n        console.log(\"sysmodel_gateway\")\n\n\n        $scope.$popNav($scope.sysmodel.name + \"(网关)\", $state);\n\n        var g = {\n                distance: 100,\n                baud_rate: 1200\n            },\n            S = $scope;\n\n\n        S.GateWay = angular.copy($scope.sysmodel.gateway_default || {});;\n\n\n\n        S.needUpdate = false,\n            S.enbaleGPS = !!S.GateWay.GPS,\n            S.canAddPort = 0;\n\n        // 监视 还能否添加串口;\n        S.$watch('GateWay', function(n, o) {\n            var n = 0;\n            angular.forEach(S.GateWay, function(v, i, t) {\n                i != 'GPS' && (S.canAddPort = n++ == 7)\n            })\n        }, true)\n\n\n\n        S.gpsChange = function() {\n            S.enbaleGPS ? (\n                S.GateWay.GPS = g\n            ) : (\n                g = S.GateWay.GPS,\n                delete S.GateWay.GPS\n            )\n            S.needUpdate = true;\n        }\n\n        // geteway  串口类型 ;\n        var types = S.$sys.gateway.types;\n\n        S.c_u_Gateway = function(T, t, data) {\n            $modal.open({\n                templateUrl: \"athena/sysmodel/add_gateway.html\",\n                controller: [\"$scope\", \"$modalInstance\", function($scope, $modalInstance) {\n\n                    $scope.__proto__ = S,\n                        $scope.$modalInstance = $modalInstance,\n\n                        $scope.isAdd = !data,\n                        // 串口 名称; key\n                        $scope.G = {\n                            t: t\n                        },\n                        // 串口数据 ; value ;\n                        $scope.D = angular.copy(data || S.$sys.gateway.entity),\n\n                        $scope.filterType = function() {\n                            if (!$scope.isAdd) return;\n\n                            var obj = {};\n                            // { k:v , .. } k 小类 , v 大类  ;\n                            angular.forEach(types, function(v, k, t) {\n                                if (!(S.GateWay[v] && S.GateWay[v][k])) {\n                                    obj[k] = v;\n                                }\n                            });\n                            $scope.G.t = Object.keys(obj)[0];\n\n                            $scope._$types = obj;\n                        }\n                    $scope.done = function() {\n                        $scope.validForm();\n                        t = t || $scope.G.t,\n                            T = T || $scope._$types[t];\n\n                        ($scope.GateWay[T] || ($scope.GateWay[T] = {}))[t] = $scope.D\n                        S.needUpdate = true;\n                        $scope.cancel();\n                    }\n                }]\n            })\n        }\n\n        S.cc = function() {\n            S.needUpdate = true;\n        }\n\n        S.deleteGateway = function(T, t, data) {\n            $scope.confirmInvoke({\n                title: \"删除串口: \" + t,\n                note: \"确认要删除该串口吗?\"\n            }, function(next) {\n                delete S.GateWay[T][t];\n                //S.sysmodel.gateway_default = S.GateWay ;\n                S.needUpdate = true;\n                next();\n            })\n        }\n\n        S.saveGateWay = function() {\n            $source.$sysModel.put({\n                uuid: S.sysmodel.uuid,\n                gateway_default: angular.toJson(S.GateWay)\n            }, function(resp) {\n                S.sysmodel.gateway_default = angular.copy(S.GateWay);\n                S.haveSave = true;\n                S.needUpdate = false;\n            })\n        }\n\n\n\n    }]\n)\n\n\n// 管理-项目-管理; project \n\n\n\nangular.module('app.project', [])\n\n.controller(\"manage_projs\", [\"$scope\", \"$source\", \"$state\", \"$utils\", \"$filter\", \"$timeout\", \"$sys\", \"$localStorage\", \"$modal\", function($scope, $source, $state, $utils,\n\n    $filter, $timeout, $sys, $localStorage, $modal) {\n\n    var thatScope = $scope;\n\n\n    $scope.pop = {\n        templateUrl: \"athena/debris/_edit_field.html\",\n    }\n\n\n\n    //是否为 show 模块;\n    $scope.isShowModul = $state.$current.data && $state.$current.data.isShowModul;\n\n    $scope._$nextState = $scope.isShowModul ? 'app.s_region_system' : 'app.m_region_prop.system';\n\n    // if ($scope.isShowModul) {\n    //     $scope.$moduleNav(\"项目\", $state);\n    // } else {\n    //jjw 区域\n    $scope.$moduleNav('全部区域', $state);\n    // }\n\n\n    var per = $sys.itemsPerPage;\n    $scope.page = {};\n    $scope.loadPageData = function(pageNo) {\n        $scope.showMask = true;\n\n        var d = {\n            itemsPerPage: per,\n            currentPage: pageNo,\n            name: $scope.f_projname\n        };\n\n        var lll = $source.$region.query(d, function(resp) {\n            $scope.showMask = false;\n            $scope.page = resp;\n            $scope.page.currentPage = pageNo;\n\n        }, function() {\n            $scope.showMask = false;\n        });\n\n        console.log(3333333333333333333, lll)\n    };\n\n\n\n\n    var region_ids = [];\n    $scope.collectRegionId = function(region, $last) {\n        region_ids.push(region.id);\n\n        if ($last) {\n            getActiveSum(region_ids);\n            !$scope.isShowModul && getUnActiveSum(region_ids);\n        }\n    }\n\n\n    function getActiveSum(region_ids) {\n        $source.$region.save({\n            pk: \"sum\",\n            state: 1\n        }, region_ids, function(resp) {\n            resp.ret.forEach(function(v, i) {\n                $(\"#act_\" + v.region_id).text(v.count);\n            })\n        })\n    }\n\n\n    function getUnActiveSum(region_ids) {\n        $source.$region.save({\n            pk: \"sum\",\n            state: 0\n        }, region_ids, function(resp) {\n            resp.ret.forEach(function(v, i) {\n                $(\"#unact_\" + v.region_id).text(v.count);\n            })\n        })\n    }\n\n    $scope.loadPageData(1);\n\n\n    /*\n     * 从 fps 中移除, 从 filterP 中移除;   从 allprojects 中移除;\n     * */\n    $scope.delProject = function(proj, index) {\n\n        $scope.confirmInvoke({\n                title: \"删除区域: \" + proj.name,\n                warn: \"确认要删除该区域吗?\"\n            },\n            function(next) {\n                $source.$region.delete({\n                    pk: proj.id\n                }, function(resp) {\n\n                    $scope.page.data.splice(index, 1);\n\n                    next();\n                }, next)\n            }\n        )\n    }\n\n    $scope.addProj = function() {\n        $modal.open({\n            templateUrl: \"athena/region/project_add_temp.html\",\n            controller: [\"$scope\", \"$modalInstance\", function($scope, $modalInstance) {\n                $scope.__proto__ = thatScope;\n                $scope.$modalInstance = $modalInstance;\n                $scope.proj = {};\n\n                $scope.done = function(e) {\n                    console.log(e)\n                    $scope.validForm();\n\n                    $scope.showMask = true;\n                    $source.$region.save($scope.proj, function(resp) {\n                        //resp.ret && $state.go(\"app.proj.manage\");  \n                        $scope.showMask = false;\n                        $scope.proj.id = resp.ret;\n\n                        $scope.page.data.unshift(angular.copy($scope.proj));\n                        $scope.cancel();\n\n                        //  angular.alert(\"添加成功!\");\n                    }, function() {\n                        $scope.showMask = false;\n                    })\n\n\n                }\n            }]\n        })\n\n    }\n\n    $scope.updateRegion = function(fieldObj) {\n\n        return $source.$region.put({\n            pk: fieldObj.id\n        }, fieldObj).$promise;\n    }\n\n}])\n\n\n// -------------------- project 属性  ------------------------------------------\n.controller(\"proj_prop\", [\"$scope\", \"$state\", \"$stateParams\", \"regionResp\", function($scope, $state, $stateParams, regionResp) {\n\n    $scope.$appendNav('项目属性', '_project');\n\n    //是否为 show 模块;\n    $scope.isShowModul = $state.$current.data && $state.$current.data.isShowModul;\n\n    $scope._$mapState = $scope.isShowModul ? 'app.show.system_prop.map' : 'app.station.prop._map';\n    $scope._$stationState = $scope.isShowModul ? \"app.show.system_prop.current\" : \"app.station.prop._basic\";\n\n\n    $scope.project = regionResp.ret;\n\n    // $scope.title = $scope.project.name;\n\n    $stateParams.$backText = $scope.project.name;\n\n\n}])\n\n// ==========================================================================================\n\n//  proj_prop_system ;  使用 dastation_ignore_state 控制器; \n\n\n// 区域 权限用户;  \n.controller(\"proj_prop_author\", [\"$scope\", \"$state\", \"$sys\", \"$source\", \"$translate\", \"$utils\", function($scope, $state, $sys, $source, $translate, $utils) {\n\n\n\n    $state.current.text = $scope.project.name;\n\n\n\n    var textArr = [];\n    $scope.privilge2Text = function(privileges) {\n        textArr = [];\n        privileges && privileges.forEach(function(v, i) {\n            textArr.push($translate.instant(v));\n        })\n        return textArr.join(\";\");\n    }\n \n    $scope.page = {};\n    $scope.loadPageData = function(pageNo) {\n        $source.$region.query({\n            op: \"authoruser\",\n            region_id: $scope.project.id,\n            currentPage: pageNo,\n            itemsPerPage: $sys.itemsPerPage\n        }, function(resp) {\n            $scope.page.data = resp.data;\n            $scope.page.total = resp.total;\n            $scope.page.currentPage = pageNo;\n        })\n    }\n\n    $scope.loadPageData(1);\n    var userIds = [];\n    $scope.getUser = function(u, isLaset) {\n        userIds.push(u.user_id);\n        if (isLaset) {\n            ///users?accesskey={accesskey}[&id={user_id}...]\n            $source.$user.get({\n                op: \"select\",\n                id: userIds\n            }, function( resp ) {\n                resp.ret.forEach( function( v , i ){\n                    console.log(v)\n                    $(\"#user_\"+ v.id ).text( v.username )\n\n                }) \n            })\n        }\n\n        // $source.$user.get({\n        //     pk: u.user_id\n        // }, function(resp) {\n        //     u.username = resp.ret && resp.ret.username;\n        //     u.is_super_user = resp.ret && resp.ret.is_super_user;\n        // })\n\n    }\n\n\n}])\n\n\n// 加载工程 属性字段;\n.controller(\"proj_prop_attr\", [\"$state\", \"$scope\", \"$source\", function($state, $scope, $source) {\n\n\n    $scope.$popNav($scope.project.name + \"(属性)\", $state);\n\n\n    $scope.proj = angular.copy($scope.project);\n\n\n\n    $scope.od = {};\n\n    // 得到 区域的 订阅; \n    function getSubOfRegion(proj_id) {\n\n        $source.$sub.get({\n            op: \"select\",\n            region: proj_id,\n            user: $scope.user.id\n        }, function(resp) {\n            $scope.od.sub_id = resp.ret[0] && resp.ret[0].id;\n            $scope.od.issubed = !!$scope.od.sub_id;\n\n        })\n    }\n\n    getSubOfRegion($scope.proj.id);\n\n    // 编辑区域的订阅; \n    function createSubOfRegion() {\n\n        var d = {\n            filter: {\n                region_id: $scope.proj.id,\n                type: \"alarm\"\n            },\n            sendee: {\n                user_id: $scope.user.id\n            }\n        }\n\n        $source.$sub.save({\n            op: \"create\"\n        }, d, function(resp) {\n            $scope.od.sub_id = resp.ret;\n            $scope.od.issubed = true;\n        })\n\n    }\n\n    function delSubOfRegion() {\n        $source.$sub.get({\n            op: \"delete\",\n            pk: $scope.od.sub_id\n        }, function(resp) {\n            $scope.od.sub_id = undefind;\n        })\n    }\n\n    $scope.editSub = function() {\n        // change 之后的 值,  逻辑正好反转; \n        ($scope.od.issubed ? createSubOfRegion : delSubOfRegion)();\n    }\n\n\n\n    $scope.commit = function() {\n\n        $scope.validForm();\n\n        // delete $scope.project.create_time;\n\n        $source.$region.put({\n            pk: $scope.project.id\n        }, $scope.proj, function(resp) {\n            angular.alert(\"修改成功!\");\n\n            angular.extend($scope.project, $scope.proj);\n        })\n\n\n    };\n\n\n}])\n\n;\n\n /**\n  * show Module\n  *\n  * Description\n  */\n \n\n     angular.module('app.show.proj', [])\n\n     .controller('s_region_system', [\"$scope\", \"$source\", \"$stateParams\", function($scope, $source, $stateParams) {\n\n         $scope.title = $stateParams.name;\n         $scope.project = $stateParams;\n\n\n     }]);\n\n \n \n\n\n    angular.module('app.show.system', [])\n\n\n\n    .controller(\"show_alarm\", [\"$scope\", \"$state\", \"$source\", \"$show\", \"$sys\", \"$q\", \"$filter\", \"$modal\", function($scope, $state, $source, $show, $sys, $q, $filter, $modal) {\n\n        $scope.$moduleNav(\"报警\", $state);\n        var S = $scope;\n\n        $scope.openCalendar = function(e, exp) {\n            e.preventDefault();\n            e.stopPropagation();\n            this.$eval(exp);\n        };\n\n        $scope.page = {};\n\n        // 先加载 regions ;\n        $source.$region.query({\n            currentPage: 1\n        }, function(resp) {\n            $scope.regions = resp.data;\n        })\n\n        // 按需加载  system ;\n        $scope.loadSys = function() {\n            $scope.showMask = true;\n            if (!$scope.od.region_id) {\n                $scope.systems = [];\n                $scope.od.system_id = undefined;\n                return;\n            };\n            $source.$system.query({\n                currentPage: 1,\n                options: \"query\",\n                isactive: 1,\n                region_id: $scope.od.region_id\n            }, function(resp) {\n                $scope.systems = resp.data;\n                $scope.showMask = false;\n\n            }, function() {\n                $scope.showMask = false;\n            })\n        }\n\n        $scope.op = {\n            active: \"a\"  // 活跃报警，  b：全部报警； \n        }; \n \n        var activeAlarmData  = {} , allAlarmDate = {}  ,  _switch  ; \n\n\n        $scope.$watch(\"op.active\", function( n , o ) {\n            //$scope.page.data = [];\n            //$scope.page.total = 0;\n            //$scope.page.currentPage = 0; \n            if( n == 'a'){\n                allAlarmDate =   $scope.page || {} ;\n                $scope.page  =  activeAlarmData;\n\n            }else{\n\n                activeAlarmData = $scope.page  || {} ;\n                $scope.page = allAlarmDate;\n\n            }\n\n\n        })\n\n\n\n        $scope.od = {\n            class_id: null, //0,\n            severity: null, //'0',\n            end: new Date(),\n            start: new Date(new Date() - 86400000),\n            region_id: undefined,\n            system_id: undefined\n        }; \n\n        // // 查询全部报警;\n\n        $scope.loadPageData = function(pageNo) {\n \n\n\n            if (!pageNo) {\n                return;\n            }\n\n            $scope.validForm();\n            var od = angular.copy($scope.od);\n\n            od.desc = !!od.desc ? (\"*\"+ od.desc +\"*\"): null ;\n \n\n            console.log( od )\n            if (!od.start) {\n                angular.alert(\"请输入起始时间\");\n                return;\n            }\n            if (!od.end) {\n                angular.alert(\"请输入结束时间\");\n                return;\n            }\n\n            od.start = od.start.getTime(),\n                od.end = od.end.getTime();\n\n\n\n            if (od.start > od.end) {\n                angular.alert(\"起始时间不可超前与结束时间\");\n                return;\n            }\n\n            od.itemsPerPage = $sys.itemsPerPage;\n            od.currentPage = pageNo;\n\n            // 活跃报警;\n            od.active = $scope.op.active == \"a\" ? \"1\" : undefined;\n\n            od.uuid = \"query\";\n  \n            $scope.showMask = true;\n\n            $show.alarm.query(od, function(resp) {\n                $scope.page.data = resp.data;\n                $scope.page.total = resp.total;\n                $scope.page.currentPage = pageNo;\n\n                if (!resp.data.length) {\n                    angular.alert({\n                        title: \"无报警数据\"\n                    })\n                }\n\n                $scope.showMask = false;\n            }, function() {\n                $scope.showMask = false;\n            })\n\n        }\n\n\n\n        // alarm 详细信息;\n\n        $scope.alarmMsg = function(a) {\n            $modal.open({\n                templateUrl: \"athena/show/alarm_msg.html\",\n                controller: [\"$scope\", \"$modalInstance\", function($scope, $modalInstance) {\n                    $scope.__proto__ = S;\n                    $scope.$modalInstance = $modalInstance;\n                    // $scope.done = $scope.cancel;\n                    $scope.alarm = a;\n                }]\n            })\n        }\n    }])\n\n\n    .controller('show_system_prop', [\"$scope\", \"$state\", \"$stateParams\", \"_$system\", \"$utils\", \"$source\", \"$show\", \"$q\", \"$sys\", \"$filter\", \"$interval\", function($scope, $state, $stateParams, _$system, $utils, $source, $show, $q, $sys, $filter, $interval) {\n\n\n        $scope.from = $utils.backState('show_system_prop'); // from\n\n\n\n        // 用缓存可以得到 online ;\n        // $scope.system = $scope.$$cache[0];\n\n        // 用 请求数据 无法获取 onlin ;\n        $scope.system = _$system.ret;\n\n\n        // 加载 region 信息; \n        $source.$region.get({\n            pk: $scope.system.region_id\n        }, function(resp) {\n            $scope.system.region_name = resp.ret.name;\n        })\n\n\n        // 加载  活活报警数; \n        $show.alarm.get({\n            uuid: $scope.system.uuid,\n            op: \"total\",\n            active: 1\n        }, function(resp) {\n            $scope.totalAlarm_act = resp.ret;\n        })\n\n        // 加载 最后报警; \n        $show.alarm.get({\n            uuid: $scope.system.uuid,\n            op: \"lastalarm\"\n        }, function(resp) {\n            $scope.lastAlarm = resp.ret[0];\n        })\n\n\n\n        // 获取在线状态;  \n        function getState() {\n            $source.$system.status([$scope.system.uuid], function(resp) {\n                var state = resp.ret[0];\n                $scope.system.online = state && (state.daserver ? state.daserver.logon : state.online);\n            })\n        }\n        getState();\n\n        // 每分钟更新次 在线状态; \n        var state_interval;\n        state_interval = $interval(getState, $sys.state_inter_time);\n\n        $scope.$on(\"$destroy\", function() {\n            $interval.cancel(state_interval);\n        })\n\n\n\n        $scope.tags = $scope.system.tags;\n\n\n        var sysModel = $scope.system.model,\n            //td = $filter(\"date\")(new Date(), \"yyyy-MM-dd\"),\n            arr, d;\n\n        // 加载模型来干什么?\n        //  0: 展示不需要列出系统引用那个模型;\n        //  1: 获得模式来判断是否能下置点数据;\n        $source.$sysModel.getByPk({\n            pk: sysModel\n        }, function(resp) {\n            $scope.systemModel = resp.ret;\n            //$scope.system.network = angular.fromJson( $scope.system.network);\n        })\n\n\n        $scope.op = {\n            start: \"\",\n            num: 400, // 查询点历史 返回条数;\n            end: new Date(),\n            start: new Date(new Date() - 86400000),\n            ala: \"a\", // a: 实时报警; b: 历史报警;\n            pointSize: 60, // 曲线上的点数;\n            c_int: 10000, // 实时数据 interval 时间;\n            a_int: 10000, // 实时报警; interva 时间;\n            progValue: 0\n        };\n\n        // $scope.openCalendar = function(e, exp) {\n\n\n\n\n        $scope.openCalendar = function(e, exp) {\n            e.preventDefault();\n            e.stopPropagation();\n\n            this.$eval(exp);\n        };\n\n\n        $scope.goHis = function(t) {\n            $scope.op.his_tag = t;\n            $state.go('app.s_system_prop.history');\n        }\n\n        //  var map = new BMap.Map(\"l-map\");\n        // map.centerAndZoom(new BMap.Point(116.404, 39.915), 11);\n        // // 创建地理编码实例\n        if ($scope.system.latitude) {\n            var myGeo = new BMap.Geocoder();\n            // // 根据坐标得到地址描述\n            myGeo.getLocation(new BMap.Point($scope.system.longitude, $scope.system.latitude), function(result) {\n                if (result) {\n                    console.log(result);\n                    $scope.$apply(function() {\n                        $scope.system.map_address = result.address;\n                    })\n                }\n            });\n\n        }\n\n\n    }])\n\n    .controller('show_system_basic', [\"$scope\", \"$sys\", \"$show\", \"$state\", function($scope, $sys, $show, $state) {\n        // 获取是否在线;\n        $scope.$popNav($scope.system.name + \"\", $state);\n    }])\n\n    .controller('show_system_current', [\"$scope\", \"$show\", \"$interval\", \"$sys\", \"$state\", \"$filter\", \"$timeout\", function($scope, $show, $interval, $sys, $state, $filter,\n        $timeout) {\n\n        $scope.$popNav($scope.system.name + \"(实时数据)\", $state);\n\n        var interval;\n\n        //$scope.$popNav($scope.system.name + \"()\", $state);\n\n        $scope.$on(\"$destroy\", function() {\n            $interval.cancel(interval);\n        });\n\n        // 自动刷新   ;\n        $scope.auto_r = true;\n\n        var names = [],\n            reg;\n\n        $scope.filtTags = [];\n        $scope.filterTags = function(name) {\n            names = [];\n            reg = new RegExp(name);\n\n            $scope.filtTags = $scope.tags.filter(function(v) {\n                if (reg.test(v.name)) {\n                    names.push(v.name);\n                    return true;\n                }\n                return false;\n            });\n            getCurrent();\n        };\n\n        $scope.filterTags(\"\");\n\n        $scope.$watch(\"auto_r\", function(n) {\n            if (n) { // 自动刷新;\n                $scope.liveData();\n            } else { // false;\n                // 取消 interval , 但是保存状态( 保持 progvalue );\n                $interval.cancel(interval);\n            }\n        })\n\n\n\n\n\n        // 开始订阅数据;\n        $scope.progValue = 0;\n        $scope.liveData = function() { // need = $last ;\n            $interval.cancel(interval);\n\n            interval = $interval(function() {\n\n                $scope.progValue += 1000;\n\n                if ($scope.progValue == $scope.op.c_int) {\n                    getCurrent();\n                }\n\n                if ($scope.progValue > $scope.op.c_int) {\n                    $scope.progValue = 0;\n                }\n\n            }, 1000);\n        }\n\n\n        // 单次获得 当前数据;\n        var x = {\n                src: null,\n                pv: null\n            },\n            t;\n\n        function getCurrent($event) {\n\n            console.log(names);\n\n            var $dom;\n\n\n\n            if (names.length) {\n                if ($event) {\n                    $dom = $($event.currentTarget);\n                    $dom.text(\"刷新中\").attr(\"disabled\", true);\n\n                };\n\n                $show.live.get({\n                    uuid: $scope.system.uuid,\n                    tag: names\n                }, function(resp) {\n                    $.each(resp.ret, function(i, d) {\n                        d = d || x;\n                        t = $filter(\"date\")(d.src, 'MM-dd HH:mm:ss');\n                        $(\"#_val_\" + i).text(d.pv == null ? \"\" : d.pv);\n                        t && $(\"#_time_\" + i).text(t);\n                    });\n\n                    if ($dom) {\n                        $dom.text(\"刷新成功\");\n\n                        $timeout(function() {\n                            $dom.text(\"刷新\").attr(\"disabled\", false);\n                        }, 3000);\n\n                    }\n\n\n\n                }, function() {\n                    if ($dom) {\n\n\n                    }\n\n                    $dom && $dom.text(\"刷新\").attr(\"disabled\", false);\n                })\n            }\n\n        }\n\n        $scope.getCurrent = getCurrent;\n\n\n        // 下置数据;\n        $scope.liveWrite = function(t, v, e, s) {\n            //console.log(arguments);  // String system_id , String name ,String value\n\n            if (!v) {\n                angular.alert(\"请输入下置数据\");\n                return;\n            }\n\n            if (!t) return;\n            var d = {},\n                $button = $(e.currentTarget);;\n            d[t.name] = v;\n\n            //        jjw\n            //        $button.text(\"下置中...\");\n            s.showSpinner = true;\n            $show.liveWrite.save({\n                uuid: $scope.system.uuid\n            }, d, function(resp) {\n                s.showSpinner = false;\n                //            $button.text(\"下置成功\");\n\n                //            $timeout(function() {\n                //                $button.text(\"下置\");\n                //            }, 2000)\n\n            }, function() {\n                s.showSpinner = false;\n                //            $button.text(\"下置失败\").toggleClass(\"btn-danger\");\n                //            $timeout(function() {\n                //                $button.text(\"下置\").toggleClass(\"btn-danger\");\n                //            }, 2000)\n            })\n        }\n    }])\n\n    .controller('show_system_history', [\"$scope\", \"$show\", \"$sys\", \"$state\", function($scope, $show, $sys, $state) {\n\n        // $scope.od = {\n        //  showS: false,\n        //  showE: false\n        // };\n\n        $scope.$popNav($scope.system.name + \"(历史数据)\", $state);\n\n        $scope.$on(\"$destroy\", function() {\n            $scope.op.his_tag = null;\n        })\n\n\n        var polt,\n            plot_config = angular.copy($sys.plotChartConfig);\n\n        $scope.initFlotChart = function(_plot_data) {\n\n\n            if ($scope.op.his_tag) {\n                $scope.op.start = new Date(new Date() - 21600000);\n                $scope.op.end = new Date();\n                //$scope.queryData(1);\n            } else {\n                refreshChart('模拟点', true);\n            }\n            refreshChart('模拟点', true);\n        }\n\n        var btnType = 1; //标识点击了哪个按钮\n        //左移时间\n        $scope.leftTime = function() {\n\n                if (btnType == 1 || btnType == 2) {\n                    $scope.op.end = new Date($scope.op.end.getTime() - 24 * 3600 * 1000);\n                } else if (btnType == 3 || btnType == 4 || btnType == 5) {\n                    if ($scope.op.end.getMonth() == 0) {\n                        $scope.op.end = new Date(($scope.op.end.getFullYear() - 1) + \"/12/\" + $scope.op.end.getDate());\n                    } else {\n                        $scope.op.end = new Date($scope.op.end.getFullYear() + \"/\" + $scope.op.end.getMonth() + \"/\" + $scope.op.end.getDate());\n                    }\n                } else if (btnType == 6) {\n                    $scope.op.end = new Date(($scope.op.end.getFullYear() - 1) + \"/\" + ($scope.op.end.getMonth() + 1) + \"/\" + $scope.op.end.getDate());\n                }\n                $scope.queryData(btnType);\n\n            }\n            //右移时间\n        $scope.rightTime = function() {\n            if (btnType == 1 || btnType == 2) {\n                $scope.op.end = new Date($scope.op.end.getTime() + 24 * 3600 * 1000);\n            } else if (btnType == 3 || btnType == 4 || btnType == 5) {\n                if ($scope.op.end.getMonth() == 11) {\n                    $scope.op.end = new Date(($scope.op.end.getFullYear() + 1) + \"/1/\" + $scope.op.end.getDate());\n                } else {\n                    $scope.op.end = new Date($scope.op.end.getFullYear() + \"/\" + ($scope.op.end.getMonth() + 2) + \"/\" + $scope.op.end.getDate());\n                }\n            } else if (btnType == 6) {\n                $scope.op.end = new Date(($scope.op.end.getFullYear() + 1) + \"/\" + ($scope.op.end.getMonth() + 1) + \"/\" + $scope.op.end.getDate());\n            }\n            $scope.queryData(btnType);\n        }\n\n\n        $scope.dateStr = new Date().getFullYear() + \".\" + (new Date().getMonth() + 1) + \".\" + new Date().getDate();\n\n        $scope.$watch('op.end', function(n, o) {\n            if ($scope.changeTemp) {\n                $scope.queryData(btnType);\n            }\n        }, true);\n\n        $scope.$watch('op.his_tag', function(n, o) {\n            $scope.queryData(btnType);\n        }, true);\n\n        //标示op.end是否是页面模型改变的\n        $scope.changeTemp;\n\n        $scope.queryData = function(num) {\n\n            $scope.changeTemp = false;\n            if (arguments.length == 2) {\n                $scope.op.end = new Date();\n            }\n\n            if (!$scope.op.his_tag) {\n                return;\n            }\n            //按钮变色处理\n            $(\"button[data-name='\" + num + \"']\").css({\n                'background-color': '#edf1f2',\n                'border-color': '#c7d3d6',\n                'box-shadow': 'inset 0 3px 5px rgba(0, 0, 0, .125)'\n            }).prop('disabled', true).siblings().css({\n                'background-color': '#fff',\n                'border-color': '#dee5e7',\n                'box-shadow': '0 1px 1px rgba(90,90,90,0.1)'\n            }).prop('disabled', false);\n\n            if ($scope.op.end.getTime() > (new Date().getTime())) {\n                angular.alert(\"结束时间不能晚于当前时间\");\n                $scope.op.end = new Date();\n            }\n\n\n\n            var curdate = new Date();\n            var now = {\n                year: curdate.getFullYear(),\n                month: curdate.getMonth() + 1,\n                day: curdate.getDate(),\n                time: curdate.getTime()\n            }\n\n            var op = $scope.op;\n            var start;\n            var end = op.end.getTime();\n            var count;\n\n\n            if (num == 1) { //1天\n                if (now.time - op.end.getTime() < 24 * 3600 * 1000) { //当天\n                    start = new Date(now.year + \"/\" + now.month + \"/\" + now.day).getTime();\n                    end = now.time;\n                    $scope.dateStr = new Date(end).getFullYear() + \".\" + (new Date(end).getMonth() + 1) + \".\" + new Date(end).getDate();\n                } else {\n                    start = new Date(op.end.getFullYear() + \"/\" + (op.end.getMonth() + 1) + \"/\" + op.end.getDate()).getTime();\n                    end = new Date(op.end.getFullYear() + \"/\" + (op.end.getMonth() + 1) + \"/\" + op.end.getDate()).getTime() + 24 * 3600 * 1000;\n                    $scope.dateStr = new Date(start).getFullYear() + \".\" + (new Date(start).getMonth() + 1) + \".\" + new Date(start).getDate();\n                }\n                count = 1500;\n                btnType = 1;\n\n\n\n            } else if (num == 2) { //7天\n                if (now.time - op.end.getTime() < (24 * 3600 * 1000)) { //当天\n                    start = new Date(now.year + \"/\" + now.month + \"/\" + now.day).getTime() - 6 * 24 * 3600 * 1000;\n                    end = now.time;\n                    end = end - ((end - start) % (30 * 60 * 1000));\n                    $scope.dateStr = new Date(start).getFullYear() + \".\" + (new Date(start).getMonth() + 1) + \".\" + new Date(start).getDate() + \"-\" +\n                        new Date(end).getFullYear() + \".\" + (new Date(end).getMonth() + 1) + \".\" + new Date(end).getDate();\n                } else {\n                    end = new Date(op.end.getFullYear() + \"/\" + (op.end.getMonth() + 1) + \"/\" + op.end.getDate()).getTime() + 24 * 3600 * 1000;\n                    start = end - 7 * 24 * 3600 * 1000;\n                    $scope.dateStr = new Date(start).getFullYear() + \".\" + (new Date(start).getMonth() + 1) + \".\" + new Date(start).getDate() + \"-\" +\n                        new Date(end - 24 * 3600 * 1000).getFullYear() + \".\" + (new Date(end - 24 * 3600 * 1000).getMonth() + 1) + \".\" + new Date(end - 24 * 3600 * 1000).getDate();\n                }\n                count = parseInt((end - start) / (30 * 60 * 1000));\n                btnType = 2;\n\n            } else if (num == 3) { //1月\n                if ((op.end.getFullYear() == now.year) && (op.end.getMonth() + 1 == now.month)) { //当月\n                    start = new Date(now.year + \"/\" + now.month).getTime();\n                    end = now.time;\n                    end = end - ((end - start) % (2 * 3600 * 1000));\n                    $scope.dateStr = new Date(end).getFullYear() + \".\" + (new Date(end).getMonth() + 1);\n                } else {\n                    start = new Date(op.end.getFullYear() + \"/\" + (op.end.getMonth() + 1)).getTime();\n                    //处理12月\n                    if (op.end.getMonth() == 11) {\n                        end = new Date((op.end.getFullYear() + 1) + \"\").getTime();\n                    } else {\n                        end = new Date(op.end.getFullYear() + \"/\" + (op.end.getMonth() + 2)).getTime();\n                    }\n                    $scope.dateStr = new Date(start).getFullYear() + \".\" + (new Date(start).getMonth() + 1);\n\n                }\n                count = parseInt((end - start) / (2 * 3600 * 1000));\n                btnType = 3;\n\n\n            } else if (num == 4) { //3月\n                if ((op.end.getFullYear() == now.year) && (op.end.getMonth() + 1 == now.month)) { //当月\n                    //处理1，2月份\n                    if (now.month <= 2) {\n                        start = new Date((now.year - 1) + \"/\" + (10 + now.month)).getTime();\n                    } else {\n                        start = new Date(now.year + \"/\" + (now.month - 2)).getTime();\n                    }\n                    end = now.time;\n                    end = end - ((end - start) % (6 * 3600 * 1000));\n\n                    $scope.dateStr = new Date(start).getFullYear() + \".\" + (new Date(start).getMonth() + 1) + \"-\" +\n                        new Date(end).getFullYear() + \".\" + (new Date(end).getMonth() + 1);\n                } else {\n                    //处理1，2月份\n                    if (op.end.getMonth() < 2) {\n                        start = new Date((op.end.getFullYear() - 1) + \"/\" + (11 + op.end.getMonth())).getTime();\n                    } else {\n                        start = new Date(op.end.getFullYear() + \"/\" + (op.end.getMonth() - 1)).getTime();\n                    }\n                    //处理12月\n                    if (op.end.getMonth() == 11) {\n                        end = new Date((op.end.getFullYear() + 1) + \"\").getTime();\n                    } else {\n                        end = new Date(op.end.getFullYear() + \"/\" + (op.end.getMonth() + 2)).getTime();\n                    }\n\n                    $scope.dateStr = new Date(start).getFullYear() + \".\" + (new Date(start).getMonth() + 1) + \"-\" +\n                        op.end.getFullYear() + \".\" + (op.end.getMonth() + 1);\n                }\n                count = parseInt((end - start) / (6 * 3600 * 1000));\n                btnType = 4;\n\n            } else if (num == 5) { //6月\n                if ((op.end.getFullYear() == now.year) && (op.end.getMonth() + 1 == now.month)) { //当月\n                    //处理1，2,3,4,5月份\n                    if (now.month <= 5) {\n                        start = new Date((now.year - 1) + \"/\" + (7 + now.month)).getTime();\n                    } else {\n                        start = new Date(now.year + \"/\" + (now.month - 5)).getTime();\n                    }\n                    end = now.time;\n                    end = end - ((end - start) % (12 * 3600 * 1000));\n                    $scope.dateStr = new Date(start).getFullYear() + \".\" + (new Date(start).getMonth() + 1) + \"-\" +\n                        new Date(end).getFullYear() + \".\" + (new Date(end).getMonth() + 1);\n                } else {\n                    //处理1，2,3,4,5月份\n                    if (op.end.getMonth() < 5) {\n                        start = new Date((op.end.getFullYear() - 1) + \"/\" + (8 + op.end.getMonth())).getTime();\n                    } else {\n                        start = new Date(op.end.getFullYear() + \"/\" + (op.end.getMonth() - 4)).getTime();\n                    }\n                    //处理12月\n                    if (op.end.getMonth() == 11) {\n                        end = new Date((op.end.getFullYear() + 1) + \"\").getTime();\n                    } else {\n                        end = new Date(op.end.getFullYear() + \"/\" + (op.end.getMonth() + 2)).getTime();\n                    }\n                    $scope.dateStr = new Date(start).getFullYear() + \".\" + (new Date(start).getMonth() + 1) + \"-\" +\n                        op.end.getFullYear() + \".\" + (op.end.getMonth() + 1);\n                }\n                count = parseInt((end - start) / (12 * 3600 * 1000));\n                btnType = 5;\n\n\n            } else if (num == 6) { //1年\n                if (op.end.getFullYear() == now.year) { //当年\n                    start = new Date(now.year + \"\").getTime();\n                    end = now.time;\n                    end = end - ((end - start) % (24 * 3600 * 1000));\n                    $scope.dateStr = new Date(start).getFullYear();\n                } else {\n                    start = new Date(op.end.getFullYear() + \"\").getTime();\n                    end = new Date(op.end.getFullYear() + 1 + \"\").getTime();\n                    $scope.dateStr = new Date(start).getFullYear();\n                }\n                count = parseInt((end - start) / (24 * 3600 * 1000));\n                btnType = 6;\n            }\n            var json = {\n                start: start,\n                end: end,\n                count: count\n            }\n            $scope.queryHistory(json);\n\n        }\n\n\n\n        $scope.queryHistory = function(json) { //arr：时间戳列表\n\n            $scope.validForm();\n\n            //页面的模型\n            var op = $scope.op;\n            //请求参数\n            var d = {};\n            d.uuid = $scope.system.uuid;\n            d.tag = op.his_tag.name;\n            d.mode = op.his_tag.type == 'Analog' ? 'linear' : 'last_value';\n            d.start = json.start;\n            d.end = json.end;\n            d.count = json.count;\n            // 历史数据;\n            //  intervali =  ts ,  readRow  = rcv ;\n\n            $scope.showMask = true;\n\n            $show.his.get(d, function(resp) {\n\n                //highchart需要的数据\n                var arr = [];\n                if (resp.ret[0].length > 0) {\n                    //遍历ret组成arr\n                    for (var x = 0; x < resp.ret[0].length; x++) {\n                        var cArr = [];\n                        if (d.end - d.start < 2 * 24 * 3600 * 1000) { //如果是一天，采用的rcv时间戳\n                            cArr[0] = resp.ret[0][x].rcv;\n                        } else {\n                            cArr[0] = resp.ret[0][x].ts;\n                        }\n                        cArr[1] = resp.ret[0][x].pv;\n                        arr[x] = cArr;\n                    }\n                    //type标示是否是阶越曲线\n                    var type = d.mode == 'linear' ? false : true;\n\n                    refreshChart(d.tag, type, arr);\n\n                } else {\n                    $scope.showMask = false;\n                    clearChart();\n                    angular.alert('当前时间段，无历史数据，请选择其他时间')\n                }\n\n            }, function() {\n                $scope.showMask = false;\n            });\n        }\n\n\n\n        //    如果变量数据类型为analog，绘制成趋势曲线\n        //    如果变量数据类型为digital，绘制成阶越曲线 (  0 ,1 整型; )\n        var chart;\n\n        function refreshChart(tag, type, arr) {\n            Highcharts.setOptions({\n                global: {\n                    useUTC: false\n                },\n                lang: {\n                    //reset zoom按钮title\n                    resetZoom: '重置'\n                }\n            });\n            $('#show_live_data').highcharts({\n                chart: {\n                    zoomType: 'x',\n                    events: {\n                        load: function() {\n                            $scope.showMask = false;\n                        }\n                    }\n                },\n                title: {\n                    text: false\n                },\n                xAxis: {\n                    type: 'datetime'\n                },\n                yAxis: {\n                    title: {\n                        text: ''\n                    }\n                },\n                legend: {\n                    enabled: false\n                },\n                tooltip: {\n                    formatter: function() {\n                        return Highcharts.dateFormat('%Y-%m-%d %H:%M:%S', this.x) + '<br/>' +\n                            '<b>' + this.series.name + '</b>：' + this.y;\n                    }\n                },\n                credits: {\n                    enabled: false\n                },\n                //导出\n                exporting: {\n                    enabled: false\n                },\n                plotOptions: {\n                    area: {\n                        fillColor: {\n                            linearGradient: {\n                                x1: 0,\n                                y1: 0,\n                                x2: 0,\n                                y2: 1\n                            },\n                            stops: [\n                                [0, Highcharts.getOptions().colors[0]],\n                                [1, Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0).get('rgba')]\n                            ]\n                        },\n                        marker: {\n                            radius: 2\n                        },\n                        lineWidth: 1,\n                        states: {\n                            hover: {\n                                lineWidth: 1\n                            }\n                        },\n                        threshold: null\n                    }\n                },\n                series: [{\n                    name: tag,\n                    step: type,\n                    data: arr\n                }]\n            });\n            chart = $('#show_live_data').highcharts();\n        }\n\n        function clearChart() {\n            if (!chart) {\n                chart = $('#show_live_data').highcharts();\n            }\n            if (chart.series.length != 0) {\n                for (var i = 0; i < chart.series.length; i++) {\n                    chart.series[i].remove();\n                }\n            }\n        }\n    }])\n\n    .controller('show_system_alarm', [\"$scope\", \"$show\", \"$interval\", \"$modal\", \"$sys\", \"$state\", function($scope, $show, $interval, $modal, $sys, $state) {\n\n\n        $scope.$popNav($scope.system.name + \"(报警)\", $state);\n        // var interval;\n        $scope.page = {};\n\n        // $scope.$on(\"$destroy\", function() {\n        //     $interval.cancel(interval);\n        // });\n\n\n\n        var od = {\n            uuid: $scope.system.uuid\n        };\n\n        $scope.$watch(\"op.ala\", function(n) {\n\n            if (n == 'a') {\n                $scope.loadPageData(1);\n            } else {\n                $scope.page.data = [];\n                $scope.page.total = 0;\n                $scope.page.currentPage = 0;\n            }\n\n        });\n\n        // 查询活跃 报警;  未确认的;\n        $scope.getActiveAlarm = function(pageNo, $dom) { // 一般值 interval是, 切换是调用;\n            var pg = {\n                currentPage: pageNo,\n                itemsPerPage: $sys.itemsPerPage\n            };\n\n            $scope.showMask = true;\n            $show.alarm.get(angular.extend(od, pg), function(resp) {\n\n                if ($dom) {\n                    $dom.toggleClass(\"show\");\n                }\n                $scope.page.data = resp.data;\n                $scope.page.total = resp.total;\n                $scope.page.currentPage = pageNo;\n                if (!resp.data.length) {\n                    // angular.alert({\n                    //     title: \"无活跃报警数据\"\n                    // })\n                };\n                $scope.showMask = false;\n            }, function() {\n                $scope.showMask = false;\n            })\n        }\n\n        $scope.loadPageData = function(pageNo, $event) {\n\n            if (!pageNo) {\n                return;\n            }\n            var $dom;\n\n\n            if ($event) {\n                $dom = $($event.currentTarget).find(\"i\");\n                $dom.toggleClass(\"show\");\n\n            }\n\n\n            if ($scope.op.ala == \"a\") { // 活跃报警\n                $scope.getActiveAlarm(pageNo, $dom);\n            } else { //  全部活跃;\n                $scope.queryAlarm(pageNo, $dom);\n            }\n        }\n\n\n        // 点击按钮 查询全部报警;\n        $scope.queryAlarm = function(pageNo, $dom) {\n            var d = {},\n                op = $scope.op;\n            d.start = op.start.getTime(),\n                d.end = op.end.getTime();\n\n            if (d.start > d.end) {\n                angular.alert(\"起始时间不可超前与结束时间!\");\n                return;\n            }\n\n            //var  pg = { currentPage: pageNo ,  itemsPerPage : $sys.itemsPerPage  };\n            d.uuid = $scope.system.uuid,\n                d.currentPage = pageNo,\n                d.itemsPerPage = $sys.itemsPerPage;\n\n            $scope.showMask = true;\n            $show.alarm.save(d, null, function(resp) {\n                if ($dom) {\n                    $dom.toggleClass(\"show\");\n                }\n\n                $scope.page.data = resp.data;\n                $scope.page.total = resp.total;\n                $scope.page.currentPage = pageNo;\n                if (!resp.data.length) {\n                    angular.alert({\n                        title: \"无报警数据\"\n                    })\n                }\n                $scope.showMask = false;\n            }, function() {\n                $scope.showMask = false;\n            })\n        }\n\n    }])\n\n    .controller('show_system_map', [\"$scope\", \"$map\", \"$state\", function($scope, $map, $state) {\n\n\n\n        var map;\n        $scope.initMap = function() {\n            map = $map.initMap(\n                $scope, [$scope.system],\n                \"station_map\",\n                135\n                // \"$stateParams.projname\"\n            );\n\n        }\n\n    }])\n\n    .controller('show_system_panel', [\"$scope\", \"$map\", \"$state\", \"$source\", \"$http\", function($scope, $map, $state, $source, $http) {\n        var getProUrl = \"/v5/json/syalias/project.search?smid=\" + $scope.system.model;\n\n        $http.get(getProUrl).\n        success(function(data, status, headers, config) {\n            if (data.err) {\n                console.log(\"Get Panel Err\");\n                return;\n            } else {\n                if (data.ret) {\n                    var panel_id = data.ret[0].uuid;\n                    $source.$user.get({\n                        op: 'getack'\n                    }, function(sdata) {\n                        if (sdata.ret) {\n                            var ack = sdata.ret;\n                            var sysName = $scope.system.name;\n                            $scope.currentProjectUrl = \"/syalias/trunk/syalias.html?ack=\" + ack + \"&uuid=\" + panel_id + \"&systemName=\" + sysName;\n                            //      var newUrl = \"/syalias/trunk/syalias.html?ack=\" + ack + \"&uuid=\" + panel_id;\n                            //            window.open(newUrl)\n                        }\n\n                    })\n                }\n            }\n        }).\n        error(function(data, status, headers, config) {\n            console.log(data);\n        });\n\n\n    }])\n\n \n// 激活的采集器  控制器;\n\n// 激活  未激活 公用控制器\n \n\n    angular.module('app.system', [])\n\n\n    .controller(\"dastation_ignore_active\", [\"$scope\", \"$state\", \"$stateParams\", \"$source\", \"$modal\", \"$q\", \"$map\", \"$sys\", \"$timeout\", \"$interval\", \"$utils\", \"$http\", \"$templateCache\", \"$templateRequest\", \"$filter\", \"$interpolate\", function($scope, $state, $stateParams, $source,\n        $modal, $q, $map, $sys, $timeout, $interval, $utils, $http, $templateCache, $templateRequest,\n        $filter, $interpolate) {\n\n        //是否为 show 模块;\n        $scope.isShowModul = $state.$current.data && $state.$current.data.isShowModul;\n\n        $state.current.text = ($scope.project && $scope.project.name) || ($scope.isShowModul ? '系统' : '系统管理');\n\n        $scope.from = $utils.backState(\"dastation_ignore_active\");\n\n\n\n\n\n\n        var thatScope = $scope;\n\n        var region_id = $stateParams.id;\n\n\n\n\n        $scope._$projState = $scope.isShowModul ? 'app.s_region_system' : 'app.m_region_prop.system';\n        $scope._$mapState = $scope.isShowModul ? 'app.s_system_prop.map' : 'app.m_system_prop._map';\n        $scope._$stationState = $scope.isShowModul ? \"app.s_system_prop.basic\" : \"app.m_system_prop._basic\";\n\n        $scope._$showRegionTH = $state.includes('app.m_system') || $state.includes('app.s_system');\n\n\n        $scope.active2del = true;\n\n        if ($scope.isShowModul) {\n            $scope.$moduleNav(\"系统\", $state);\n        } else {\n            $scope.$moduleNav($stateParams.isactive == '1' ? \"已激活系统\" : \"未激活系统\", $state);\n        }\n\n\n        $scope.updataORdel = \"del\";\n\n        $scope.op = { lm:\"list\"};\n\n        $scope.od = {\n            state: $scope.isShowModul ? 1 : undefined,\n            region_id: region_id\n        };\n        $scope.page = {};\n\n        // 加载 system , 然后 , 加载 region信息, 同步信息, 在线信息; \n        var loadRegionPromise = $source.$region.get({\n                currentPage: 1\n            }).$promise,\n            loadSysModelPromise = $source.$sysModel.get({\n                currentPage: 1\n            }).$promise;\n\n        $scope.rg_k_v = {};\n\n        var analyzeRegionPromise = loadRegionPromise.then(function(resp) {\n            $scope.regions = resp.data;\n            $scope.regions.forEach(function(r) {\n                $scope.rg_k_v[r.id] = r; // rg_k_v  在  region.prop - systom中 也要是 该名: rg_k_v;\n            })\n        });\n        loadSysModelPromise.then(function(resp) {\n            $scope.sysModels = resp.ret;\n        })\n\n\n        $scope.reset = function() {\n            $scope.od = {\n                state: undefined,\n                region_id: region_id\n            };\n            $scope.loadPageData(1);\n        }\n\n        var state_interval;\n        $scope.$on(\"$destroy\", function() {\n            $interval.cancel(state_interval);\n        })\n\n        $scope.loadPageData = function(pageNo) {\n\n            // $scope.showMask = true;\n\n            if( $scope.op.lm == \"map\"){\n\n                forMapPromise = $source.$system.get(  angular.extend( {options:\"queryformap\"} , $scope.od ), function(resp){\n                    map.clearOverlays(); \n                      \n                    map.addOverlay(  ceratePointOverlay( resp.ret )     );\n\n                    $scope.showMask = false ;\n\n                }).$promise;  \n                return ; \n            }\n \n\n            $scope.page.currentPage = pageNo;\n            // 分页加载 系统数据;\n            var d = angular.extend({\n                options: \"query\",\n\n                currentPage: pageNo,\n                itemsPerPage: $sys.itemsPerPage\n            }, $scope.od );\n\n            $source.$system.query(d).$promise.then(function(resp) {\n\n                var sys_ref,\n                    promise_A, promise_B, sysState, sta2sync;\n\n                sys_ref = {};\n\n                resp.data.forEach(function(n, i, a) {\n                    sys_ref[n.uuid] = n;\n                })\n                promise_A = {} //  状态 是否在线, 挂起 ; \n                    // $source.$region.getProjNameByIdS(Object.keys(projids)).$promise;\n\n                // 激活的系统;\n                var ids = Object.keys(sys_ref);\n\n\n                if ((d.state == '1' || d.state == undefined) && ids.length) {\n\n                    // 在线状态 ; \n                    promise_A = $source.$system.status(ids).$promise;\n\n                    // proj name ;\n                    // 是否要 同步;\n                    promise_B = !$scope.isShowModul && $source.$system.needSync(ids).$promise;\n\n\n                    // 没分钟 刷新 状态; \n                    $interval.cancel(state_interval);\n\n                    state_interval = $interval(function() {\n                        $source.$system.status(ids, function(resp_x) {\n                            var sysStatus = resp_x.ret;\n                            $.each(resp.data, function(i, n) {\n                                n.online = sysStatus && sysStatus[i] &&\n                                    (sysStatus[i].daserver ?\n                                        sysStatus[i].daserver.logon : sysStatus[i].online\n                                    )\n                            })\n\n                        });\n\n                    }, $sys.state_inter_time)\n\n                }\n\n                // 非激活的system; 或者 展示模块;\n                // 加载 state , needsysnc ,  拆分 region数据;  ,\n                $q.all([promise_A, promise_B, analyzeRegionPromise]).then(function(resp_B) {\n\n                    sysStatus = resp_B[0] && resp_B[0].ret;\n                    sta2sync = resp_B[1] && resp_B[1].ret; //在 未激活,  展示 模块 为 undefind ;\n\n                    // 组装是否需要 同步 ; \n                    $.each(resp.data, function(i, n) {\n                        //  不是这个 系统状态(0:未激活,1:活跃,2:挂起)\n                        // 而是系统在线在线状态; \n\n                        n.online = sysStatus && sysStatus[i] &&\n                            (sysStatus[i].daserver ?\n                                sysStatus[i].daserver.logon : sysStatus[i].online\n                            )\n                        n.needsync = sta2sync && sta2sync[n.uuid];\n\n                        n.region_name = $scope.rg_k_v[n.region_id].name;\n\n                    });\n\n                    angular.extend($scope.page, resp);\n\n                    //$scope.page = resp_A ;\n\n                    // 翻页 刷新  地图上的点;\n                    if ($scope.lm == \"map\") {\n                        // flush points ;\n                        // 在 地图中翻页;  \n                        $map.createDAPoint2Map(map, $scope.page.data, showMsgHandler)\n                    }\n\n                    $scope.showMask = false;\n\n                }, function() {\n                    $scope.showMask = false;\n                })\n\n            }, function() {\n                $scope.showMask = false;\n            })\n        }\n\n\n        $scope.loadPageData(1);\n\n        //  切换到 地图; \n        var map, points;\n\n\n        // 得到我所有管理的 system  制作展示 ,必要字段, 避免 大流量数据; \n        var forMapPromise  , pointCollection , marker ,\n            collenTionOptions = {\n                        size: 7,\n                        shape:  BMAP_POINT_SHAPE_WATERDROP,\n                        color: 'red'\n            } ,\n            markerOptions = {   offset: new BMap.Size( 0,5)     }  \n            ;\n\n        // 展示 system  属性; \n        function  pointMouseOver (e){\n            var point = e.point ,\n                system =  point.system  ;\n\n                system.region_name = $scope.rg_k_v[system.region_id].name ;\n\n\n                $templateRequest(\"athena/dastation/prop_map_popup.html\").then( function(html){\n                    \n                    marker =  point.marker ||  new BMap.Marker( point , markerOptions ); \n                    point.marker  = marker ;\n\n                    map.addOverlay(marker );\n\n                    // s.proj_name = s.proj_name || projName; // ;\n                    system.create_time = $filter(\"date\")(system.create_time, \"yyyy-MM-dd hh:mm:ss\");\n                    // system 类型;\n                    // system.type =  $sys.stationtype.values[s.type].k ; \n                    var str = $interpolate(html)(system);\n                    var infoWindow = new BMap.InfoWindow(str);\n                    marker.openInfoWindow(infoWindow); \n                })  \n        }\n\n        function  pointMouseOut (e){\n                var point = e.point ;  \n                    marker = point.marker  || marker ; \n                    marker.closeInfoWindow();\n                    map.removeOverlay( marker );\n                    point.marker = null ; \n        }\n\n        // 后台返回的poing 保证了有  经纬度; \n        function ceratePointOverlay ( pointArray ){\n            var  collection = new BMap.PointCollection(\n                        pointArray.map( function( v, i ){  \n                            var p = new BMap.Point( v.longitude , v.latitude ) // long 经度 , lat 维度 ;\n                            p.system = v ; \n\n                            return   p ;\n                        }),\n                        collenTionOptions \n                    ); \n \n            //mouseover 显示 system 名字;  详细属性;  \n            collection.addEventListener(\"mouseover\" ,  pointMouseOver );\n\n            collection.addEventListener( \"mouseout\" ,  pointMouseOut ) ;\n\n            return collection ;\n\n        }\n\n           \n\n        $scope.initMap = function( ) { \n\n            // map =   $map.createMap($scope, document.getElementsByClassName(\"sys_bdmap\"), 268);   \n            map =   $map.createMap($scope,  \"bdmap\", 168);    \n\n            $scope.showMask = true ; \n\n            forMapPromise = forMapPromise || $source.$system.get( \n                angular.extend( {options:\"queryformap\"} , $scope.od )\n            ).$promise ;\n\n            forMapPromise.then( function(resp ){  \n\n                map.addOverlay(  ceratePointOverlay( resp.ret ) );\n\n                $scope.showMask = false ;\n            })\n    \n        }\n \n  \n\n        $scope.createSystem = function() {\n            $modal.open({\n                templateUrl: \"athena/dastation/dastation_add_temp.html\",\n                controller: [\"$scope\", \"$modalInstance\", function($scope, $modalInstance) {\n                    $scope.__proto__ = thatScope;\n                    $scope.$modalInstance = $modalInstance;\n\n                    var region_id = thatScope.project && thatScope.project.id;\n\n\n                    $scope.system = {\n                        region_id: region_id\n                    };\n\n                    $scope.od = {\n                        systemModel: undefined,\n                        selectRegion: !!region_id\n                    };\n\n\n                    $scope.$watch(\"od.systemModel\", function(n, o) {\n                        if (!n) return;\n\n\n                        // 加载  profile;\n                        if (n.mode == 2) {\n                            delete $scope.system.network;\n                        }\n\n                        $scope.showMask = true;\n                        $source.$sysProfile.get({\n                            system_model: n.uuid\n                        }, function(resp) {\n                            $scope.profiles = resp.ret;\n                            $scope.system.profile = resp.ret[0] && resp.ret[0].uuid;\n                            $scope.showMask = false;\n                        }, function() {\n                            $scope.showMask = false;\n                        })\n\n                    })\n\n\n\n\n                    $scope.done = function() {\n                        $scope.validForm();\n\n                        $scope.showMask = true;\n\n                        // $scope.system.network = angular.toJson($scope.system.network);\n                        var sys = angular.extend({\n                            model: $scope.od.systemModel.uuid\n                        }, $scope.system);\n\n\n                        $source.$system.save(sys, function(resp) {\n                            // alert(\"创建成功!\");  \n                            sys.uuid = resp.ret;\n                            sys.state = 0;\n\n                            $scope.page.data.unshift(sys);\n                            $scope.cancel();\n\n                            $scope.confirmInvoke({\n                                    title: \"配置系统\",\n                                    note: \"创建成功,是否去配置该系统?\",\n                                    todo: \"是\",\n                                    undo: \"不用了\"\n                                },\n                                function(next) {\n                                    $scope.goto(\"app.m_system_prop._config\", sys, sys);\n                                    next();\n                                }\n                            )\n\n                            $scope.showMask = false;\n\n                        }, function() {\n                            $scope.showMask = false;\n                        })\n                    }\n\n\n                }]\n            })\n        }\n\n        $scope.updateSystem = function(idObj) {\n            return $source.$system.put({}, idObj).$promise;\n        }\n\n\n    }])\n\n\n \n/**\n * app.support Module\n *\n * Description\n */\n \n    angular.module('app.support', [])\n        .controller('tech', [\"$scope\", function($scope) {\n\n\n        }])\n        .controller('techdetail', [\"$scope\", function($scope) {\n            $scope.data = ' <div><span style=\"line-height: 1.42857143;\">1: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;fga3ef 1-- <script>alert(12) </script> ---</span><br>222</div>';\n\n        }]);\n \n\n// dastation  配置  网关离线报警:开:  配置 form 的控制器   das_conf_gateway 写死在 模版上!!!\n//       关:  设备, 日志, .... 网关配置; 的各个控制器 写死在 模版上;\n\n\n// controller  分的太细了 ! 完全可以合并 部分 controller ;\n \n\n\n    angular.module('app.system.prop', [])\n\n    .controller(\"dastation_prop\", [\"$scope\", \"$state\", \"$source\", \"$stateParams\", \"$interval\", \"$sys\", \"$sessionStorage\", \"$utils\", \"systemResp\", function($scope, $state, $source, $stateParams, $interval,\n        $sys, $sessionStorage, $utils, systemResp) {\n\n        $scope.from = $state.current.from = $utils.backState('dastation_prop');\n\n\n\n        // $stateParams.state ==\"unactive\"  时  需要激活 station ;\n\n        // 未激活的采集站 处理 ;\n        // $scope.setActive = function() {\n        //     $scope.activateStation($scope, null, $scope.station, null, \"updata\");\n        // };\n        // 改变 station 会自动存到 sessionStorage ; AppScope.$watch(\"$$cache\", fun... ,  true)\n\n\n        $scope.station = systemResp.ret;\n        // $scope.Sta_Data = $scope.$$cache[1];  // ?????\n\n\n        //??????????????\n        // $scope.loadSystemData = function() {\n\n        //     $source.$system.get({\n        //         system_id: $scope.station.uuid\n        //     }, function(resp) {\n\n        //         $scope.Sta_Data = resp.ret.profile; \n\n        //     })\n        // }\n\n        // if ($scope.station) {\n        //     $scope.loadSystemData();\n        // }\n\n\n\n\n        // 得到 region 信息; \n        if ($scope.station.region_id) {\n            $source.$region.get({\n                pk: $scope.station.region_id\n            }, function(resp) {\n                $scope.station.region_name = resp.ret.name;\n            })\n        }\n\n\n\n\n        // 加载是否在线;  \n        function getState() {\n            $source.$system.status([$scope.station.uuid], function(resp) {\n                var state = resp.ret[0];\n                $scope.station.online = state && (state.daserver ? state.daserver.logon : state.online);\n            })\n        }\n        getState();\n\n        // 每分钟更新次 在线状态; \n        var state_interval;\n        state_interval = $interval(getState, $sys.state_inter_time);\n\n        $scope.$on(\"$destroy\", function() {\n            $interval.cancel(state_interval);\n        })\n\n\n\n\n\n        // 得到systemModel 数据 ; 便于配置 gateway , network ;\n\n        $scope.l_m_P = $source.$sysModel.getByPk({\n            pk: $scope.station.model\n        }).$promise;\n\n        $scope.l_m_P.then(function(resp) {\n            // sysmodel ;\n            $scope.sysmodel = resp.ret;\n\n            // 转换 sysmodel Device = [{}], 为 k-v(name) 形式; 便于 回显;\n            $scope.deviceKV = {};\n\n            $scope.sysmodel.devices.forEach(function(v, i, t) {\n                this[v.id] = v.name;\n            }, $scope.deviceKV);\n        });\n\n\n\n        // // ticket ;\n        // $scope.t = {\n        //     sn: undefined,\n        //     ticket: undefined\n        // };\n\n        // 获得文件路径;\n        $scope.op = {\n            rightfile: true\n        };\n\n        $scope.setFiles = function(element) {\n            $scope.canupload = true;\n            $scope.$apply(function($scope) {\n                // Turn the FileList object into an Array   form 中家 multiple  就是多文件上传;\n                $scope.files = [];\n\n                var file = element.files[0]; \n\n                // 值上传 第一个; 单位 B ;  // 1G\n                // $scope.rightfile = (element.files[0].size < 10240000);\n                //   /.[png,jpg]$/.test( file.name ) &&\n                $scope.op.rightfile = (file.size < 1024 * 500); //2M ;\n\n\n\n                // $scope.showmsg = !$scope.rightfile;\n                if ($scope.op.rightfile) {\n                    $scope.files.push(element.files[0]) //  文件路径;\n                }\n            });\n        };\n\n\n        $scope.uploadFile = function() {\n\n            $scope.progress = 1;\n\n\n            var fd = new FormData();\n            // for (var i in $scope.files) {\n            fd.append(\"sys_picture\", $scope.files[0]);\n            fd.append(\"old_pic_url_\", $scope.station.pic_url);\n            // } ;\n            // 添加参数;\n            // fd.append(\"filename\", $scope.files[0].name );\n            fd.append(\"system_id\", $scope.station.uuid);\n\n            var xhr = new XMLHttpRequest();\n\n\n            xhr.upload.addEventListener(\"progress\", uploadProgress, false);\n            xhr.addEventListener(\"load\", uploadComplete, false);\n\n            //  xhr.addEventListener(\"error\", uploadFailed, false) ;\n            //  xhr.addEventListener(\"abort\", uploadCanceled, false) ;\n\n            xhr.open(\"POST\", angular.rootUrl + \"picture/system\");\n            xhr.setRequestHeader(\"Accept\", 'application/json');\n\n            $scope.progressVisible = true;\n            xhr.send(fd);\n        };\n\n\n        // 上传完成;  刷新 fileregion 视图;\n        function uploadComplete(evt) {\n            try {\n                $scope.$apply(function() {\n                    $scope.progressVisible = false;\n                    $scope.station.pic_url = angular.fromJson(evt.target.response).ret;\n                    // 清空  file input ; \n                    console.log(\"  empty file  input!! 一般情况下，不允许通过脚本来对文件上传框赋值 \"); \n                })\n\n\n            } catch (e) {}\n        }\n\n        // 进程条滚动;\n        function uploadProgress(evt) {\n            $scope.$apply(function() {\n                if (evt.lengthComputable) {\n                    $scope.progress = Math.round(evt.loaded * 100 / evt.total)\n                } else {\n                    $scope.progress = 'unable to compute'\n                }\n            })\n        }\n\n        var temp_upload = function($scope, $$scope, $modalInstance) {\n\n            $scope.file = {};\n            $scope.progress = 1;\n            $scope.showmsg = false;\n\n        };\n\n\n        //  var map = new BMap.Map(\"l-map\");\n        // map.centerAndZoom(new BMap.Point(116.404, 39.915), 11);\n        // // 创建地理编码实例\n        if ($scope.station.latitude && BMap) {\n\n            var myGeo = new BMap.Geocoder();\n            // // 根据坐标得到地址描述\n            myGeo.getLocation(new BMap.Point($scope.station.longitude, $scope.station.latitude), function(result) {\n                if (result) {\n                    console.log(result);\n                    $scope.$apply(function() {\n                        $scope.station.map_address = result.address;\n                    })\n                }\n            });\n\n        }\n\n    }])\n\n    .controller(\"das_basic\", [\"$scope\", \"$filter\", \"$state\", \"$stateParams\", function($scope, $filter, $state, $stateParams) {\n\n    }])\n\n\n    .controller(\"das_config\",\n        [\"$scope\", \"$state\", \"$stateParams\", \"$source\", \"$modal\", \"$filter\", function($scope, $state, $stateParams, $source, $modal, $filter) {\n\n            // // ticket ;\n            $scope.t = {};\n\n            var S = $scope,\n                needUpdate, hasSave;\n\n            S.needUpdate = needUpdate = {},\n                S.hasSave = hasSave = {};\n\n\n            // 生成 ticket ; //createTicket\n            $scope.createTicket = function() {\n\n                if (!$scope.t.sn) {\n                    angular.alert(\"请输入SN号\");\n                    return;\n                }\n\n                // 先 写死 ticket 的 选前;\n                $scope.t.privilege = ['SYSTEM_MANAGE', 'SYSTEM_CONTROL'];\n\n                $source.$ticket.save({\n                        system_id: $scope.station.uuid\n                    },\n                    $scope.t,\n                    function(resp) {\n                        // $scope.ticket = { sn: $scope.t.sn , ticket: resp.ret };\n                        $scope.t.ticket = resp.ret;\n                    }\n                )\n            }\n\n            // 删除ticket ;\n            $scope.unBindTicket = function() {\n\n                $source.$ticket.delete({\n                    system_id: $scope.station.uuid\n                }, undefined, function(resp) {\n                    $scope.t.ticket = undefined;\n                    $scope.t.sn = undefined;\n                })\n            }\n\n\n            //  就 托管的 daServer 不用  box ticket\n            // <div ng-if=\" !(sysmodel.mode ==1  && sysmodel.comm_type ==1 ) \">\n\n            $scope.l_m_P.then(function(resp) {\n                var model = resp.ret;\n                $scope.nT = !(model.mode == 1 && model.comm_type == 1);\n\n                if ($scope.nT) {\n                    $source.$ticket.get({\n                            system_id: $scope.station.uuid\n                        },\n                        function(resp) {\n                            //$scope.$parent.t = resp.ret;\n                            $scope.t = resp.ret || {};\n\n                        },\n                        function() { // 无 ticket 时;\n                            $scope.t = {};\n                        }\n                    );\n                }\n            })\n\n\n            // 控制 编辑按钮 显隐 ;\n            function toUpdate(field) {\n                needUpdate[field] = true;\n                hasSave[field] = false;\n\n            }\n\n            function toSave(field) {\n                needUpdate[field] = false;\n                hasSave[field] = true;\n            }\n\n            $scope.toUpdate = toUpdate;\n            $scope.toSave = toSave;\n            //------\n\n            $scope.$popNav($scope.station.name + \"(配置)\", $state);\n\n            // var  network , gateway ;\n\n            try {\n                $scope.network = angular.fromJson($scope.station.network || {});\n            } catch (e) {\n                console.error(\" system . network 字段 不是 json 格式\", $scope.station.network);\n            }\n\n            try {\n                $scope.gateway = angular.fromJson($scope.station.gateway || {});\n            } catch (e) {\n                console.error(\" system . gateway  字段 不是 json 格式\", $scope.station.gateway);\n            }\n\n\n\n            //========================================================================================\n            // ================ 托管 -- Daserver类型;  , Dtu| tcpclient | ctpServer  模式 :\n            //                                                    netwrok.dssever  ===================\n            //   system.network.daserver  = {  network:{} ,daserver_id : 1024 }\n            //========================================================================================\n\n\n            // 托管 Daserver 类型; Dtu模式;\n\n            $scope.initDaServer = function() {\n                $scope.daserver = angular.copy(S.network.daserver || (S.network.daserver = {}));\n\n                // 加载  assign 的   dtu server  信息;\n                $scope.l_m_P.then(function() { // 还要是激活的;\n                    if (\n                        $scope.sysmodel.mode == 1 // 托管;\n                        && $scope.sysmodel.comm_type == 1 // dtu ;\n                        && $scope.daserver.params // 指定了daserver ;\n                        && $scope.station.state // 激活的;\n                    ) {\n                        var d = {\n                            options: \"getassign\",\n                            proj_id: $scope.station.uuid\n                        };\n                        $source.$system.getDtuServer(d, function(resp) {\n                            $scope.cmway_port = resp.ret;\n                        })\n                    }\n                })\n            }\n\n            // 加载支持的 dtu 驱动;\n            $scope.loadSupportDtus = function() {\n                if ($scope.dutList) return;\n                $source.$driver.get({\n                    type: \"dtu\"\n                }, function(resp) {\n\n                    $scope.dtuList =  resp.ret ;\n                    // $filter(\"filter\")(resp.ret, {\n                    //     category: \"CHANNEL\"\n                    // });\n\n                });\n            }\n\n            // 托管 -- DaSErver类型 --Dtu 模式;  ;\n            //  dtu驱动ng-change时 ;  dut_name  字段待定; v.name 待定;\n            $scope.applyDtuData = function(params) { // params  =\n\n                params.port = undefined;\n                params.cmway = undefined;\n                $.each($scope.dtuList, function(i, v) {\n                    if (v.driver_id == params.driverid) {\n                        params.port = v.port;\n                        params.cmway = v.cmway;\n                        toUpdate('daserver'); //\n                        return false;\n                    }\n                })\n            }\n\n\n\n\n\n\n\n            //========================================================================================\n            //======================================  profile =======================================\n            //========================================================================================\n            // 托管 | 非托管;  profile 更换操作\n            // ; op 在 操作 system 的 profile 更改;\n\n\n            $source.$sysProfile.get({\n                system_model: $scope.station.model\n            }, function(resp) {\n                $scope.profiles = resp.ret;\n                var p_uuid = $scope.station.profile;\n                $.each($scope.profiles, function(i, v, t) {\n                    if (v.uuid == p_uuid) {\n                        $scope.profile = v;\n                    }\n                })\n            })\n\n\n\n            //========================================================================================\n            //====================================== Gateway 模式 :   system.network.devices ================\n            //========================================================================================\n            // 托管 , gateway 类型; 初始化 network 下的devices ;\n            $scope.initGatewayDevs = function() {\n                var b = S.network.devices || (S.network.devices = []);\n                $scope.gatewayDevs = angular.copy(b)\n            }\n\n            // 便于过滤 devs ;\n            $scope.devRef = {};\n\n            // 托管-- Gatwway类型 ;\n            // 删除 gatewway dev , 删除 devRef 引用  ;\n            $scope.delete_dev = function(gateway_devs, idnex, dev) {\n                $scope.confirmInvoke({\n                    title: \"删除设备网络配置:\" + $scope.deviceKV[dev.id],\n                    note: \" 确认要删除该设备的网络配置吗?\"\n                }, function(next) {\n                    gateway_devs.splice(idnex, 1);\n                    delete $scope.devRef[dev.id];\n                    // gateway Network 字段 更新;\n                    // update_+   $scope.gateweayDevs ;不要乱起名;\n                    toUpdate(\"gatewayDevs\");\n                    next();\n                });\n            }\n\n            // 托管  -- gatwway类型;\n            // 添加|编辑  gateway类型的  network.device;  属性;\n            // 添加  devfef 引用; 在 ng-repeat 中自动添加了;\n\n            $scope.c_u_dev = function(gateway_devs, index, dev) {\n                $modal.open({\n                    templateUrl: \"athena/dastation/add_gateway_device.html\",\n                    controller: [\"$scope\", \"$modalInstance\", function($scope, $modalInstance) {\n                        $scope.__proto__ = S,\n                            $scope.$modalInstance = $modalInstance,\n                            $scope.isAdd = !dev,\n                            $scope.dev = angular.copy(dev || {});\n\n                        $scope.op = {};\n\n                        $scope.done = function() {\n                            $scope.validForm();\n                            if ($scope.isAdd) {\n                                gateway_devs.push($scope.dev);\n\n                            } else {\n                                gateway_devs[index] = $scope.dev;\n                            }\n                            // gateway Network 字段 更新;\n                            toUpdate(\"gatewayDevs\");\n                            $scope.cancel();\n                        }\n\n\n                        // _$devs ;\n                        $scope.filterDev = function() {\n                            var arr = S.sysmodel.devices.filter(function(v, i, t) {\n                                return !$scope.devRef[v.id];\n                            })\n\n                            // $scope._$devs = arr ;\n                            $scope.dev.id = arr[0] && arr[0].id;\n                            $scope._$devs = arr;\n                        }\n\n                        // _$channel ;\n                        // bool 来判断是否 刷新 parmas ;\n                        $scope.filterChannel = function(bool) {\n                            var obj = {},\n                                w = $scope.dev.type,\n                                c;\n\n                            if (w == 'ETHERNET') {\n                                obj = {\n                                    LAN_1: null,\n                                    WLAN_1: null\n                                };\n                            } else {\n                                angular.forEach(S.sysmodel.gateway_default, function(v, i, t) {\n                                    w == i && (obj = v);\n                                })\n                            }\n                            bool && ($scope.dev.params = {\n                                channel: Object.keys(obj)[0]\n                            });\n                            $scope._$channel = obj;\n                        }\n                    }]\n                })\n            }\n\n\n\n            //========================================================================================\n            //====================================== Gateway 模式  :  system.gateway   ;  ====================\n            //========================================================================================\n            // sysmodel 下默认的 gateway_default ;\n\n\n            // 托管 -- gateway 类型;\n            // 添加 | 编辑   gateway 类型的  gatwway 字段属性;\n\n            $scope.c_u_way = function(T, t, way) {\n                $modal.open({\n                    templateUrl: \"athena/dastation/_prop_gateway_addgateway.html\",\n                    controller: [\"$scope\", \"$modalInstance\", function($scope, $modalInstance) {\n\n                        $scope.__proto__ = S,\n                            $scope.$modalInstance = $modalInstance,\n                            $scope.isAdd = !way;\n\n                        var x = (way && way.dns && way.gateway) ? ('WLAN') : ('LAN');\n\n                        $scope.op = {\n                            T: T || 'ETHERNET',\n                            t: t,\n                            x: x,\n                            way: angular.copy(way || {})\n                        };\n\n                        // 我去 ng-change 还不好使了;\n                        // $scope.$watch('op.T' , function( n, o ){\n                        //     $scope.way = {} ;\n                        //     op.t = undefined ;\n                        // })\n\n                        $scope.done = function() {\n                            $scope.validForm();\n                            // 添加||编辑;\n                            var op = $scope.op;\n                            $scope.isAdd && (op.way.enable = false);\n\n                            if (!$scope.isAdd) {\n                                delete $scope.gateway[op.T][t];\n                            }\n\n                            ($scope.gateway[op.T] || ($scope.gateway[op.T] = {}))[op.t] = $scope.op.way;\n\n                            toUpdate('gateway');\n\n                            $scope.cancel();\n\n                        }\n                    }]\n                })\n            }\n\n            // 托管 -- gateway 类型;\n            // 删除  gateway类型 中的 数据;\n            $scope.del_way = function(T, t, way) {\n                $scope.confirmInvoke({\n                    title: \" 删除网关: \" + t,\n                    note: \"确认要删除该网关吗?\"\n                }, function(next) {\n                    delete $scope.gateway[T][t]\n                    toUpdate('gateway');\n                    next();\n                })\n            }\n\n\n\n            // c_u_dev\n\n            //======================================================================\n            //================================   保存 配置 ======================================\n            //======================================================================\n\n            // 更新 system :\n            //                daserver模式 - nentwork  .  daserver ; (  $scope.daserver    )\n            //                geteway模式 -  network   .  devices  ; (  $scope.gatewayDevs )\n            //                gateway模式 -  gateway              ; ( $scope.gateway )\n            //                 profile , ($scope.op.profile )\n            // 字段;\n            $scope.updateSystem = function(field, scope) {\n\n\n                var d = {\n                    uuid: $scope.station.uuid\n                };\n\n                function update(d) {\n                    return $source.$system.put(d).$promise;\n                }\n\n                if (field == 'gatewayDevs') {\n                    $scope.validForm();\n                    d.network = angular.toJson({\n                        devices: $scope.gatewayDevs\n                    });\n                    update(d).then(function(resp) {\n                        toSave(\"gatewayDevs\");\n                        $scope.station.network = d.network;\n                    });\n                }\n\n                if (field == 'daserver') {\n                    // 此处 validForm 不好使;  故增加了个 scope 参数;\n                    $scope.validForm(\"form_daserver\", scope);\n\n\n                    // 未激活的话 提示激活;\n                    if ($scope.station.state == 0) {\n                        $scope.confirmInvoke({\n                            title: \"激活系统\",\n                            note: \"该系统处于未激活状态,确认要激活该系统吗?\"\n                        }, function(next) {\n                            // 激活系统;\n                            $source.$system.active({\n                                    pk: $scope.station.uuid\n                                },\n                                function(resp) {\n                                    $scope.station.state = 1;\n                                    next();\n                                    //assgin  系统;\n                                    assignSystem().then(function() {\n                                        // 保存网络参数;\n                                        saveDaServer().then(next);\n                                    })\n                                },\n                                next\n                            )\n\n                        })\n                    } else if ($scope.station.state == 1 && (!$scope.cmway_port)) {\n                        // 激活的话 , 但是没有指定 daserver( 没assign过的) ;\n                        assignSystem().then(function() {\n                            // 保存网络参数;\n                            saveDaServer();\n                        })\n                    } else {\n                        // 激活 的 , 并且指定了 daserver ; (assign过的)\n                        saveDaServer();\n                    }\n\n\n                    // 激活 , 指定 dtu system 的daserver ;\n                    function assignSystem() {\n                        var d = {\n                            pk: $scope.station.uuid,\n                            driver_id: $scope.daserver.params.driverid\n                        };\n                        var b = $source.$system.assign(d).$promise;\n                        b.then(function(resp) {\n                            $scope.cmway_port = resp.ret; // 数据中心 , 端口数据 ;\n                        })\n                        return b;\n                    }\n\n                    // 为激活的system , 保存 systen 的 network 参数;\n                    function saveDaServer() { // resp\n                        d.network = angular.toJson({\n                            daserver: $scope.daserver\n                        });\n                        return update(d).then(function(resp) {\n                            toSave(\"daserver\");\n                            $scope.station.network = d.network;\n                        })\n                    }\n                }\n\n                if (field == 'gateway') {\n                    $scope.validForm(\"form_gateway\");\n                    d.gateway = angular.toJson($scope.gateway);\n                    update(d).then(function() {\n                        toSave(\"gateway\");\n                        $scope.station.gateway = d.gateway;\n                    })\n                }\n\n                if (field == 'profile') {\n                    d.profile = $scope.profile.uuid;\n                    update(d).then(function() {\n                        toSave(\"profile\");\n                        $scope.station.profile = d.profile;\n                    }).then(function() {\n                        //  重新 获取下  sys_data ;\n                        //$scope.loadSystemData(); //???\n                    })\n                }\n\n            }\n\n\n            //=============================================================================================\n            //=============================================================================================\n            //=============================================================================================\n\n            $scope.d_stop = function() {\n                $source.$system.stop({\n                    pk: $scope.station.uuid\n                }, function(resp) {\n                    angular.alert(angular.toJson(resp));\n                });\n            }\n\n\n        }]\n    )\n\n\n    .controller('das_tag', [\"$scope\", \"$source\", \"$state\", \"$q\", function($scope, $source, $state, $q) {\n\n        var station = $scope.station;\n\n        $scope.$popNav($scope.station.name + \"(变量)\", $state);\n\n\n\n        $scope.getDevName = function(tag, scope) {\n            var d_id = tag.connect.replace(/(\\d+).(\\d+)/, \"$1\");\n            scope.dev_name = $scope.deviceKV[d_id]\n            tag.type = scope.dev_name ? tag.type : null;\n        }\n\n        if (station.profile) {\n\n            var loadProfileTagPromise = $source.$sysLogTag.get({\n                profile: station.profile\n            }).$promise;\n\n\n            $q.all([loadProfileTagPromise, $scope.l_m_P]).then(function(resp) {\n\n                $scope.systags = resp[0].ret;\n\n            })\n\n\n        } else {\n            // query ;\n            $source.$sysTag.get({\n                system_model: station.model\n            }, function(argument) {\n                $scope.systags = argument.ret;\n            })\n        }\n\n    }])\n\n    .controller('das_trigger', [\"$scope\", \"$source\", \"$state\", \"$sys\", \"$utils\", function($scope, $source, $state, $sys, $utils) {\n\n        var station = $scope.station;\n        $scope.$popNav($scope.station.name + \"(触发器)\", $state);\n\n        $scope.page = {};\n\n        var d = {\n            itemsPerPage: $sys.itemsPerPage,\n            profile: station.profile\n        };\n\n        $scope.loadPageData = function(pageNo) {\n            d.currentPage = pageNo,\n                $source.$sysProfTrigger.get(d, function(resp) {\n                    //$scope.triggers = resp.ret;\n                    $scope.page.currentTarget = pageNo;\n                    $scope.page.data = resp.data;\n                    $scope.page.total = resp.total;\n                })\n        }\n\n        // 显示 触发器的 condition ;\n        $scope.conditions = $utils.triggerConditions;\n\n        $scope.loadPageData(1);\n\n    }])\n\n    .controller('das_message', [\"$scope\", \"$source\", \"$state\", function($scope, $source, $state) {\n\n        var station = $scope.station;\n        $scope.$popNav($scope.station.name + \"(通知)\", $state);\n\n\n        station.profile && $source.$message.get({\n            profile_id: station.profile\n        }, function(resp) {\n            $scope.messages = resp.ret;\n        })\n\n    }])\n\n    .controller('das_contact', [\"$scope\", \"$source\", \"$state\", \"$http\", \"$interval\", \"$timeout\", \"$sessionStorage\", function($scope, $source, $state, $http, $interval,\n        $timeout, $sessionStorage) {\n\n\n\n        // 加载 system 的 contact ;\n        // pk ~=   system_uuid ;\n        $scope.$popNav($scope.station.name + \"(联系人)\", $state);\n\n\n        $scope.op = {\n            second: parseInt($sessionStorage.connect_wate) || 0\n        };\n\n        var interval, timeout;\n\n        function wait_interval() {\n            interval = $interval(function() {\n                $sessionStorage.connect_wate = --$scope.op.second;\n                if ($scope.op.second <= 0) {\n                    $interval.cancel(interval);\n                    $scope.op.send = false;\n                }\n            }, 1000);\n\n        }\n\n        function remove_interval() {\n\n        }\n\n        if ($scope.op.second) {\n            $scope.op.send = true;\n            wait_interval();\n        }\n\n\n        // 获取 短信验证码;\n        $scope.sendVer = function() {\n            $source.$note.get({\n                op: \"connect\",\n                mobile_phone: $scope.C.mobile_phone\n            }, function(resp) {\n                $scope.op.second = 120;\n                $scope.op.send = true;\n                wait_interval();\n\n            })\n        }\n\n\n        //验证 短信吗;   ui-validate 当前版本不支持 异步验证;\n        $scope.validVer = function(code) {\n            return true;\n            $timeout.cancel(timeout);\n\n            timeout = $timeout(function() {\n\n            }, 1000);\n\n            return;\n\n            $source.$note.get({\n                op: \"verify_connect\"\n            }, function(resp) {\n\n            })\n        }\n\n\n\n        $source.$contact.get({\n            pk: $scope.station.uuid\n        }).$promise.then(function(resp) {\n\n            $scope.isAdd = !resp.ret;\n\n            $scope.C = resp.ret || {};\n            // $scope.C.mail_notice = $scope.C.mail_notice + '' ||'0';\n            // $scope.C.sms_notice = $scope.C.sms_notice + ''||'0';\n\n\n\n\n            // 更新 system 的 contact ;\n            $scope.commit = function() {\n                $scope.validForm();\n                ($scope.isAdd ? createContact : updateContact)();\n            }\n\n            // 更新联系人;\n            function updateContact() {\n\n                $source.$contact.put({\n                    pk: $scope.station.uuid\n                }, $scope.C, function(resp) {\n                    angular.alert(\"修改成功!\");\n                })\n            }\n            // 创建联系人;\n            function createContact() {\n                $scope.C.system_id = $scope.station.uuid;\n                $source.$contact.save({\n                    pk: $scope.station.uuid\n                }, $scope.C, function(resp) {\n\n                    $scope.C.contact_id = resp.ret || $scope.C.contact_id;\n                    $scope.isAdd = false;\n                    angular.alert('添加成功!');\n\n                })\n            }\n\n        });\n\n    }])\n\n    .controller(\"das_map\", [\"$scope\", \"$state\", \"$stateParams\", \"$map\", \"$localStorage\", \"$timeout\", \"$document\", \"$window\", \"$source\", \"$http\", \"$templateCache\", \"$compile\", function($scope, $state, $stateParams, $map, $localStorage,\n        $timeout, $document, $window, $source, $http, $templateCache, $compile) {\n\n\n        var map, marker, mapContextMenu;\n\n\n        $scope.pos = {};\n        $scope.msg = {};\n        $scope.op = {};\n\n\n        // 点击 标记位置; \n        var marker, infoWindow;\n        $scope.createMap = function() {\n\n            map = $map.createMap($scope, 'station_map', 280, \"markers\");\n\n            $map.addSearch(map, \"suggestId\", \"searchResultPanel\");\n\n\n            // 有定位时 ,  markLocation 无用; \n            if ($scope.station.latitude) {\n                marker = $map.mapMarker($scope.station.latitude, $scope.station.longitude, $scope.station.name)\n                map.addOverlay(marker);\n                map.centerAndZoom(marker.point, 12);\n                openWinInfo();\n            }\n\n            // 无定位时 , ; \n\n            return;\n\n        }\n\n\n        $scope.markLocation = function() {\n\n            if (marker) return;\n\n            marker = $map.mapMarker(0, 0, $scope.station.name);\n            marker.enableDragging();\n\n            map.addOverlay(marker);\n\n            $scope.op.toNewLocation = true;\n\n            map.addEventListener('mousemove', moveMarker);\n            map.addEventListener('click', toLocationSystem)\n\n        }\n\n        // 移动定位把;\n        function moveMarker(e) {\n            marker && marker.setPosition(e.point)\n        }\n\n\n        // 初始定位,松开移动 , 坐落 定位把 位置; \n        function toLocationSystem() {\n\n            openWinInfo();\n\n            map.removeEventListener(\"mousemove\", moveMarker);\n            map.removeEventListener(\"click\", toLocationSystem);\n\n        }\n\n        function openWinInfo() {\n            if (!infoWindow) {\n                $http({\n                    url: \"athena/dastation/prop_map_location.html\",\n                    cache: $templateCache\n                }).success(function(html) {\n                    infoWindow = new BMap.InfoWindow($compile(html.replace(/(\\n)+|(\\r)+/g, \"\"))($scope).get(0), {\n                        enableCloseOnClick: false,\n                        enableAutoPan: false\n                    });\n\n                    marker.addEventListener(\"click\", function() {\n                        marker.openInfoWindow(infoWindow, marker.point)\n                    });\n                    marker.addEventListener(\"mouseup\", openWinInfo);\n\n                    marker.openInfoWindow(infoWindow, marker.point)\n\n                })\n\n            } else {\n                marker.openInfoWindow(infoWindow, marker.point)\n            }\n\n\n            $map.getLocation(marker.point, function(result) {\n                $scope.$apply(function() {\n                    angular.extend($scope.msg, marker.point, {\n                        address: result.address\n                    })\n                })\n            });\n\n            // marker.openInfoWindow( infoWindow , marker.point)\n        }\n\n\n        // 确定位置; \n        $scope.locatedSation = function() {\n\n            var d = {\n                uuid: $scope.station.uuid,\n                longitude: marker.point.lng,\n                latitude: marker.point.lat\n            };\n\n            $source.$system.put(d, function(resp) {\n                marker.disableDragging();\n                $scope.op.toNewLocation = false;\n                angular.extend($scope.station, d);\n                angular.alert(\"定位成功!\")\n\n            });\n\n        }\n\n        // 移动 ; 使 定位把 可移动 ; \n        $scope.letMarkerMove = function() {\n            marker.enableDragging();\n            $scope.op.toNewLocation = true;\n            map.removeEventListener(\"mousemove\", moveMarker);\n            map.removeEventListener(\"click\", toLocationSystem);\n        }\n\n\n        //  删除marker ,若station有坐标也删除 staation定位; \n        $scope.delMarker = function() {\n\n            if (!marker) return;\n\n            marker.removeEventListener('click');\n            marker.removeEventListener('mouseup', openWinInfo);\n\n            marker = null;\n            infoWindow = null;\n\n            if ($scope.station.latitude) {\n                var d = {\n                    uuid: $scope.station.uuid,\n                    longitude: \"\",\n                    latitude: \"\"   //  0 0 坐标既是 删除 坐标位置, 易出 bug ; \n                };\n                $source.$system.put(d, function() {\n                    $scope.station.longitude = 0;\n                    $scope.station.latitude = 0;\n                    map.clearOverlays();\n                    angular.alert(\"成功移除定位!\");\n\n                })\n            } else {\n                map.clearOverlays();\n            }\n        }\n\n    }]) \n/* Directives */\n// All the directives rely on jQuery.\n\n \n\n\n\n    angular.module('app.directives', ['pascalprecht.translate'])\n\n    // popwin = \"templateUrl\"\n    // 主键默认 为  id ;  为其他是 需要设置 pk = \"uuid||xxx\" 其他值 ; \n    //  { pk , prop }   fa fa-pencil    glyphicon  glyphicon-edit    text-muted\n    .directive(\"popwin\", [\"$compile\", \"$templateCache\", \"$http\", function($compile, $templateCache, $http ) {\n\n        return {\n            restrict: \"E\",\n            require: \"?^ngModel\",\n            replace:true,\n            scope: {},\n            // template: ' <a class=\" text-muted  {{:: __$$icon || \\'glyphicon  glyphicon-edit\\' }} m-l-xs  \"  popover-placement=\"bottom\"  popover-template =\" pop.templateUrl \"  popover-title=\" {{ pop.title }}\" />',\n            template: ' <a class=\" text-muted   fa fa-pencil  m-l-xs  {{::__$classfor}} \"  popover-is-open=\"isOpen\" popover-placement=\"bottom\"  popover-template =\" pop.templateUrl \"  popover-title=\" {{ pop.title }}\" />',\n            link: function($scope, $ele, $attrs, $model) {\n\n                $scope.__$classfor = $attrs.classfor ; \n                \n                $scope.isOpen = false ;\n                $scope.pop = {\n                    templateUrl: \"athena/debris/_edit_field.html\"\n                };\n\n                var prop = $attrs.prop;\n                var idObj = {},\n                    idkey;\n\n                $model.$formatters.push(function(v) {\n                     if(!v){\n                        return ; \n                     }\n                    idkey = $attrs.pk || \"id\",\n                        idObj[idkey] = v[idkey];\n                    $scope.$ov = {\n                        value: v[prop]\n                    };\n\n                });\n\n                $scope.done = function() {\n\n                    idObj[prop] = $scope.$ov.value;\n\n                    $ele.parent().scope()[$attrs.handler](idObj).then(function() {\n\n                        $model.$modelValue[prop] = $scope.$ov.value;\n                        $model.$commitViewValue();\n                        $scope.isOpen = false ;\n                    });\n                };\n\n                $scope.cancel = function(){\n                    $scope.isOpen = false ;\n                }\n\n            }\n        }\n\n\n\n    }])\n\n\n    .directive(\n        'uiModule', ['MODULE_CONFIG', 'uiLoad', '$compile',\n            function(MODULE_CONFIG, uiLoad, $compile) {\n                return {\n                    restrict: 'A',\n                    compile: function(el, attrs) {\n                        var contents = el.contents().clone();\n                        return function(scope, el, attrs) {\n                            el.contents().remove();\n                            uiLoad.load(MODULE_CONFIG[attrs.uiModule])\n                                .then(function() {\n                                    $compile(contents)(scope,\n                                        function(clonedElement, scope) {\n\n                                            if (attrs.to) {\n                                                $(attrs.to).append(clonedElement)\n                                            } else {\n                                                el.append(clonedElement);\n                                            }\n\n                                        });\n                                });\n                        }\n                    }\n                };\n            }\n        ])\n\n\n\n    .directive('uiShift', ['$timeout', function($timeout) {\n        return {\n            restrict: 'A',\n            link: function(scope, el, attr) {\n                // get the $prev or $parent of this el\n                var _el = $(el),\n                    _window = $(window),\n                    prev = _el.prev(),\n                    parent, width = _window\n                    .width();\n\n                !prev.length && (parent = _el.parent());\n\n                function sm() {\n                    $timeout(function() {\n                        var method = attr.uiShift;\n                        var target = attr.target;\n                        _el.hasClass('in') || _el[method](target).addClass('in');\n                    });\n                }\n\n                function md() {\n                    parent && parent['prepend'](el);\n                    !parent && _el['insertAfter'](prev);\n                    _el.removeClass('in');\n                }\n\n                (width < 768 && sm()) || md();\n\n                _window.resize(function() {\n                    if (width !== _window.width()) {\n                        $timeout(function() {\n                            (_window.width() < 768 && sm()) || md();\n                            width = _window.width();\n                        });\n                    }\n                });\n            }\n        };\n    }])\n\n    .directive('uiToggleClass', ['$timeout', '$document', function($timeout, $document) {\n            return {\n                restrict: 'AC',\n                link: function(scope, el, attr) {\n                    el.on('click', function(e) {\n                        e.preventDefault();\n                        var classes = attr.uiToggleClass.split(','),\n                            targets = (attr.target && attr.target\n                                .split(',')) || Array(el),\n                            key = 0;\n                        angular.forEach(classes, function(_class) {\n                            var target = targets[(targets.length && key)];\n                            (_class.indexOf('*') !== -1) && magic(_class, target);\n                            $(target).toggleClass(_class);\n                            key++;\n                        });\n                        $(el).toggleClass('active');\n\n                        function magic(_class, target) {\n                            var patt = new RegExp('\\\\s' + _class.replace(/\\*/g,\n                                    '[A-Za-z0-9-_]+')\n                                .split(' ')\n                                .join('\\\\s|\\\\s') + '\\\\s', 'g');\n                            var cn = ' ' + $(target)[0].className + ' ';\n                            while (patt.test(cn)) {\n                                cn = cn.replace(patt, ' ');\n                            }\n                            $(target)[0].className = $.trim(cn);\n                        }\n                    });\n                }\n            };\n        }])\n        .directive('uiNav', ['$timeout', function($timeout) {\n            return {\n                restrict: 'AC',\n                link: function(scope, el, attr) {\n                    var _window = $(window),\n                        _mb = 768,\n                        wrap = $('.app-aside'),\n                        next, backdrop = '.dropdown-backdrop';\n                    // unfolded\n                    el.on('click', 'a', function(e) {\n                        next && next.trigger('mouseleave.nav');\n                        var _this = $(this);\n                        _this.parent().siblings(\".active\")\n                            .toggleClass('active');\n                        _this.next().is('ul') && _this.parent().toggleClass('active') && e.preventDefault();\n                        // mobile\n                        _this.next().is('ul') || ((_window.width() < _mb) && $('.app-aside')\n                            .removeClass('show off-screen'));\n                    });\n\n                    // folded & fixed\n                    el.on('mouseenter', 'a', function(e) {\n                        next && next.trigger('mouseleave.nav');\n\n                        if (!$('.app-aside-fixed.app-aside-folded').length || (_window.width() < _mb))\n                            return;\n                        var _this = $(e.target),\n                            top, w_h = $(window).height(),\n                            offset = 50,\n                            min = 150;\n\n                        !_this.is('a') && (_this = _this.closest('a'));\n                        if (_this.next().is('ul')) {\n                            next = _this.next();\n                        } else {\n                            return;\n                        }\n\n                        _this.parent().addClass('active');\n                        top = _this.parent().position().top + offset;\n                        next.css('top', top);\n                        if (top + next.height() > w_h) {\n                            next.css('bottom', 0);\n                        }\n                        if (top + min > w_h) {\n                            next.css('bottom', w_h - top - offset).css('top',\n                                'auto');\n                        }\n                        next.appendTo(wrap);\n\n                        next.on('mouseleave.nav', function(e) {\n                            $(backdrop).remove();\n                            next.appendTo(_this.parent());\n                            next.off('mouseleave.nav').css('top', 'auto')\n                                .css('bottom', 'auto');\n                            _this.parent().removeClass('active');\n                        });\n\n                        $('.smart').length && $('<div class=\"dropdown-backdrop\"/>')\n                            .insertAfter('.app-aside').on('click',\n                                function(next) {\n                                    next\n                                        && next\n                                        .trigger('mouseleave.nav');\n                                });\n\n                    });\n\n                    wrap.on('mouseleave', function(e) {\n                        next && next.trigger('mouseleave.nav');\n                    });\n                }\n            };\n        }])\n        .directive('uiScroll', ['$location', '$anchorScroll',\n            function($location, $anchorScroll) {\n                return {\n                    restrict: 'AC',\n                    link: function(scope, el, attr) {\n                        el.on('click', function(e) {\n                            console.log(attr.uiScroll);\n                            $location.hash(attr.uiScroll);\n                            $anchorScroll();\n                        });\n                    }\n\n                };\n            }\n        ])\n        .directive('uiFullscreen', ['uiLoad', function(uiLoad) {\n            return {\n                restrict: 'AC',\n                template: '<i class=\"fa fa-expand fa-fw text\"></i><i class=\"fa fa-compress fa-fw text-active\"></i>',\n                link: function(scope, el, attr) {\n                    el.addClass('hide');\n                    uiLoad.load('lib/js/screenfull.min.js').then(function() {\n                        if (screenfull.enabled) {\n                            el.removeClass('hide');\n                        }\n                        el.on('click', function() {\n                            var target;\n                            attr.target && (target = $(attr.target)[0]);\n                            el.toggleClass('active');\n                            screenfull.toggle(target);\n                        });\n                    });\n                }\n            };\n        }])\n        // ajax 加载时 动作条; \n\n\n\n    // state 切换是动作条; \n    .directive('uiButterbar', ['$rootScope', '$location', '$anchorScroll',\n\n            function($rootScope, $location, $anchorScroll) {\n                return {\n                    restrict: 'AC',\n                    template: '<span class=\"bar\" ></span>',\n                    link: function(scope, el, attrs) {\n                        el.addClass('butterbar hide');\n\n\n                        scope.$on('$stateChangeStart', function(event) {\n                            $location.hash('app');\n                            $anchorScroll();\n                            el.removeClass('hide').addClass('active');\n                        });\n                        scope.$on('$stateChangeSuccess', function(event, toState, toParams, fromState) {\n                            event.targetScope.$watch(\n                                '$viewContentLoaded',\n                                function() {\n                                    el.addClass('hide').removeClass('active');\n                                })\n                        });\n                    }\n                };\n            }\n        ])\n        .directive('setNgAnimate', ['$animate', function($animate) {\n            return {\n                link: function($scope, $element, $attrs) {\n                    $scope.$watch(function() {\n                        return $scope.$eval($attrs.setNgAnimate,\n                            $scope);\n                    }, function(valnew, valold) {\n                        $animate.enabled(!!valnew, $element);\n                    });\n                }\n            };\n        }])\n\n    // =================================================================================\n\n    .directive('draggable', [\"$document\", function($document) {\n        return function(scope, element, attr) {\n\n            var startX = 0,\n                startY = 0,\n                x = 0,\n                y = 0;\n\n            element.css({\n                position: 'relative',\n                border: '1px solid red',\n                backgroundColor: 'lightgrey',\n                cursor: 'pointer'\n            });\n\n            element.on('mousedown', function(event) {\n                // Prevent default dragging of selected\n                // content\n                event.preventDefault();\n                startX = event.pageX - x;\n                startY = event.pageY - y;\n                $document.on('mousemove', mousemove);\n                $document.on('mouseup', mouseup);\n            });\n\n            function mousemove(event) {\n                y = event.pageY - startY;\n                x = event.pageX - startX;\n                element.css({\n                    top: y + 'px',\n                    left: x + 'px'\n                });\n            }\n\n            function mouseup() {\n                $document.unbind('mousemove', mousemove);\n                $document.unbind('mouseup', mouseup);\n            }\n        };\n    }])\n\n\n\n    .directive(\"token\", [\"$compile\", \"$timeout\", function($compile, $timeout) {\n        // disabled\n        var spinner = '<i class=\"fa fa-spin hide fa-spinner pull-right\" ></i>';\n        return {\n            restrict: \"A\",\n            require: [\"?^ngDisabled\"],\n            link: function(scope, $ele, attrs, fn) { \n\n                $ele.css({\n                    opacity: 1\n                });\n\n                if (attrs.spinner != undefined) {\n                    $ele.append(spinner);\n                }\n\n                $ele.on(\"click\", function() {\n                    var that = this;\n\n                    that.disabled = true;\n                    $(that).find(\"i\").toggleClass(\"show\")\n\n                    $timeout(function() {\n                        that.disabled = false\n                        $(that).find(\"i\").toggleClass(\"show\")\n                    }, attrs.token || 2000)\n                });\n            }\n\n        }\n    }])\n\n\n    .directive(\"mark\", function() {\n        return {\n            restrict: 'E',\n            replace: true,\n            template: '<span class=\"text-danger font-bold\">*</span>',\n            link: function() {\n            }\n        };\n    })\n\n    .directive(\"centered\", [\"$timeout\", function($timeout) {\n        return function(scope, $element, attr) {\n\n            var wh, dh, st;\n            wh = $(window).height();\n            st = $(window).scrollTop();\n\n            $element.css({\n                display: \"none\"\n            });\n\n            $element.ready(function() {\n                $timeout(function() {\n                    dh = $element.height();\n                    dh ? $element.offset({\n                        top: dh < wh ? st + (wh - dh) / 2 : 0\n                    }) : $element.offset({\n                        top: 10\n                    });\n\n                    $element.css({\n                        display: \"block\"\n                    });\n                }, 200);\n            });\n        }\n    }])\n\n\n    .directive(\"wrap\", function() {\n\n        var x = '<div class=\"form-group\">' +\n            '<div class=\"col-sm-3 col-sm-offset-1 control-label\"></div></div>'\n\n        return function(s, e, a) {\n            e.wrap(x);\n        }\n    })\n\n\n    .directive(\"wrapL\", function() {\n        var x = '<div class=\"form-group\"><div class=\"col-sm-3 col-sm-offset-1 control-label\"></div></div>'\n\n        return function(s, e, a) {\n            e.wrap(x);\n        }\n    })\n\n    .directive('tlWrap', wrap)\n\n\n    .directive('tlWrapL', wrap)\n\n\n\n    .value(\"valid\", function($scope, $ele, $attrs, $translate, $compile, modelCtrl) {\n\n        console.log( 'valid attrs' , $attrs );\n\n        $scope.m = modelCtrl;\n\n        function v(type, value) {\n            var msg = $translate.instant(\"valid.\" + type);\n            if (value) {\n                msg = msg.replace(\"X\", value);\n            } \n            $ele.after(\n                $compile(\"<p class='text-danger m-n \" + type + \" '   ng-if=' m.$dirty &&  m.$error.\" + type + \"' >\" + msg + \" </p>\")($scope)\n            );\n\n        }\n\n        if ($attrs.required) {\n            if ($attrs.type) {\n                var msg = $translate.instant(\"valid.\" + $attrs.type);\n                $ele.after(\n                    $compile(\"<p class='text-danger' ng-if=' m.$dirty &&  m.$error.required' >\" + msg + \" </p>\")($scope)\n                );\n            } else {\n                v(\"required\");\n            }\n        } else {\n            // return ; // 无required ; 其他的就不验证了; \n        };\n\n        if ($attrs.type) {\n            v($attrs.type)\n        }\n\n        if ($attrs.max) { \n            v(\"max\", $attrs.max);\n        }\n\n        if ($attrs.min) {\n            v(\"min\", $attrs.min);\n        }\n\n        if ($attrs.ngMinlength) {\n            v(\"minlength\", $attrs.ngMinlength);\n        }\n        if ($attrs.ngMaxlength) {\n            v(\"maxlength\", $attrs.ngMaxlength);\n        }\n\n        if( $attrs.pattern || $attrs.ngPattern ){\n            v( \"pattern\");\n        }\n\n\n        // ui-validate , 自定义的验证; 带完成; ( require:\"uiValidate\"); \n    })\n\n\n\n    .directive(\"hexSimulator\", function() {\n        return {\n            restrict: \"E\",\n            scope: {\n                data: \"=\",\n                notation: \"=\"\n            },\n            replace: true,\n            template: // \"<div><div>xxxx</div>\" +\n                \"<div  class='row hex' > \" +\n                \"<ul class='col-xs-2 col-xs-offset-2 text-right'>\" +\n                \" <li ng-if='notation>16' >高16位</li><li>低16位</li></ul>\" +\n                \"<ul class=' col-xs-7 hex-ul ' > \" +\n                \"<li  ng-repeat='  b in byte track  by $index ' \" +\n                \"  class='btn'     ng-class='{ \\\"btn-default\\\":b==0,\\\"btn-info\\\":b==1\" +\n                \"   ,\\\"m-l-sm\\\": !($index%8) \" +\n                \" } '  \" +\n                \"       ng-click = ' updataHex(  $index ) '   popover='{{notation -$index-1 || 0 }}' popover-trigger='mouseenter'   >   \" +\n                \"  {{b}}    \" +\n                \" </li> \" +\n\n\n                \"</ul>\" +\n                \"</div> \",\n            // + \" </div>\",\n\n\n\n            link: function($scope, $ele, $attrs) {\n                //$scope.notation = 32;// 16 进制 ?;  //32位 ?\n                $scope.$watch(\"notation\", function(n, o) {\n                    // $scope.data = undefined ;\n                    if (n != o) $scope.data = undefined;\n                    $scope.byte = [];\n                    while ($scope.byte.length < n) {\n                        $scope.byte.unshift(0);\n                    }\n                });\n\n\n                $scope.$watch(\"data\", function(n, o) {\n                    $scope.byte = [];\n                    if (n) {\n                        var bytestr = parseInt(n, 16).toString(2);\n                        for (var i = 0; i < bytestr.length; ++i) {\n                            $scope.byte.push(parseInt(bytestr[i]));\n                        }\n                    }\n                    //  byte 位数不够, 不够的补 0 ;\n                    while ($scope.byte.length < $scope.notation) {\n                        $scope.byte.unshift(0);\n                    }\n                });\n\n                // butten 更新到input ;\n                $scope.updataHex = function(index) {\n                    $scope.byte[index] = $scope.byte[index] ? 0 : 1;\n                    $scope.data = parseInt($scope.byte.join(\"\"), 2).toString(16).toUpperCase();\n\n                };\n\n            }\n        }\n    })\n\n    .directive(\"nofocus\", function() {\n        return function(a, b) {\n            b.focus(function() {\n                $(this).blur();\n            })\n        }\n    })\n\n\n\n    // 指令默认 为A ;  清楚html 中的 script ; \n    .directive(\"html\", [\"$sce\", function($sce) {\n        return function($scope, $element, $attrs) {\n\n            var s = $($scope[$attrs.html]);\n            s.find('script').remove()\n            $element.html(s);\n        }\n\n    }])\n\n    // 挨个去修改 table 有点麻烦;  故用指令更改; \n    .directive(\"table\", function() {\n        return {\n            restrict: \"E\",\n            link: function($scope, $ele, $attr) {\n                /*  table-striped  */\n                //$ele.addClass(\"   table  table-hover  table-bordered  \"); \n            }\n        }\n    })\n\n    // 展示  template  t ;  device  d ; templatePoint  tp ;  profpoint pp ;  profalarm pa\n    //       project   proj ; station  s ;\n    //       的 属性;\n    .directive(\"params\", [\"$sys\", \"$translate\", function($sys, $translate) {\n\n        var a, b, c, e, f, p;\n\n        return function($scope, $ele, $attrs) {\n\n            var x = $scope.$eval($attrs.params),\n                params = angular.fromJson(x),\n                a = [];\n\n            // template ;\n            if ($scope.dm) {\n                e = $scope.dm,\n                    p = $sys.point,\n                    b = p[e.driver_id] // && p[e.driver_id][e.driver_ver];\n\n\n                if (!b) {\n                    console.error(\"无匹配的驱动数据: 驱动 id =  \", e.driver_id, \" 驱动版本 = \",\n                        e.driver_ver);\n                    $ele.text(x);\n                } else {\n                    angular.forEach(params, function(v, k) {\n                        // a.push( $translate.instant(\"params.\"+k)  +'='+  b[k][v] );\n                        //  非 select 的字段 匹配成原始值 ;\n                        c = b[k];\n                        //console.log(c , k);\n                        if (k == \"type_ex\") {\n                            a.push(\"额外配置值:\" + v)\n                        } else {\n                            f = $translate.instant(\"params.\" + k) + \":\" + (c ? c[v].k : v);\n                            a.push(f);\n                        }\n                    });\n                    $ele.text(a.join(\" , \"));\n                }\n            }\n\n\n        }\n    }])\n\n\n    .directive(\"panelclass\", function() {\n        return function($scope, $ele, $attrs) {\n            $ele.addClass(\" col-md-7 col-md-offset-2 col-sm-10 col-sm-offset-1  col-xs-12 m-t\")\n        }\n    })\n\n    //  初始化 得用 , $sys 中配置的 entituy ; \n    // 出现  nodejs 返回 字段为number 值是 不匹配 $sys 中配置的 key 时 ; 用 tl-defatul 转换成 string ; \n    //  此时 的 ng-change 要 换成  when-change ;  \n\n    // tl-default =  只能是  数字格式字符串 ,或 a.b.c .. 格式( 不存在是返回null ); \n    //  无意义的字符串 返回 undefined ; \n    // 可以完全不用这个指令 ;  为 model 在sysconfig 中 配置各个模型的模版 ( 配置上默认值)\n    .directive(\"tlDefault\", [\"$parse\", function($parse) {\n        return {\n            restrict: \"A\",\n            require: '?^ngModel',\n            priority: 110, //  mgModel 的权重为100 ; 该指令 要低于 ngmodel ; 确保 trans 有值;\n            link: function($scope, $ele, $attrs, modelControl) {\n\n\n                // tl-default =  可以是 自定义任何字符串; ,\n                //    或 a.b.c .. 格式( 不存在是返回null , 为 0 时 比较危险;  ); \n\n\n                var vo = $parse($attrs.tlDefault)($scope),\n                    v1 = $parse($attrs.tlDefault)($scope) || $attrs.tlDefault,\n                    mv = $parse($attrs.ngModel)($scope);\n\n                v1 = mv ? mv : v1;\n                if ($attrs.type == \"number\" || $attrs.type == \"Number\") {\n                    modelControl.$setViewValue(v1);\n                } else {\n                    modelControl.$setViewValue(v1 + \"\");\n\n                }\n                modelControl.$render();\n\n                // 触发 when-chage 监听; \n                if ($attrs.whenChange) {\n                    modelControl.$viewChangeListeners.push(function() {\n                        $scope.$eval($attrs.whenChange);\n                    });\n                }\n\n            }\n        }\n\n    }])\n\n    .directive(\"acrollLimit\", function() {\n        // 多少行监听滚动; \n        var t_offset = 2;\n        p_offset = 10;\n        // template 滚动; \n        function tempScroll() {\n\n        }\n\n        // point 滚动; \n        function pointScroll() {\n\n        }\n\n        return function($scope, $ele, $attr) {\n\n            if ($attr.$attr.temp) {\n                if ($scope.$index % t_offset === 0) {\n                    $ele.addClass(\"temp\")\n                }\n            } else {\n                if ($scope.$index % p_offset === 0) {\n                    $ele.addClass(\"point\");\n                }\n\n            }\n        }\n    })\n\n\n    .directive(\"loadMask\", [\"$timeout\", function($timeout) {\n\n        return {\n            restrict: \"A\",\n            link: function($scope, $element, $attrs) {\n\n                // $element.addClass(\"pos-rlt\");\n                var $maskDom = $('<i class=\"fa fa-spin fa-3x  text-info fa-spinner hide pos-abt\" style=\"top:50%;left:50%;z-index:9999\" ></i>'),\n                    wtcher = $attrs.loadMask || \"showMask\";\n\n\n                $element.append($maskDom);\n\n\n\n                $scope.$watch(wtcher, function(n) {\n                    (n ? show : hide)();\n\n                })\n\n                function show() {\n                    $maskDom.addClass(\"show\");\n                }\n\n                function hide() {\n                    $maskDom.removeClass(\"show\");\n                }\n            }\n        }\n\n    }])\n\n\n    .directive(\"tlSel\", function() {\n        return {\n            restrict: \"A\",\n            translate: true,\n            scope: true,\n            template: '<div class=\"form-group col-md-4\"><label>{{label}}</label> {{translate}} </div>',\n            link: function($scope, $ele, $attrs) {\n                alert(888)\n                $scope.label = $attrs.label;\n            }\n\n\n        }\n\n\n    })\n\n\n    // tl-wrap  tl-warp-l  指令控制器;  \n    //  {  width , label , label-width , left } ;\n    function wrap($compile, $translate, valid) {\n        return {\n            restrict: \"A\",\n            priority: 90,\n            require: '?^ngModel',\n            scope: {\n                label: \"@\"\n            },\n            link: function($scope, $ele, $attrs, modelCtrl) {\n\n                console.log($attrs.label)\n\n                var width = $attrs.width || ($attrs.tlWrapL && 9) || ($attrs.tlWrap && 8) || 8,\n                    offset = $attrs.offset || ($attrs.tlWrap && 1),\n                    labelWidth = $attrs.labelWidth || 3\n                    left = $attrs.hasOwnProperty('left'),\n\n                    label_text = $translate.instant( $attrs.label );;\n \n\n                var label = '<label class= \" col-sm-' + labelWidth + (!!offset ? ('col-sm-offset-' + offset) : \"\")\n                    //  + ( $attrs.required ? '' : 'm-l-n-xs' )\n                    + ' control-label \" ' + (left ? ' style= text-align:left ' : '') + '>' + ($attrs.required ? '<span class=\"text-danger font-bold\">*</span>' : '')\n\n                // +($attrs.required ? '' : \"&nbsp;\") + $attrs.label + '</label>',\n                +($attrs.required ? '' : \"&nbsp;\") +  label_text + '</label>',\n\n                    wrap_input = '<div class=\"form-group\" ><div class=\" col-sm-' + width + '\"></div></div>',\n\n                    cls;\n\n\n                cls = $ele.is(\"input , textarea , select\") ? \"form-control\" : \" no-border\";\n\n                $ele.addClass(cls).wrap(wrap_input);\n\n                $ele.parent().before(label);\n\n                modelCtrl && valid($scope, $ele, $attrs, $translate, $compile, modelCtrl);\n\n            }\n        }\n    }\n    wrap.$inject = [\"$compile\", \"$translate\", \"valid\"];\n\n\n\n \n//'use strict';\n\n/* Filters */\n// need load the moment.js to use this filter.\n\n \n\n\n    angular.module('app.filters', [])\n        .filter('fromNow', function() {\n            return function(date) {\n                return moment(date).fromNow();\n            }\n        })\n        .filter(\"hour\", function() {\n            return function(data) {\n                return data + \"时\"\n            }\n        })\n\n    .filter(\"log_cycle\", function() {\n        return function(data) {\n            if (!data) return \"不保存历史\";\n            if (data <= 60)\n                return data + \"秒\";\n            else {\n                return data / 60 + \"分钟\";\n            }\n        }\n    })\n\n    .filter(\"params\", [\"$sys\", \"$translate\", function($sys, $translate) {\n\n        return function(data) {\n            // console._log($translate.instant('th.station'));\n\n            var k, s;\n            data = angular.fromJson(data);\n            var ret = [];\n            for (k in data) {\n                s = $translate.instant(\"params.\" + k);\n                ret.push(s + \"=\" + data[k]);\n            }\n            return ret.join(\", \");\n        }\n    }])\n\n    .filter(\"pageLimit\", [\"$sys\", function($sys) {\n            var l = $sys.pager.itemsPerPage\n            return function(array, currentPage) {\n                s = (currentPage - 1) * l;\n                return array.slice(s, s + l)\n            }\n        }])\n        .filter(\"acrollLimit\", function() {\n            return function(array, start, end) {\n\n                return array;\n            }\n        })\n\n\n\n    .filter(\"driverValueTrans\", [\"$sys\", function($sys) {\n        var rel;\n        return function(k, v, type, version) {\n            console._log(k, \"---\", v, \"---\", type, \"----\", version);\n            // 实际上要根据 type 翻译;\n            if (type === \"device\") {\n                return $sys.device_modbus[k + \"\"] ? $sys.device_modbus[k + \"\"][v].k : v; // 实际应该是 $sys.device_modubs[version][k][v][k]\n            }\n\n            if (type === \"log\") {\n                return $sys.temp_point[0][k] ? $sys.temp_point[0][k][v].k : v;\n                //实际应为; \n\n            }\n            if (type === \"alarm\") {\n                return v //$sys                \n            }\n\n            return v;\n\n        }\n    }])\n \n/* Services\n *\n * */\n// Demonstrate how to register services   ___   $resource ,\n\n\n// ajax  响应 ,不会被拦截的响应 ;\n\n/**\n 修改 angualr-resource.js  源码 133 行, 增加put 方式;\n增加   getByPk:{method:\"GET\"} , 方法;\n*/\n \n\n\n    angular.module('app.services', [\"ngResource\"], function() {\n        ingorErr = {\n            'DEVICE_NOT_EXIST': true,\n            'ER_CONTACT_NOT_EXIST': true,\n            'ER_SYSTEM_HAS_NOT_BOUND': true,\n            'ACK_MESSAGE_NOT_EXIST': true,\n            \"ER_USER_NOT_EXIST\": true ,\n            \"ER_USER_EXIST\":true\n\n        };\n\n        // angular.rootUrl = 'http://localhost:8082/thinglinx/web/' ;\n        // angular.rootUrl = 'web/'; \n\n        angular.rootUrl = \"node/\"\n\n\n        // angular.rootUrl = ''; \n\n\n    })\n\n \n\n    .service('$source', ['$resource', function($resource) {\n\n\n        function $createSource(url, config1, config2) {\n            return $resource(angular.rootUrl + url, config1, config2);\n        }\n\n\n        this.$deviceModel = $createSource(\"devmodel/:pk\");\n        this.$dmPoint = $createSource(\"devmodel/points/:pk\");\n        this.$sysProfile = $createSource(\"profile/:pk\");\n        this.$sysLogTag = $createSource(\"profile/tags/:pk\");\n        this.$sysTag = $createSource(\"sysmodel/tags/:pk\");\n        this.$sysProfTrigger = $createSource(\"profile/triggers/:pk\");\n        this.$sysModel = $createSource(\"sysmodel/:pk\");\n        this.$sysDevice = $createSource(\"sysmodel/devices/:pk\");\n        this.$message = $createSource(\"sysmodel/messages/:pk\");\n        this.$contact = $createSource(\"system/contacts/:pk\");\n        this.$region = $createSource(\"region/:pk/:op\");\n\n        // account/admin?uuid 来判断 uuid is Exist\n        this.$account = $createSource(\"account/:pk\");\n\n        this.$role = $createSource(\"role/:pk\");\n        this.$driver = $createSource(\"driver/:type\");\n        this.$sub = $createSource(\"subscribe/:pk/:op\");\n\n        // http://faefae.com/:id/crate , { id:123}\n\n        //    sou: connent( sys联系人) , user( 用户) , \n        //  ? send : cell_phone , verify: code ;  \n        this.$note = $createSource(\"sms/:op/:sou\");\n\n        this.$common = $createSource(\"common/:op\", {}, {\n            // 验证 uuid ; \n            verifyUuid: {\n                params: {\n                    op: \"vuuid\"\n                }\n            },\n\n            // 验证 图片验证码; \n            verify: {\n                url: angular.rootUrl + \"common/verify\"\n            }\n\n        });\n\n        this.$user = $createSource(\"user/:pk/:op\", {}, {\n            login: {\n                url: angular.rootUrl + \"common/login\",\n                method: \"POST\"\n            },\n            logout: {\n                url: angular.rootUrl + \"user/logout\"\n            }\n        });\n\n        /// {pk:\"@pk\", userid:\"@userid\"} ,\n        this.$userGroup = $createSource(\"usergroup/:pk/:userid\", {}, {\n            queryUser: {\n                url: angular.rootUrl + \"usergroup/:pk/users\"\n            },\n\n        });\n\n        this.$ticket = $createSource(\"ticket/:system_id\");\n\n        this.$system = $createSource(\"system/:pk/:options/:proj_id\", {}, {\n            sync: {\n                method: \"GET\",\n                params: {\n                    options: \"sync\"\n                }\n            },\n            stop: {\n                method: \"GET\",\n                params: {\n                    cmd: \"stop\"\n                }\n            },\n            start: {\n                method: \"GET\",\n                params: {\n                    cmd: \"start\"\n                }\n\n            },\n            call: {\n                method: \"POST\"\n            },\n            active: {\n                params: {\n                    options: \"active\"\n                }\n            },\n            deactive: {\n                params: {\n                    options: \"deactive\"\n                }\n            },\n            assign: {\n                params: {\n                    options: \"assign\"\n                }\n            },\n            getDtuServer: {\n                method: \"GET\"\n            },\n\n            status: {\n                method: \"POST\",\n                params: {\n                    options: \"status\"\n                }\n            },\n            needSync: {\n                method: \"POST\",\n                params: {\n                    options: \"needsync\"\n                }\n            }\n        });\n\n        // 权限;\n        this.$permission = $createSource(\"permission/:source/:source_id/:group_id\")\n\n        this.$weChat = $createSource ( 'wechat' , {} ,  {\n            //生成服务器地址接口\n            createUrl:       { params: { method:\"get_wechat_server_address\" }  } ,\n            //查询微信服务器状态接口\n            getServerStatus: { params: { method:\"get_wechat_status\"         }  } ,\n            //激活服务器接口\n            //    menu=1,2,3\n            activeServer:    { params: { method:\"set_wechat_server\" }  } ,\n            //解除绑定\n            unBindServer:    { params: { method:\"unbind_wechat_server\" }  } ,\n            // getServerInfo ;\n            getServerInfo :  { params: { method: \"get_wechat_server_info\"}}\n            \n\n            \n        })\n\n\n    }])\n\n    .service('$show', ['$resource', function($resource) {\n\n        var live = angular.rootUrl + \"show/live/:uuid\",\n            liveWrite = angular.rootUrl + 'show/livewrite/:uuid', // uuid = system uid ;\n            // his = angular.rootUrl + \"show/history/:uuid\",   // uuid = system uid ;\n            his = angular.rootUrl + \"line/:uuid/:method\", // uuid = system uid ;\n            alarm = angular.rootUrl + \"show/alarm/:uuid/:op\"; // uuid = system uid ;\n\n\n        this.live = $resource(live);\n        this.his = $resource(his);\n\n        this.alarm = $resource(alarm, {}, {\n            conform: {\n                method: \"POST\",\n                params: {\n                    uuid: \"confirm\"\n                }\n            },\n            getConformMsg: {\n                params: {\n                    uuid: \"confirm\"\n                }\n            }\n        });\n        this.liveWrite = $resource(liveWrite); // 下置; \n\n\n\n    }])\n\n\n\n    // driver ;\n    // .factory(\"$driver\", function($resource) {\n    //     return $resource(angular.rootUrl + \"driver/:pk\", {}, {\n\n    //         // template , type =0 得到的是 driver最高版本;\n    //         getDriverList: {\n    //             params: {\n    //                 id: \"list\",\n    //                 type: 0\n    //             }\n    //         },\n\n    //         // station ; type = 1 ;  得到 dtu ;\n    //         getDtuList: {\n    //             params: {\n    //                 id: \"list\",\n    //                 type: 1\n    //             }\n    //         },  \n    //     })\n    // })\n\n\n\n    //==========================================================================\n    //==========================================================================\n    //==========================================================================\n    // js 命令;\n    .factory(\"jsorder\", [\"$sys\", \"$cookies\", function($sys, $cookies) {\n        return {\n            'login': function() {\n                // 跳到登录界面;\n                // if( !$sys.$debug ){\n                console.log($cookies);\n                window.location.hash = \"#/access/signin\";\n                // }\n            }\n        }\n    }])\n\n\n    .factory('Interceptor', [\"$q\", \"jsorder\", \"$location\", \"$anchorScroll\", \"$timeout\", \"$sys\", function($q, jsorder,\n        $location, $anchorScroll, $timeout, $sys) {\n\n        // 判断 是否有ajax加载 并显隐 动作条;\n        var ajax_times = 0,\n            _timeout, animat = false,\n            $dom = [];\n\n\n        return {\n            /* 四种拦截 key 是 固定的; */\n            // optional method    通过实现 request 方法拦截请求\n            'request': function(config) {\n               \n\n\n                // 添加区域字段;\n                // html 的不添加 local ;\n                // if (!/(.html)$/.test(config.url)) {\n\n                //     config.headers['Accept-Language'] = localStorage.NG_TRANSLATE_LANG_KEY || \"en\";\n                //     config.console = true;\n \n                // }   \n\n                return config || $q.when(config);\n\n            },\n            /*\n             // optional method  通过实现 requestError 方法拦截请求异常: 有时候一个请求发送失败或者被拦截器拒绝了\n             'requestError': function (rejection) {\n             // do something on request error\n             if (canRecover(rejection)) {\n             return responseOrNewPromise\n             }\n             return $q.reject(rejection);\n             }, */\n\n            // optional method   通过实现 response 方法拦截响应:\n            'response': function(response , a , b, c ) {\n\n                var resp = response.data ; \n\n                if (resp.err) {\n                    //alert( $err[response.data.err+'']|| response.data.err ); \n                    console.error(\"_ERR_:\" + resp.err);\n\n                    if (!ingorErr[resp.err]) {\n\n                        angular.alert({\n                            type: \"resp_err\",\n                            title: resp.err\n                        }); \n                    }\n                    throw resp ;\n                }\n\n                if (resp.total == 0 && resp.data.length == 0) {\n                    // angular.alert( { type:\"info\" , title:\"无返回数据\"});\n                }\n\n\n\n                //return response || $q.when(response); \n                if (resp.order) {\n\n                    jsorder[resp.order]();\n                }\n                return response;\n            },\n\n            // optional method  通过实现 responseError 方法拦截响应异常:\n            'responseError': function(response) {\n \n              \n                \n                return response;\n\n            }\n        }\n\n    }])\n\n    .factory(\"$brower\", [\"$window\", function($window) {\n\n        var brower = {};\n\n        var ua = navigator.userAgent.toLowerCase();\n        var s;\n        (s = ua.match(/rv:([\\d.]+)\\) like gecko/)) ? brower.ie = s[1]:\n            (s = ua.match(/msie ([\\d.]+)/)) ? brower.ie = s[1] :\n            (s = ua.match(/firefox\\/([\\d.]+)/)) ? brower.firefox = s[1] :\n            (s = ua.match(/chrome\\/([\\d.]+)/)) ? brower.chrome = s[1] :\n            (s = ua.match(/opera.([\\d.]+)/)) ? brower.opera = s[1] :\n            (s = ua.match(/version\\/([\\d.]+).*safari/)) ? brower.safari = s[1] : 0;\n\n        function isSmartDevice($window) {\n            // Adapted from http://www.detectmobilebrowers.com\n            var ua = $window['navigator']['userAgent'] || $window['navigator']['vendor'] || $window['opera'];\n            // Checks for iOs, Android, Blackberry, Opera Mini, and Windows mobile devices\n            return (/iPhone|iPod|iPad|Silk|Android|BlackBerry|Opera Mini|IEMobile/).test(ua);\n        }\n\n        brower.isSmart = isSmartDevice($window);\n\n        return brower;\n    }])\n\n\n\n\n\n    .service(\"$map\", [\"$http\", \"$templateCache\", \"$sys\", \"$filter\", \"$interpolate\", function($http, $templateCache, $sys, $filter, $interpolate) {\n\n        var $map = this;\n        // dom_id 无需加 # 号 ;\n        function initMap(Dom_id) {\n            // 百度地图API功能\n\n            var map = new BMap.Map(Dom_id); // 创建Map实例\n\n\n            map.centerAndZoom(new BMap.Point(116.404, 39.915), 8);\n\n            // 初始化地图,设置中心点坐标和地图级别 \n\n            //map.addControl(new BMap.MapTypeControl()); //添加地图类型控件\n\n            //map.setCurrentCity(\"北京\");          // 设置地图显示的城市 此项是必须设置的\n\n            //开启鼠标滚轮缩放\n            map.enableScrollWheelZoom(true);\n            // 左上角，添加比例尺\n            var top_left_control = new BMap.ScaleControl({\n                anchor: BMAP_ANCHOR_TOP_LEFT\n            });\n            //左上角，添加默认缩放平移控件\n            var top_left_navigation = new BMap.NavigationControl();\n\n            //右上角，仅包含平移和缩放按钮\n            var top_right_navigation = new BMap.NavigationControl({\n                anchor: BMAP_ANCHOR_TOP_RIGHT,\n                type: BMAP_NAVIGATION_CONTROL_SMALL\n            });\n            /*缩放控件type有四种类型:\n             BMAP_NAVIGATION_CONTROL_SMALL：仅包含平移和缩放按钮；BMAP_NAVIGATION_CONTROL_PAN:仅包含平移按钮；BMAP_NAVIGATION_CONTROL_ZOOM：仅包含缩放按钮*/\n            map.addControl(top_left_control);\n            map.addControl(top_left_navigation);\n            // map.addControl(top_right_navigation);\n\n            \n            // var cr = new BMap.CopyrightControl({anchor: BMAP_ANCHOR_TOP_RIGHT});   //设置版权控件位置\n            // map.addControl(cr); //添加版权控件\n\n            // var bs = map.getBounds();   //返回地图可视区域\n            // cr.addCopyright({id: 1, content: \"<a href='#' style='font-size:20px;background:yellow'>我是自定义版权控件呀</a>\", bounds: bs}); \n\n\n\n            return map;\n        }\n\n        // flushMarkers 清除所有覆盖物 , 添加新覆盖物;\n\n        this.flushMarkers = function(map, stations) {\n            map.clearOverlays();\n            addMarkers2map(map, createDAPoint(stations));\n\n        }\n\n        this.addSearch = function(map, inputid, resultid) {\n            function G(id) {\n                return document.getElementById(id);\n            }\n\n            //建立一个自动完成的对象\n            var ac = new BMap.Autocomplete({\n                \"input\": inputid,\n                \"location\": map\n            });\n            //鼠标放在下拉列表上的事件\n            ac.addEventListener(\"onhighlight\", function(e) {\n                var str = \"\";\n                var _value = e.fromitem.value;\n                var value = \"\";\n                if (e.fromitem.index > -1) {\n                    value = _value.province + _value.city + _value.district + _value.street + _value.business;\n                }\n                str = \"FromItem<br />index = \" + e.fromitem.index + \"<br />value = \" + value;\n\n                value = \"\";\n                if (e.toitem.index > -1) {\n                    _value = e.toitem.value;\n                    value = _value.province + _value.city + _value.district + _value.street + _value.business;\n                }\n                str += \"<br />ToItem<br />index = \" + e.toitem.index + \"<br />value = \" + value;\n                G(\"searchResultPanel\").innerHTML = str;\n            });\n\n            var myValue;\n            //鼠标点击下拉列表后的事件\n            ac.addEventListener(\"onconfirm\", function(e) {\n                var _value = e.item.value;\n                myValue = _value.province + _value.city + _value.district + _value.street + _value.business;\n                G(resultid).innerHTML = \"onconfirm<br />index = \" + e.item.index + \"<br />myValue = \" + myValue;\n\n                setPlace();\n            });\n\n            function setPlace() {\n                map.clearOverlays(); //清除地图上所有覆盖物\n                function myFun() {\n                    var pp = local.getResults().getPoi(0).point; //获取第一个智能搜索的结果\n\n                    map.centerAndZoom(pp, 18);\n                    // map.addOverlay(new BMap.Marker(pp));    //添加标注\n                }\n                var local = new BMap.LocalSearch(map, { //智能搜索\n                    onSearchComplete: myFun\n                });\n                local.search(myValue);\n            }\n        }\n\n        // 地图展示 一个proj下的所有已定位的是station ;\n        /**\n           必要 :$scope , sations , domid , h_offset ;\n           非必要: projName ;\n        */\n        this.createMap = function($scope, domid, h_offset) {\n\n            var $mapdom, marks, map;\n\n            // $mapdom =  typeof domid =='string'? $(\"#\" + domid) : $( domid );\n\n            $mapdom = $(\"#\"+ domid );\n\n            // return  initMap( domid ) \n            // 取消  resize 事件 ;\n            $scope.$on(\"$destroy\", function() {\n                $(window).off(\"resize\");\n            })\n            $(window).on(\"resize\", function() {\n                $mapdom.css({\n                    height: window.innerHeight - h_offset\n                });\n            });\n            $mapdom.css({\n                height: window.innerHeight - h_offset\n            });\n\n            map = initMap(domid);\n\n            return map;\n\n        }\n\n        // var myGeo = new BMap.Geocoder();\n        //    // // 根据坐标得到地址描述\n        //    myGeo.getLocation(new BMap.Point($scope.system.longitude, $scope.system.latitude), function(result) {\n        //        if (result) {\n        //            console.log(result);\n        //            $scope.$apply(function() {\n        //                $scope.system.map_address = result.address;\n        //            })\n        //        }\n        //    });\n\n        var myGeo = new BMap.Geocoder();\n        this.getLocation = function(mapPoint, cb) {\n\n            myGeo.getLocation(mapPoint, cb);\n        }\n\n\n        // stations = [ { latitude , longitude , name ,... } ,...]\n        //  mapCluster :bol ,  是否聚合 点; \n\n        this.createDAPoint2Map = function(map, stations, clickHandler, mapCluster) {\n\n            var marks = [],\n                that = this;\n\n            map.clearOverlays();\n\n            stations = stations instanceof Array ? stations : [stations];\n\n            angular.forEach(stations, function(v, i) {\n                if (!v.latitude) return;\n\n                var mark = that.mapMarker(v.latitude, v.longitude, v.name);\n                mark.system = v;\n\n                clickHandler && mark.addEventListener('click', clickHandler);\n\n                map.addOverlay(mark);\n\n                marks.push(mark);\n            });\n\n            // 设置中心; \n            centeredMap(map, marks);\n            // 聚合 点; \n            !mapCluster && 　new BMapLib.MarkerClusterer(map, {\n                markers: marks\n            })\n\n            return marks;\n        }\n\n        // marker点;\n        this.mapMarker = function(x, y, text) {\n\n            var mark = new BMap.Marker(new BMap.Point(y, x));\n            if (text) {\n                label = new BMap.Label(text, {\n                    offset: new BMap.Size(20, -10)\n                });\n                label.setStyle({\n                    'border-width': 0,\n                    'font-weight': 700\n                });\n                mark.setLabel(label);\n            }\n\n            return mark;\n        }\n\n        // 设置 map 中心点; \n        function centeredMap(map, markers) {\n\n            if (markers && markers[0]) {\n                map.centerAndZoom(markers[0].point, 12);\n            } else {\n                var myCity = new BMap.LocalCity();\n                myCity.get(function(result) {\n                    map.centerAndZoom(result.center, 12);\n                    map.setCurrentCity(result.name);\n                });\n            }\n\n        }\n\n        // 展示 system 属性 窗口;\n        this.propWin = function() {\n                var that = this;\n                // 动态生成 infoWindow ;\n\n                $http({\n                        method: \"GET\",\n                        url: \"athena/dastation/prop_map_popup.html\",\n                        cache: $templateCache\n                    })\n                    .success(function(a) {\n                        var s = angular.copy(station);\n                        // s.proj_name = s.proj_name || projName; // ;\n                        s.create_time = $filter(\"date\")(s.create_time, \"yyyy-MM-dd hh:mm:ss\");\n\n                        // system 类型;\n                        // s.type =  $sys.stationtype.values[s.type].k ;\n\n                        var str = $interpolate(a)(s);\n                        //console.log(str , $(str).html()  );\n\n                        var infoWindow = new BMap.InfoWindow(str)\n                        that.openInfoWindow(infoWindow);\n                        //  删除 手机 小图片;\n\n\n                    }).error(function(b) {\n                        alert(\"error\");\n                        throw (\"加载异常  athena/views/dastation/prop_map_popup.html?\");\n                    })\n            }\n            // 定位窗口;\n            // 编辑定位窗口; \n\n\n\n    }])\n\n    .factory(\"$workerConfig\", function() {\n            return {\n                baseUrl: 'athena/webworker/'\n            }\n        })\n        .factory('$webWorker', ['$q', '$workerConfig', function($q, $workerConfig) {\n\n            return function(jsFile) {\n                var worker = new Worker($workerConfig.baseUrl + jsFile);\n\n                var defer = $q.defer();\n\n                worker.addEventListener('message', function(e) {\n                    defer.resolve(e.data);\n                }, false);\n\n                return {\n                    postMessage: function() {\n                        defer = $q.defer();\n                        worker.postMessage(arguments);\n                        return defer.promise;\n                    },\n                    terminate: function() {\n                        worker.terminate();\n                    }\n\n                };\n\n            }\n\n        }])\n\n\n    ;\n \n \n\nangular.module('app.sysconfig', [], function() {})\n\n.service(\"$sys\", [\"$translate\", function($translate) {\n\n        // 读写属性; \n    var access = [ \n            {     k: \"Read\",  v: 0   }, \n            {   k: \"Write\",   v: 1 }, \n            {   k: \"ReadWrite\",  v: 2  }\n        ],\n\n        hlbyte =  [ {  k: \"HightByte\",   v: 0   }, \n                    {  k: \"LowByte\",  v: 1  }] \n\n        ;\n\n\n    return {\n\n        // systemo 模式: manage , unmanage ,unknown ; \n        manageMode: 1,\n\n        itemsPerPage: 20,\n\n\n        state_inter_time: 60000, // system 在线状态更新 周期; \n\n\n        yesOrNo: [{\n            k: \"是\",\n            v: 1\n        }, {\n            k: \"否\",\n            v: 0\n        }],\n\n        sysState: {\n            '激活': 1,\n            \"未激活\": [0, 2]\n        },\n\n        permissionDesc: {\n            \"READ_DATA\": \"读取系统变量的数据\",\n            \"WRITE_DATA\": \"将数据写入系统变量中\",\n            \"ALARM_VIEW\": \"查看系统产生的报警\",\n            \"ACK_ALARM\": \"确认系统产生的报警\",\n            \"SYSTEM_MANAGE\": \"创建、删除系统，修改系统基本信息\",\n            \"TICKET_MANAGE\": \"创建及删除系统的ticket\",\n            \"REGION_USER_MANAGE\": \"为区域创建用户，以及管理用户权限\",\n            \"SYN_CONFIG\": \"将系统工程同步到DAServer或网关\",\n            \"SYSTEM_CONTROL\": \"系统数据下置及召唤，系统的激活及失效，切换系统配置项，保存网络参数等\",\n\n\n            \"REGION_MANAGE\": \"创建、删除区域，修改区域基本信息\",\n            \"MODEL_MANAGE\": \"创建、修改以及删除系统模型和设备模型\",\n            \"USER_MANAGE\": \"创建、删除用户，修改用户基本信息以及管理用户权限\",\n            \"ROLE_MANAGE\": \"创建、修改以及删除角色\"\n\n        },\n\n        // 账户权限; \n        accountP: [\n            \"REGION_MANAGE\", // 区域管理\n            \"MODEL_MANAGE\", //模型管理\n            // \"GROUP_MANAGE\", //用户组管理\n            \"USER_MANAGE\", //用户管理\n            \"ROLE_MANAGE\", //角色管理\n        ],\n\n\n\n        // 区域权限; \n        regionP: [\n\n            \"READ_DATA\", //读数据\n            \"WRITE_DATA\", //写数据\n            \"ALARM_VIEW\", //报警查看\n            \"ACK_ALARM\", //报警确认\n            \"SYSTEM_MANAGE\", //系统管理\n            \"TICKET_MANAGE\", //ticket管理\n            \"REGION_USER_MANAGE\", //区域用户管理\n            \"SYN_CONFIG\", //系统配置 \n            \"SYSTEM_CONTROL\" //系统控制\n        ],\n\n\n        // 角色类型; \n        roleType: {\n            '账户角色': 0,\n            \"区域角色\": 1\n        },\n\n\n        // application  首页;\n        rootState: \"app.m_region\",\n        // 分页数据; \n\n        // 报警类型;\n        alarmtype: {\n            defalut: 0,\n            values: [{\n                    k: \"越限值报警 > \",\n                    v: 0\n                }, {\n                    k: \"越限值报警 >= \",\n                    v: 1\n                }, {\n                    k: \"越限值报警 <\",\n                    v: 2\n                }, {\n                    k: \"越限值报警 <=\",\n                    v: 3\n                },\n\n                {\n                    k: \"变化报警  = \",\n                    v: 4\n                }, {\n                    k: \"变化报警 !=\",\n                    v: 5\n                },\n\n                /*{k:\"位报警 &&\"     , v:6 } ,\n                {k:\"位报警 ||\"     , v:7 } ,\n                {k:\"位报警 xor\"    , v:8 } ,\n                {k:\"位报警 not &&\" , v:9 } ,\n                {k:\"位报警 not || \"   , v:10 } ,\n                {k:\"位报警 not xor\"  , v:11 }*/\n\n                {\n                    k: \"位报警 按位与\",\n                    v: 6\n                }, {\n                    k: \"位报警 按位或\",\n                    v: 7\n                }, {\n                    k: \"位报警 按位异或\",\n                    v: 8\n                }, {\n                    k: \"位报警 按位与 取反\",\n                    v: 9\n                }, {\n                    k: \"位报警 按位或 取反 \",\n                    v: 10\n                }, {\n                    k: \"位报警 按位异或 取反\",\n                    v: 11\n                }\n\n            ]\n        },\n\n\n        // 报警源  alarmorigin\n        trigger: {\n            origin_default: '0',\n            origin: {\n                0: \"ThingLinx Cloud\",\n                //                jjw 去掉Remote Gateway\n                //                1: \"Remote Gateway\"\n            },\n\n            action_default: 'alarm',\n            action: {\n                'alarm': \"Alarm\",\n                //\"event\": \"Event\",\n                //'task': \"Task\"\n            },\n            // 1:\"事件\" , 2:\"任务\"} , \n\n            action_alarm: \"alarm\",\n            action_event: \"event\",\n            action_task: \"task\",\n\n            type_default: '1',\n            type: {\n                0: \"状态持续触发\",\n                1: \"状态变化触发\"\n            },\n\n            // {\"PV\":\"PV\" ,null:\"输入值\"},  \n            // fn 限制不可为 字符串的 \"null\" 故 改成 array 形式; \n            fn_default: \"PV\",\n            fn: {\n                \"PV\": \"PV\"\n            },\n\n\n            op_default: \">\",\n            op: [\">\", \"<\", \"==\", \">=\", \"<=\", \"!=\", \"&\", \"|\", \"xor\"],\n\n\n            // op:[ \">\" , \"<\" , \"=\" ,\">=\" , \"<=\" ,\"!=\" , \"&\" ,\"|\" ,\"!\" ,\"~\"],\n\n            verb_default: 'and',\n            verb: ['and', 'or'],\n\n\n            severity_default: \"0\",\n            severity: {\n                '0': '不确定的', //'Indeterminate',\n                '1': '紧急的', //'Critical ',\n                '2': '重要的', //'Major ',\n                '3': '一般的', //'Minor ',\n                '4': '警告', //'Warning',\n                // '5':'Cleared'\n            },\n\n            class_id_default: \"1\",\n            class_id: ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9'], // 类型;        \n\n            desc: \"\"\n        },\n\n        // 新建 trigger 时 conditons [] 中 的值 使用该模版; \n        trigger_c: { //verb : null,\n            exp: {\n                left: {\n                    fn: 'PV',\n                    args: null\n                }, //   fn: pv  || null ; \n                op: \">=\",\n                right: {\n                    fn: 'PV',\n                    args: null\n                }\n            }\n        },\n\n        sysManageMode: 1,\n        sysModelMode: {\n            default: \"1\",\n            values: {\n                // \"1\": \"Managed\",\n                // \"2\": \"UnManaged\"\n                // \n                \"1\": \"托管模式\",\n                \"2\": \"非托管模式\"\n            }\n        },\n\n        save_his: {\n            desc: \" prof pint 是否保存历史!\",\n            default: 0,\n            values: [{\n                v: 0,\n                k: \"不保存历史\"\n            }, {\n                v: 1,\n                k: \"保存历史\"\n            }]\n        },\n\n        log_period: {\n            desc: \" prof pint 的 日志周期!\",\n            //            jjw\n            default: 300,\n            values: [{\n                v: '60',\n                k: \"1分钟\"\n            }, {\n                v: '300',\n                k: \"5分钟\"\n            }, {\n                v: '600',\n                k: \"10分钟\"\n            }, {\n                v: '900',\n                k: \"15分钟\"\n            }, {\n                v: '1800',\n                k: \"30分钟\"\n            }, {\n                v: '3600',\n                k: \"60分钟\"\n            }]\n        },\n        log_type: {\n            //            jjw\n            default: \"\",\n            values: {\n                //                \"RAW\": \"保存原始记录\",\n                //                \"CHANGED\": \"只在变化时存储\"\n                //                jjw\n                \"RAW\": \"周期保存\",\n                \"CHANGED\": \"变化时保存\"\n\n\n            }\n        },\n\n        // 添加 device 时 根据类型 加载;\n        device_type: [],\n\n        // 添加 device   moudbus  0 时 配置 数据;  以后版本要更新; ;\n        //\"device_modbus_\" : {  // 根据version 配置; \n\n        \"device\": {\n            entity: {\n                dev_cycle: 1,\n                cycle_unit: 1,\n                slow_cycle: 1,\n                slow_cycle_unit: 2,\n                dev_timeout: 15,\n                dev_retry: 1,\n                delay: 1,\n            },\n\n            // 时间单位; \n            timeUnit: [{\n                k: \"Second\",\n                v: 0\n            }, {\n                k: \"Minute\",\n                v: 1\n            }, {\n                k: \"Hour\",\n                v: 2\n            }],\n            \n            \"PI_SHCYA\": {\n                entity: {\n                    params: {\n                        link_address: 2\n                    }\n                }\n            },\n\n            'PLC_MITSUBISHI_FX_PG' : {\n                entity: {\n                    params:{\n                        type:0 \n                    }\n                }\n            },\n\n            // device emodel 的 驱动Id ;  \n            \"FCS_MODBUS\": {\n                // 公共部分默认值 ; \n                entity: {\n                    params: { // 驱动部分默认值; \n                        address: 1,\n                        protocol_type: 0,\n                        offset_format: 0,\n                        // register_length :1 ,\n                        max_packet_length: 64,\n                        packet_offset: 4,\n                        int_order: 0,\n                        int64_order: 0,\n                        float_order: 0,\n                        double_order: 0,\n                        // register_order : 0 ,\n                        crc_order: 0\n                    }\n                },\n\n                // device model 驱动 版本号 ;  // {k:\"\" , v: } ,\n\n                protocol: [{\n                    k: \"ModbusRtu\",\n                    v: 0\n                }, {\n                    k: \"ModbusTcp\",\n                    v: 1\n                }],\n\n                offsetformat: [{\n                    k: \"10进制\",\n                    v: 0\n                }, {\n                    k: \"Modbus格式\",\n                    v: 1\n                }],\n\n                reglength: [{\n                    k: \"1 字节\",\n                    v: 0\n                }, {\n                    k: \"2 字节\",\n                    v: 1\n                }, {\n                    k: \"4 字节\",\n                    v: 2\n                }],\n\n                order_a: [{\n                    k: \"FFH4_FFH3_FFH2_FFH1\",\n                    v: 0\n                }, {\n                    k: \"FFH3_FFH4_FFH1_FFH2\",\n                    v: 1\n                }, {\n                    k: \"FFH1_FFH2_FFH3_FFH4\",\n                    v: 2\n                }, {\n                    k: \"FFH2_FFH1_FFH4_FFH3\",\n                    v: 3\n                }],\n\n                order_b: [{\n                    k: \"正序\",\n                    v: 0\n                }, {\n                    k: \"逆序\",\n                    v: 1\n                }],\n\n                order_c: [{\n                    k: \"高前低后\",\n                    v: 0\n                }, {\n                    k: \"低前高后\",\n                    v: 1\n                }]\n\n            },\n\n            \"PLC_SIEMENS_PPI\": {\n                entity: {\n                    params: {\n                        address: 1,\n                        max_packet_length: 150,\n                        packet_offset: 10\n                    }\n                }\n            }\n\n\n\n\n\n        },\n\n        // tip 分类;  profPoint-tip ;\n\n        // template 点创建;  template point type ;  0 = modbus ;\n\n\n\n        \"point\": {\n            // 公共部分默认值;   \n            entity: {\n                poll: 0,\n                is_packet: 0,\n\n            },\n\n            // 点轮询 ; \n            pointPoll: [{\n                k: \"Normal\",\n                v: 0\n            }, {\n                k: \"Slow\",\n                v: 1\n            }, {\n                k: \"Call\",\n                v: 2\n            }, ],\n            \n            packet: [{\n                k: \"False\",\n                v: 0\n            }, {\n                k: \"True\",\n                v: 1\n            }],\n            // 读写属性; \n            access:  access,\n\n            \"PI_SHCYA\": {\n\n                th: [\"app_address\", \"type_id\", \"infor_address\"],\n\n                entity: {\n                    params: {\n                        'app_address': 1,\n                        'type_id': 0,\n                        'infor_address': 1\n                    }\n                },\n                type_id: [{\n                    v: 0,\n                    k: \"遥信\"\n                }]\n\n            },\n \n            // devicemodel  驱动 Id ;   \n            \"FCS_MODBUS\": {\n                th: [\n                    'area', 'offset', 'type', 'type_ex', 'access'\n                ],\n\n                // 驱动相对应的默认参数; \n                entity: {\n                    params: {\n                        \"area\": 0,\n                        \"offset\": 0,\n                        \"type\": 0, //  可选项遂区域在变; \n                        \"type_ex\": 0, // 遂区域在变; \n                        \"access\": 0, // 遂区域变;  \n                    }\n                },\n                // 级联属性 start ;  \n                // Area 变化是数据变化; \n                // bool : 是否在初始化( _dataType , _accerssType   ); \n\n\n                AreaCC: function(point, scope, bool) {\n                    // k :area , v: access ;  \n                    console.log(scope);\n                    var dd = this.type,\n                        ac = this.access;\n\n\n                    function initDtatType() {\n                        return point.params.area == 0 || point.params.area == 1 ? [{\n                            k: 'Bool',\n                            v: 0\n                        }] : dd;\n                    }\n\n                    function initAccessType() {\n                        return (point.params.area == 0 || point.params.area == 2) ? ac : [{\n                            v: 0,\n                            k: 'Read'\n                        }];\n\n                    }\n\n\n                    // if (bool) {\n                        scope._dataType = initDtatType();\n                        scope._accerssType = initAccessType();\n                    // } else {\n                    //     scope.$parent._dataType = initDtatType();\n                    //     scope.$parent._accerssType = initAccessType();\n                    // }\n \n\n\n                    if (bool) {\n                        return;\n                    }\n\n                    if (point.params.area < 2) { // 意思是 co ,di 区时 , \n                        point.params.type = 0;\n                        point.params.type_ex = 0;\n                    } else {\n                        point.params.type = 3;\n                        point.params.type_ex = 0;\n                    }\n                    var cc = {\n                        1: 0,\n                        3: 0,\n                        0: 2,\n                        2: 2\n                    };\n                    point.params.access = cc[point.params.area];\n\n\n                },\n                // Type 变化时 数据变化; \n                TypeCC: function(point) {\n                    //if( point.params.area  > 1 ){   // 意思是  hr , ai 区  > 1 ;\n\n                    //  // k: 数据类型 , v: typeEx 值;    \n\n                       var cc = { 0:0 , 1:0 , 2:0 , 8:1, 12:1 , 13:1 }; \n                       point.params.type_ex = cc[ point.params.type ] || 0 ;\n\n\n                },\n\n                // 级联属性 end ;\n                type: [{\n                            k: \"Bool\",\n                            v: 0\n                        }, {\n                            k: \"Char\",\n                            v: 1\n                        }, {\n                            k: \"Byte\",\n                            v: 2\n                        }, {\n                            k: \"Short\",\n                            v: 3\n                        }, {\n                            k: \"Word\",\n                            v: 4\n                        }, {\n                            k: \"Int\",\n                            v: 5\n                        }, {\n                            k: \"DWord\",\n                            v: 6\n                        }, {\n                            k: \"Float\",\n                            v: 7\n                        }, {\n                            k: \"BCD码\",\n                            v: 8\n                        },\n                        // {k:\"BCD32\" , v: 9},\n                        {\n                            k: \"Int64\",\n                            v: 9\n                        }, {\n                            k: \"UInt64\",\n                            v: 10\n                        }, {\n                            k: \"Double\",\n                            v: 11\n                        }, {\n                            k: \"String\",\n                            v: 12\n                        }, {\n                            k: \"Buffer\",\n                            v: 13\n                        },\n                    ],\n                // 数据区 \n                area: [{\n                    k: \"CO区\",\n                    v: 0\n                }, {\n                    k: \"DI区\",\n                    v: 1\n                }, {\n                    k: \"HR区\",\n                    v: 2\n                }, {\n                    k: \"AI区\",\n                    v: 3\n                }, ],\n\n                // 高低位 字节; \n                hlbyte: hlbyte ,\n                // 读写属性; \n                access: access\n            },\n\n            \"PLC_SIEMENS_PPI\": {\n                // 驱动默认参数; \n                th: [\n                    'area', 'offset', 'type', 'type_ex'\n                ],\n                entity: {\n                    params: {\n                        area: 0,\n                        offset: 0,\n                        type: 0,\n                        type_ex: 0\n                    }\n                },\n\n                // bool 是否在初始化;     \n                areaCC: function(scope, point, bool) {\n                    var t,\n                        tt = this.type,\n\n                        area = point.params.area;\n\n                    function cc(data) {\n                        // if (bool) {\n                        //     scope._dataType = data;\n                        // } else {\n                        //     scope.$parent._dataType = data; \n                        // }\n\n                        ( scope._dataType = data ) ||  ( scope.$parent._dataType  = data );\n\n\n                        // console.log( bool ,   scope.$parent._dataType )\n                    };\n\n                    if (0 <= area <= 3) {\n                        t = angular.copy(this.type);\n                        t.splice(9, 1);\n                        cc(t);\n                        !bool && (point.params.type = 0);\n\n                    }\n                    if (area == 4) {\n                        cc(tt);\n                        !bool && (point.params.type = 0);\n\n                    }\n\n                    if (area == 5 || area == 9) {\n                        cc([tt[6], tt[7], tt[8]]);\n                        !bool && (point.params.type = 6);\n\n                    }\n\n                    if (area == 6 || area == 8) {\n                        !bool && (\n                            // point.params.type = undefined ; \n                            // point.params.type_ex = undefined ;\n                            point.params.type = 0,\n                            point.params.type_ex = 0\n                        )\n\n                    }\n\n                    if (area == 7 || area == 10 || area == 11) {\n                        cc([tt[3], tt[4], tt[5]]);\n                        !bool && (point.params.type = 3);\n\n                    };\n\n                },\n\n                typeCC: function(point) {\n                    var area = point.params.area,\n                        type = point.params.type;\n                    if (type == 0) {\n                        point.params.type_ex = 0;\n                        return;\n                    }\n                    if (type == 9) {\n                        point.params.type_ex = 1;\n                        return;\n                    }\n                    // point.params.type_ex = undefined ;\n                    point.params.type_ex = 0;\n                },\n\n\n                area: [{\n                    k: \"I 离散输入\",\n                    v: 0\n                }, {\n                    k: \"Q 离散输出\",\n                    v: 1\n                }, {\n                    k: \"M 内部内存位\",\n                    v: 2\n                }, {\n                    k: \"SM 特殊内存位\",\n                    v: 3\n                }, {\n                    k: \"V 内存变量\",\n                    v: 4\n                }, {\n                    k: \"T 定时器当前值\",\n                    v: 5\n                }, {\n                    k: \"T 定时器位\",\n                    v: 6\n                }, {\n                    k: \"C 计数器当前值\",\n                    v: 7\n                }, {\n                    k: \"C 计数器位\",\n                    v: 8\n                }, {\n                    k: \"HC 高速计数器当前值\",\n                    v: 9\n                }, {\n                    k: \"AI 模拟输入\",\n                    v: 10\n                }, {\n                    k: \"AO 模拟输出\",\n                    v: 11\n                }],\n\n                type: [{\n                    k: \"BIT(位 0~7)\",\n                    v: 0\n                }, {\n                    k: \"BY (8位无符号整型,0~255)\",\n                    v: 1\n                }, {\n                    k: \"CH (8位有符号整型,-128~127)\",\n                    v: 2\n                }, {\n                    k: \"US (16位无符号整型, 0~65535)\",\n                    v: 3\n                }, {\n                    k: \"SS (16位有符号整型, -32768~32767)\",\n                    v: 4\n                }, {\n                    k: \"SB (16位 BCD 整型, 0~9999)\",\n                    v: 5\n                }, {\n                    k: \"LG (32位长整型, -2147483648~2147483647)\",\n                    v: 6\n                }, {\n                    k: \"LB (32位 BCD 格式整型 , 0~99999999)\",\n                    v: 7\n                }, {\n                    k: \"FL (32位IEEE格式单精度浮点型)\",\n                    v: 8\n                }, {\n                    k: \"STR(ASCII 字符串型,1~127个字符)\",\n                    v: 9\n                }]\n            },\n\n\n            \"PLC_MITSUBISHI_FX_PG\": {\n                 // 驱动默认参数; \n                th: [\n                    'area', 'offset', 'type', 'type_ex'\n                ],\n                entity: {\n                    params: {\n                        area:0,\n                        offset:0,\n                        type:0,\n                        type_ex:0,\n                        access:0\n                    }\n                },\n\n                area:[ \n                    {k:\"X-开关量输入\" , v:0 },\n                    {k:\"Y-开关量输出\" , v:1 },\n                    {k:\"M-辅组继电器\" , v:2 },\n                    {k:\"S-状态寄存器\" , v:3 },\n                    {k:\"T-定时器接点\" , v:4 },\n                    {k:\"C-计数器接点\" , v:5 },\n                    {k:\"D-数据寄存器\" , v:6 },\n                    {k:\"SM-特殊辅组继电器\" , v:7 },\n                    {k:\"TN-定时器当前值\" , v:8 },\n                    {k:\"CN-计数器当前值\" , v:9 } \n                ],\n                type:[\n                    {k:\"位读写\" , v: 0},\n                    {k:\"8位有符号\" , v:1 },\n                    {k:\"8位无符号\" , v:2 },\n                    {k:\"16位有符号\" , v:3 },\n                    {k:\"16位无符号\" , v: 4},\n                    {k:\"32位有符号\" , v: 5},\n                    {k:\"32位无符号\" , v: 6},\n                    {k:\"32位浮点数\" , v: 7},\n                    {k:\"16位BCD\" , v: 8},\n                    {k:\"32位BCD\" , v: 9},\n                    {k:\"浮点数BCD\" , v:10 },\n                    {k:\"字符串\" , v: 11}\n                ],\n                access: access ,\n                // 偏移地址：offset  （0-65535）;\n                hlbyte: hlbyte ,\n\n                AreaCC: function( point , scope  , bool ){\n                    // 当寄存器区为：开关量输入(0)和开关量输出(1)时，数据为8进制，偏移地址不能出现‘8’和‘9’  \n                    // 当寄存器区为：数据寄存器 (6) 、定时器当前值(8) 、计数器当前值时(9)， 数据类型全部显示，其它方式只显示“0-位读写”\n                    // 当寄存器区为：开关量输入(0)、定时器接点(4)、计数器接点(5)、定时器当前值(8)、\n                    //             计数器当前值时(9)，显示“只读”\n \n                    var ad = { 6:true , 8:true , 9:true } , \n                        ac = { 0:true ,4:true ,5:true ,8:true ,9:true }\n                        area = point.params.area ;\n\n                    if(  ad[ area] ) {\n                        scope._dataType =this.type ;\n\n                    }else{\n                        scope._dataType = [ {k:\"位读写\" , v: 0} ];\n                        !bool && (  point.params.type  = 0 );\n                    } ;\n\n                    if( ac[area] ){ \n                        scope._accessType = [ { k:\"Read\", v: 0 }];\n                        !bool && ( point.params.access = 0 ) ;\n                    }else{\n                        scope._accessType = this.access; \n                    } \n\n                },\n                TypeCC: function( point  ){\n                    var area = point.params.area,\n                        type = point.params.type;\n                    if (type == 0) {\n                        point.params.type_ex = 0;\n                        return;\n                    }\n                    if (type == 11) {\n                        point.params.type_ex = 1;\n                        return;\n                    }\n                    if( type == 1 || type == 2 ){\n                        point.params.type_ex = 1 ;\n                        return ;\n                    } \n                    // point.params.type_ex = undefined ;\n                    point.params.type_ex = 0;\n\n                }\n\n\n\n\n            }\n\n\n\n\n        },\n\n        \"tag\": {\n            //            jjw 变量类型\n            //            type: ['Number', 'Boolean', 'String', 'Buffer', 'Array', 'Date', 'Object']\n            type: ['Analog', 'Digital']\n\n        },\n\n        message: {\n            entity: {\n                user_category: \"0\"\n            },\n\n            category: {\n                0: '平台用户',\n                1: '联系人用户'\n            }\n        },\n\n        gateway: {\n            types: {\n                'RS232_1': \"RS232\",\n                'RS232_2': \"RS232\",\n                'RS232_3': \"RS232\",\n                'RS232_4': \"RS232\",\n\n                'RS485_1': 'RS485',\n                'RS485_2': 'RS485',\n\n                'RS422_1': 'RS422',\n                'RS422_2': 'RS422'\n\n            },\n\n            baud_rate: [1200, 2400, 4800, 9600, 19200, 38400],\n            data_bits: [7, 8],\n            stop_bits: [1, 2],\n            parity: {\n                'none': \"无校验\",\n                'even': \"偶校验\",\n                'odd': \"奇校验\"\n            },\n\n            gps_distance: [50, 100, 250, 500],\n            gps_baud_rate: [300, 600, 1200, 2400, 4800, 9600, 19200],\n\n\n            entity: {\n                enable: true,\n                baud_rate: 9600,\n                data_bits: 8,\n                stop_bits: 1,\n                parity: 'none',\n                delay: 10\n            }\n        },\n\n        \"desc\": \"\"\n    }\n}]);\n\n \n \n\n    angular.module('app.utils', [], function() {})\n\n    .service(\"$utils\", [\"$sessionStorage\", function($sessionStorage) {\n\n\n        var a, b, c, d, e, f;\n\n        function getCookie(name) {\n            var arr, reg = new RegExp(\"(^| )\" + name + \"=([^;]*)(;|$)\");\n            if (arr = document.cookie.match(reg))\n                return unescape(arr[2]);\n            else\n                return null;\n        }\n\n        function delCookie(name) {\n            var exp = new Date();\n            exp.setTime(exp.getTime() - 1);\n            var cval = getCookie(name);\n            if (cval != null)\n                document.cookie = name + \"=\" + cval + \";expires=\" + exp.toGMTString();\n        }\n\n        return {\n            //删除cookies \n            delCookie: delCookie,\n            getCookie: getCookie,\n\n            backState: function(controllerName) {\n\n\n                if (angular.from && angular.from.url) {\n                    return $sessionStorage['back_' + controllerName] = angular.from;\n\n                } else {\n                    return $sessionStorage[\"back_\" + controllerName];\n                }\n            },\n            // 展示 触发器 触发条件; \n            triggerConditions: function(c) {\n\n                var conditions = angular.copy(c);\n\n                if (angular.isString(conditions)) {\n\n                    conditions = angular.fromJson(conditions);\n                    console.log(conditions)\n                }\n\n                var arr = [],\n                    exp;\n                $.each(conditions, function(i, v) {\n                    exp = v.exp;\n                    arr.push(v.verb || \"\");\n                    arr.push(exp.left.args);\n                    arr.push(exp.op);\n                    arr.push(exp.right.args);\n                })\n                return arr.join(\" \");\n            },\n\n\n            // 拷贝 部分属性; \n            copyProp: function() {\n                var a, b, c = {};\n                a = arguments[0],\n                    b = Array.prototype.splice.call(arguments, 1);\n\n                b.forEach(function(v, i, t) {\n                    c[v] = angular.copy(a[v]);\n                });\n                return c;\n            },\n\n\n            // profile  连接模版时用;\n            findTempByid: function(temps, tempid) {\n                var t;\n                $.each(temps, function(i, n) {\n                    if (n.template_id == tempid) {\n                        t = n;\n                        return false;\n                    }\n                });\n                return t;\n            },\n\n            // profile 连接模版时用;\n            containTemp: function(temps, tempid) {\n                var t = false;\n                $.each(temps, function(i, n) {\n                    if (n.template_id == tempid) {\n                        t = true;\n                        return false;\n                    }\n                });\n                return t;\n            },\n\n            // 拷贝 text 到 os 系统粘贴板； \n            copyText:  function  (copyText)   {\n                    if (window.clipboardData) \n                    {\n                        window.clipboardData.setData(\"Text\", copyText)\n                    } \n                    else \n                    {\n                        var flashcopier = 'flashcopier';\n                        if(!document.getElementById(flashcopier)) \n                        {\n                          var divholder = document.createElement('div');\n                          divholder.id = flashcopier;\n                          document.body.appendChild(divholder);\n                        }\n                        document.getElementById(flashcopier).innerHTML = '';\n                        var divinfo = '<embed src=\"../js/_clipboard.swf\" FlashVars=\"clipboard='+encodeURIComponent(copyText)+'\" width=\"0\" height=\"0\" type=\"application/x-shockwave-flash\"></embed>';\n                        document.getElementById(flashcopier).innerHTML = divinfo;\n                    }\n                  alert('copy成功！');\n                }\n\n        }\n\n\n\n\n    }])\n\n    .service(\"xxx\", function() {\n\n    })\n\n\n\n\n\n\n\n    function copy_clip(copy) {\n        if (window.clipboardData) {\n            window.clipboardData.setData(\"Text\", copy);\n        } else if (window.netscape) {\n            netscape.security.PrivilegeManager.enablePrivilege('UniversalXPConnect');\n            var clip = Components.classes['@mozilla.org/widget/clipboard;1'].createInstance(Components.interfaces.nsIClipboard);\n            //if (!clip) return;\n            var trans = Components.classes['@mozilla.org/widget/transferable;1'].createInstance(Components.interfaces.nsITransferable);\n            //if (!trans) return;\n            trans.addDataFlavor('text/unicode');\n            var str = new Object();\n            var len = new Object();\n            var str = Components.classes[\"@mozilla.org/supports-string;1\"].createInstance(Components.interfaces.nsISupportsString);\n            var copytext = copy;\n            str.data = copytext;\n            trans.setTransferData(\"text/unicode\", str, copytext.length * 2);\n            var clipid = Components.interfaces.nsIClipboard;\n            //if (!clip) return false;\n            clip.setData(trans, null, clipid.kGlobalClipboard);\n        }\n        //return false;\n    }\n\n\n \n \n\n\nangular.module('thinglinx', [\n\n    'ngAnimate',\n    'ngCookies',\n    'ngMessages',\n    'ngStorage',\n    'ui.router',\n    'ui.bootstrap',\n    'ui.validate',\n    \"ui.jq\", \n    \n    'ui.bootstrap.datetimepicker',\n    'pascalprecht.translate',\n\n\n    'app.basecontroller', \n    'app.account', \n    'app.model.device', \n    'app.model.system', \n    'app.project',\n    'app.show.proj', \n    'app.show.system', \n    'app.system', \n    'app.system.prop',\n    'app.support',\n    'app.directives',\n    'app.filters',\n    'app.services', \n    'app.sysconfig',\n    \"app.utils\"\n\n\n])\n\n.run(\n\n\n    [\"$rootScope\", \"$state\", \"$stateParams\", \"$sys\", \"$compile\", \"$localStorage\", \"$cacheFactory\", \"$translate\", \"$sce\", \"$sessionStorage\", \"$templateCache\", function($rootScope, $state, $stateParams, $sys, $compile,  $localStorage,\n        $cacheFactory, $translate, $sce, $sessionStorage  , $templateCache ) {\n\n\n\n        console.log( $templateCache );\n\n        $('#preload').fadeOut('slow');\n  \n        $rootScope.$state = $state;\n        $rootScope.$stateParams = $stateParams;\n        $rootScope.$sys = $sys;\n        $rootScope.$translate = $translate;\n        $rootScope.$sceHtml = $sce.trustAsHtml;\n        $rootScope.$session = $sessionStorage;\n        $rootScope.fromJson = angular.fromJson;\n\n\n\n//        $rootScope.ossRoot = \"http://thinglinx-test.oss-cn-beijing.aliyuncs.com/\";\n        $rootScope.ossRoot = \"http://thinglinx-test.oss-cn-beijing.aliyuncs.com/\";\n\n\n\n        // ie ;\n        // window.onbeforeunload = function() {\n        //     alert(\"关闭窗口\");\n        // };\n\n        // $rootScope.$err = $err ;\n\n        $rootScope.$debug = $sys.$debug;\n\n        // $rootScope.$$cache = null ;\n\n        // $rootScope.validate = function(data, msg) {\n        //   if (!data) {\n        //     alert(msg)\n        //     throw Error(msg);\n        //   }\n        // }\n\n        $rootScope.funtest = function() {\n        };\n\n    }]\n\n)\n\n\n.config(  [\"$stateProvider\", \"$urlRouterProvider\", \"$controllerProvider\", \"$compileProvider\", \"$filterProvider\", \"$provide\", \"$httpProvider\", \"$resourceProvider\", \"$templateCacheProvider\", function($stateProvider, $urlRouterProvider, $controllerProvider, $compileProvider,\n            $filterProvider, $provide, $httpProvider, $resourceProvider , $templateCacheProvider  ) {\n\n            console.log(  $templateCacheProvider );\n\n            // 自定义 ajax 拦截器;\n            $httpProvider.interceptors.push('Interceptor');\n            // 默认前端 跨域;\n            //$httpProvider.defaults.withCredentials = true;\n \n          \n\n            $resourceProvider.defaults.actions = {\n                put:    {method:\"PUT\"},\n                get:    {method: \"GET\"   },\n                post: { method:\"POST\"},\n                \"delete\": {method: \"DELETE\"} ,\n                remove:   {method: \"DELETE\"},\n \n                getByPk:{method:\"GET\"} , \n                delByPk:{ method:\"DELETE\"}, \n                save:   {method: \"POST\"},\n\n                getArr: {method: \"GET\", isArray: !0},\n                query:  {method:\"GET\"  } \n\n            }\n\n \n\n\n            // lazy controller, directive and service\n            app.controller = $controllerProvider.register;\n            app.directive = $compileProvider.directive;\n            app.filter = $filterProvider.register;\n            app.factory = $provide.factory;\n            app.service = $provide.service;\n            app.constant = $provide.constant;\n            app.value = $provide.value;\n\n\n\n            $urlRouterProvider\n            //.otherwise('/access/signin');\n            //.otherwise('/app/template');\n            //.otherwise('/app/proj/manage');\n                .otherwise('/app');\n\n          \n\n            $stateProvider.state('app', {\n                //abstract: true,\n                url: '/app',\n                templateUrl: 'athena/app.html',\n                resolve: {\n                    userResp: [\"$source\", function($source) {                        \n                        return $source.$common.get({\n                            op: \"islogined\"\n                        }).$promise\n                    }]\n                },\n                controller: [\"$scope\", \"$state\", \"$sys\", \"userResp\", function($scope, $state, $sys, userResp) {\n\n                    //后台判断是否已经登录;\n                    var user = userResp.ret;\n                   \n\n                    if (user) {\n                        user.sms_notice = !!user.sms_notice;\n                        user.mail_notice = !!user.mail_notice;\n\n                        $scope.user = user;\n                        $scope.$$user = user;\n\n\n                        // 是 app 路由转到 rootState ;\n                        // rootstate = app.prpj.namage ;\n                        $state.is(\"app\") ? $state.go($sys.rootState) : undefined;\n\n                        $scope.user = user;\n\n                    } else { \n                        //  if( !$sys.$debug ){\n                        $state.go('access.signin');\n                        //  }\n                    };\n\n\n                }]\n\n            }) \n            //  模版 =================================\n            .state(\"app.s_region\", {\n                url: \"/s_region\",\n                controller: \"manage_projs\",\n                data: {\n                    isShowModul: true\n                },\n                templateUrl: \"athena/region/project_temp.html\"\n            })\n\n            .state(\"app.s_region_system\", {\n                    url: \"/s_region/{id}/{name}\",  // region_id ;\n                    // controller: \"proj_prop\",\n                    data: {\n                        isShowModul: true\n                    }, \n                    controller: \"s_region_system\",\n                    templateUrl: \"athena/show/region_system.html\"\n\n                })\n\n\n            /*========================*/\n\n            .state(\"app.s_system\", {\n                url: \"/s_system\",\n                templateUrl: \"athena/dastation/dastation_temp.html\",\n                data: {\n                    isShowModul: true\n                },\n                controller: \"dastation_ignore_active\"\n            })\n\n\n            .state(\"app.s_system_prop\", {\n                url: \"/s_system_prop/:uuid\",\n                resolve: {\n                    _$system : [\"$source\", \"$stateParams\", function( $source , $stateParams ){\n                        //$source.$system.getByPk( {pk: $stateParams.uuid}).$promise ;\n                        return $source.$system.get({\n                                        system_id: $stateParams.uuid,\n                                        tag: true\n                                    }).$promise\n\n                    }]\n\n                },\n                controller: \"show_system_prop\",\n                templateUrl: \"athena/show/system_prop.html\"\n            })\n\n            .state(\"app.s_system_prop.basic\", {\n                url: \"/_basic\",\n                templateUrl: \"athena/show/system_prop_basic.html\",\n                controller: \"show_system_basic\"\n\n            })\n\n            .state(\"app.s_system_prop.current\", {\n                    url: \"/_current\",\n                    templateUrl: \"athena/show/system_prop_current.html\",\n                    controller: \"show_system_current\"\n                })\n                .state(\"app.s_system_prop.history\", {\n                    url: \"/_history\",\n                    templateUrl: \"athena/show/system_prop_history.html\",\n                    controller: \"show_system_history\"\n                })\n\n                .state(\"app.s_system_prop.alarm\", {\n                    url: \"/_alarm\",\n                    templateUrl: \"athena/show/system_prop_alarm.html\",\n                    controller: \"show_system_alarm\"\n                })\n\n\n            .state(\"app.s_system_prop.map\", {\n                url: \"/_map\",\n                templateUrl: \"athena/show/system_prop_map.html\",\n                //template: \"<div class='panel-body h-full' id='station_map' > 423 </div>\",\n                controller: \"show_system_map\"\n            })\n\n            // syalias\n            .state(\"app.s_system_prop.panel\", {\n                url: \"/_panel\",\n                templateUrl: \"athena/show/system_prop_panel.html\",\n                //template: \"<div class='panel-body h-full' id='station_map' > 423 </div>\",\n                controller: \"show_system_panel\"\n            })\n\n\n            .state(\"app.s_alarm\", {\n                url: \"/alarm\",\n                templateUrl: \"athena/show/alarm.html\",\n                controller: \"show_alarm\"\n            })\n\n\n            //===========================================================\n            .state(\"app.my_detail\" , {\n                url:\"/userself\",\n                templateUrl:\"athena/account/user_detail.html\",\n                controller:\"account_userdetail\"\n            })\n\n \n            //===========================================================\n\n\n            .state(\"app.devmodel\", {\n                    url: \"/devmodel\",\n                    templateUrl: \"athena/template/template.html\",\n                    controller: 'devmodel'\n\n                })\n                .state(\"app.sysmodel\", {\n                    url: \"/sysmodel\",\n                    templateUrl: \"athena/sysmodel/sysmodel.html\",\n                    controller: 'sysmodel'\n                })\n\n\n            .state(\"app.sysmodel_p\", {\n                    url: \"/sysmodel_p/{uuid}\", \n                    templateUrl: 'athena/sysmodel/sysmodel_prop.html',\n                    controller: \"sysmodelProp\"\n                })\n                .state(\"app.sysmodel_p.basic\", {\n                    url: \"/basic\",\n                    templateUrl: \"athena/sysmodel/sys_basic.html\",\n                    controller: \"sysmodel_basic\"\n                })\n                .state(\"app.sysmodel_p.sysdevice\", {\n                    url: \"/sysdevice\",\n                    templateUrl: \"athena/sysmodel/sys_device.html\",\n                    controller: \"sysmodel_device\"\n                })\n                .state(\"app.sysmodel_p.systag\", {\n                    url: \"/systag\",\n                    templateUrl: \"athena/sysmodel/sys_tag.html\",\n                    controller: \"sysmodel_tag\"\n                })\n\n            .state(\"app.sysmodel_p.sysprofile\", {\n                    url: \"/sysprofile\",\n                    templateUrl: \"athena/sysmodel/sys_profile.html\",\n                    controller: \"sysmodel_profile\"\n                })\n                .state(\"app.sysmodel_p.trigger\", {\n                    url: \"/trigger\",\n                    templateUrl: \"athena/sysmodel/sys_proftrigger.html\",\n                    controller: \"sysmodel_prof_trigger\"\n                })\n\n            .state(\"app.sysmodel_p.message\", {\n                    url: \"/message\",\n                    templateUrl: \"athena/sysmodel/sys_message_center.html\",\n                    controller: \"sysmodel_message\"\n                })\n            .state(\"app.sysmodel_p.gateway\", {\n                url: \"/gateway\",\n                templateUrl: \"athena/sysmodel/sys_gateway.html\",\n                controller: \"sysmodel_gateway\"\n            })\n\n            // dyalias\n            .state(\"app.sysmodel_p.panel\", {\n                url: \"/panel\",\n                templateUrl: \"athena/sysmodel/sys_panel.html\",\n                controller: \"sysmodel_panel\"\n            })\n\n\n\n            //===========================================================\n            //===========================================================\n\n\n            .state(\"app.m_region\", {\n                url: \"/m_region\",\n                controller: \"manage_projs\",\n                templateUrl: \"athena/region/project_temp.html\"\n            })\n\n\n            //   项目 属性 ; ==============================================\n            .state(\"app.m_region_prop\", {\n                    url: \"/m_regipn/{id}\",\n                    controller: \"proj_prop\",\n                    resolve: {\n                        regionResp : [\"$source\", \"$stateParams\", function($source , $stateParams){\n                            return  $source.$region.get( {pk:$stateParams.id} ).$promise ;\n                        }]\n                    },\n                    templateUrl: \"athena/region/pro_man_prop.html\"\n                })\n            // 得到项目所在的系统 属性;\n            // app.proj_prop 被忽略掉; 才可;\n            .state(\"app.m_region_prop.system\", {\n                url: \"/system\",\n                // controller: \"proj_prop_station\",\n                controller:\"dastation_ignore_active\",\n                templateUrl: \"athena/dastation/dastation_temp_panel.html\"\n            })\n            // 项目自身属性;\n            .state(\"app.m_region_prop.author\", {\n                url: \"/author\",\n                controller: \"proj_prop_author\",\n                templateUrl: \"athena/region/prop_author.html\"\n            })\n\n\n            //==========采集站 =====================   class=\"fade-in-right-big smooth\"\n\n            //================\n            .state(\"app.m_system\", {\n                url: \"/m_system\",\n                controller: \"dastation_ignore_active\",\n                templateUrl: \"athena/dastation/dastation_temp.html\"\n            })\n\n\n            // 采集站 属性;\n            .state(\"app.m_system_prop\", {\n                    //abstract:true ,\n                    url: \"/m_system/{uuid}\", // 开始就传递 station id 参数;\n                    controller: \"dastation_prop\",\n                    resolve: {\n                        systemResp :[\"$source\", \"$stateParams\", function( $source , $stateParams ){\n                            return $source.$system.get({\n                                        system_id: $stateParams.uuid\n                                    }).$promise ;\n                        }]\n                    },\n                    templateUrl: \"athena/dastation/dastation_prop.html\"\n                })\n                //========================\n\n            // 又分  dastation 的 好多 tab  属性;\n            .state(\"app.m_system_prop._basic\", {\n                url: \"/_basic\",\n                controller: \"das_basic\",\n                templateUrl: \"athena/dastation/prop_basic.html\"\n            })\n\n            .state(\"app.m_system_prop._config\", {\n                url: \"/_config\",\n                controller: \"das_config\",\n                templateUrl: \"athena/dastation/prop_config.html\"\n            })\n\n\n            // 系统信息版( sation 中 使用 );  描述信息版(外部描述 ,);\n            .state(\"app.m_system_prop.tag\", {\n                    url: \"/_tag\",\n                    controller: \"das_tag\",\n                    templateUrl: \"athena/sysmodel/sys_tag.html\"\n                })\n                .state(\"app.m_system_prop.trigger\", {\n                    url: \"/_trigger\",\n                    controller: \"das_trigger\",\n                    templateUrl: \"athena/sysmodel/sys_proftrigger.html\"\n                })\n                .state(\"app.m_system_prop.message\", {\n                    url: \"/_message\",\n                    controller: \"das_message\",\n                    templateUrl: \"athena/sysmodel/sys_message_center.html\"\n                })\n\n            .state(\"app.m_system_prop.contact\", {\n                url: \"/_contact\",\n                templateUrl: \"athena/dastation/prop_contact.html\",\n                controller: \"das_contact\"\n            })\n\n            .state(\"app.m_system_prop._map\", {\n                url: \"/_map\",\n                controller: \"das_map\",\n                templateUrl: \"athena/dastation/prop_map.html\"\n                    // http://api.map.baidu.com/api?v=1.5&ak=M9b53slaoqAKQj8jX0CRz6xA\" type=\"text/javascript\n              \n               \n\n            })\n\n\n\n            // athena_user --------------------------------------------------\n\n\n            .state(\"app.account.info\", {\n                url: \"/info\",\n                controller: \"account_info\",\n                templateUrl: \"athena/account/info.html\"\n            })\n\n            .state(\"app.user\", {\n                url: \"/user\",\n                templateUrl: \"athena/account/users.html\",\n                controller: \"account_users\"\n            })\n            .state(\"app.userdetail\" , {\n                url:\"/userdetail/:id\",\n                templateUrl:\"athena/account/user_detail.html\",\n                controller:\"account_userdetail\"\n            })\n\n\n\n\n            //app.account.author\n            // 账户 -->编辑权限;\n            .state(\"app.role\", {\n                url: \"/role\",\n                // controller: \"acco_role\",\n                templateUrl: \"athena/account/role.html\"\n            })\n\n\n\n                .state(\"app.role.region\", {\n                    url: \"/region\",\n                    data:{ role_category:1},\n                    templateUrl: \"athena/account/role_panel.html\",\n                    controller: \"role_ctrl\"\n                })\n                .state(\"app.role.account\", {\n                    url: \"/account\",\n                    data:{ role_category:0},\n                    templateUrl: \"athena/account/role_panel.html\",\n                    controller: \"role_ctrl\"\n                })\n\n            .state(\"app.account_info\",  {\n                 url:\"/account\",\n                 controller:\"account_info\",\n                 templateUrl:\"athena/account/account_info.html\"\n            })\n            .state(\"app.account_weichat\" , {\n                url:\"/weichat\",\n                controller:\"account_weichat\",\n                templateUrl:\"athena/account/account_weichat.html\"\n            })\n\n            //================================================================\n            //================================================================\n\n            //   access/signin\n            .state('access', {\n                    url: '/access',\n                    template: '<div ui-view class=\"   h-full smooth\"></div>',\n                    resolve: {\n                        $user: function() {\n\n                            //  return   window.loginUserPromise\n                        }\n                    }\n                })\n                .state('access.signin', {\n                    url: '/signin',\n                    controller: \"access_signin\",\n                    templateUrl: 'athena/page_signin.html'\n                })\n\n\n            .state('access.signup', {\n                    url: '/signup',\n                    controller: \"access_signup\",\n                    templateUrl: 'athena/page_signup.html'\n                })\n                .state('access.forgotpwd', {\n                    url: '/forgotpwd',\n                    controller: \"access_fogpas\",\n                    templateUrl: 'athena/page_forgotpwd.html'\n                })\n\n            .state(\"access.verifyemail\", {\n                url: \"/verifyemail\",\n                controller: \"verifyemail\",\n                templateUrl: \"athena/page_verifyemail.html\"\n            })\n\n            .state('access.404', {\n                url: '/404',\n                templateUrl: 'tpl/page_404.html'\n            })\n\n            //============ access  ===========================================================\n            // 联系我们; 技术支持; 使用条款; 问题反馈; 帮助;\n            // .state(\"support\", {\n            //   url:\"support\",\n            //   template:'<div ui-view class=\"smooth\"></div>'\n            // })\n            .state(\"conncet\", {\n\n                })\n                .state('app.tech', {\n                    url: \"/tech\",\n                    templateUrl: \"athena/support/tech.html\",\n                    controller: \"tech\"\n\n                })\n                .state(\"app.tech_detail\", {\n                    url: \"/techdetail\",\n                    templateUrl: \"athena/support/techdetail.html\",\n                    controller: \"techdetail\"\n                })\n                .state('protocol', {})\n                .state('htlp', {})\n\n\n\n\n        }]\n     \n)\n\n.constant('JQ_CONFIG', {\n\n    // wysiwyg: ['lib/wysiwyg/bootstrap-wysiwyg.js',\n    //           'lib/wysiwyg/jquery.hotkeys.js'\n    //         ]\n    //         \n    easyPieChart:   ['lib/flot/jquery.easy-pie-chart.js'],\n\n    chosen: [\n        'lib/chosen/chosen.jquery.min.js',\n        'lib/chosen/chosen.css'\n    ],\n    filestyle: [\n        'lib/file/bootstrap-filestyle.min.js'\n    ]\n\n})\n\n.config(['$translateProvider', function($translateProvider) {\n\n\n    $translateProvider.useStaticFilesLoader({\n        prefix: 'l10n/',\n        suffix: '.json'\n    });\n    $translateProvider.preferredLanguage('zh_CN');\n    $translateProvider.useLocalStorage();\n\n\n}])\n\n;\n\n//  这样的话    grunt - ngTempalte 命令 生成的 代码会放到 bootstrap(); 之后 , html 模版就不能用了;\n// angular.bootstrap( document.getElementsByTagName(\"body\") , ['thinglinx'])\n\n\n\n     \n\n \nangular.module('thinglinx').run(['$templateCache', function($templateCache) {\n  'use strict';\n\n  $templateCache.put('athena/_device/FCS_MODBUS.html',\n    \"<div class=hide ng-init=\\\"   _config =  $sys.device[devModel.driver_id] ;  \\\"></div><input tl-wrap label=设备地址 ng-model=D.params.address type=number max=254 min=1 placeholder=\\\" 1 - 254 \\\" required><select tl-wrap ng-model=D.params.protocol_type label=协议类型 ng-options=\\\" o.v as o.k for  o in _config.protocol \\\"></select><select tl-wrap ng-model=\\\" D.params.offset_format\\\" label=偏移格式 ng-options=\\\" o.v as o.k for o in _config.offsetformat\\\"></select><input tl-wrap ng-model=\\\" D.params.max_packet_length\\\" label=最大包长度 min=1 max=100 type=number required><input tl-wrap ng-model=\\\" D.params.packet_offset\\\" label=包偏移间隔 min=1 max=20 type=number required><select tl-wrap label=整数字节排序 ng-model=D.params.int_order ng-options=\\\" o.v as o.k for  o in _config.order_a \\\"></select><select tl-wrap label=浮点数字节排序 ng-model=D.params.float_order ng-options=\\\" o.v as o.k for  o in _config.order_a \\\"></select><select tl-wrap label=双精度字节排序 ng-model=D.params.double_order ng-options=\\\" o.v as o.k for  o in _config.order_b \\\"></select><select tl-wrap label=64位整数字节排序 ng-model=D.params.int64_order ng-options=\\\" o.v as o.k for  o in _config.order_b \\\"></select><select tl-wrap label=校验字节排序 ng-model=D.params.crc_order ng-options=\\\" o.v as o.k for  o in _config.order_c \\\"></select>\"\n  );\n\n\n  $templateCache.put('athena/_device/PI_SHCYA.html',\n    \" <input tl-wrap label=链路地址 ng-model=D.params.link_address type=number max=255 min=0 placeholder=\\\" 0 - 255\\\" required>\"\n  );\n\n\n  $templateCache.put('athena/_device/PLC_MITSUBISHI_FX_PG.html',\n    \"<select tl-wrap label=设备型号 ng-model=D.params.type ng-options=\\\" o.v as o.k for  o in [ {k:'FX1S' , v:0} , {k:'FX2N' , v:1} ]\\\" required></select>\"\n  );\n\n\n  $templateCache.put('athena/_device/PLC_SIEMENS_PPI.html',\n    \"<input tl-wrap label=目标地址 ng-model=D.params.address type=number max=254 min=1 placeholder=\\\" 1 - 254 \\\" required><input tl-wrap label=最大包长度 ng-model=D.params.max_packet_length type=number max=249 min=1 placeholder=\\\" 1 - 249 \\\" required><input tl-wrap label=包偏移间隔 ng-model=D.params.packet_offset type=number max=20 min=1 placeholder=\\\" 1 - 20 \\\" required>\"\n  );\n\n\n  $templateCache.put('athena/_device/dev_network.html',\n    \"<div ng-init=\\\"  _$types = [ 'ETHERNET','RS232','RS485','RS422'  ] ; \\n\" +\n    \"\\t\\t\\t\\t   _proto  = ['tcp' , 'udp'] ;  \\\"></div><select tl-wrap ng-options=\\\" t for t in _$types\\\" ng-model=\\\" D.network.type\\\" label=\\\" 通信类型\\\" ng-init=\\\" filterChannel ( D.network.type , false ) \\\" ng-change=\\\" filterChannel ( D.network.type , true  ) \\\"></select><div ng-if=\\\"  D.network.type == 'ETHERNET' \\\"><input tl-wrap ng-model=D.network.params.channel label=network tl-default=LAN_1 readonly><select tl-wrap ng-model=D.network.params.proto label=proto ng-options=\\\"  p for p in _proto\\\" tl-default=tcp></select><input tl-wrap ng-model=D.network.params.ip label=ip required> <input tl-wrap ng-model=D.network.params.port label=port required></div><div ng-if=\\\"  D.network.type != 'ETHERNET' \\\"><select tl-wrap ng-model=D.network.params.channel ng-options=\\\" k as k  for (k,v) in  _$channel \\\" label=串口 required><option value=\\\"\\\">请选择串口</option></select></div>\"\n  );\n\n\n  $templateCache.put('athena/_dtu/DTU_ETUNG.html',\n    \"<input tl-wrap-l label=终端ID required ng-model=daserver.params.simid ng-change=\\\" toUpdate('daserver') \\\">\"\n  );\n\n\n  $templateCache.put('athena/_dtu/DTU_HONGDIAN.html',\n    \"<input tl-wrap-l label=终端ID required ng-model=daserver.params.simid ng-change=\\\" toUpdate('daserver') \\\">\"\n  );\n\n\n  $templateCache.put('athena/_dtu/DTU_SHCYA.html',\n    \" <input tl-wrap-l label=终端ID required ng-model=daserver.params.simid ng-change=\\\" toUpdate('daserver') \\\" ng-maxlength=14 ng-minlength=14>\"\n  );\n\n\n  $templateCache.put('athena/_dtu/DTU_TEST.html',\n    \"<input tl-wrap-l label=终端ID required ng-model=daserver.params.simid ng-change=\\\" toUpdate('daserver') \\\">\"\n  );\n\n\n  $templateCache.put('athena/_dtu/DTU_etung_test.html',\n    \"<input tl-wrap-l label=终端ID required ng-model=daserver.params.simid ng-change=\\\" toUpdate('daserver') \\\">\"\n  );\n\n\n  $templateCache.put('athena/_dtu/DTU_hongdian_test.html',\n    \"<input tl-wrap-l label=终端ID required ng-model=daserver.params.simid ng-change=\\\" toUpdate('daserver') \\\">\"\n  );\n\n\n  $templateCache.put('athena/_point/FCS_MODBUS.html',\n    \"<div class=hidden ng-init=\\\" _config = $sys.point[ dm.driver_id] ; \\n\" +\n    \"              _config.AreaCC( point , this  , true ) \\\"></div><select tl-wrap label=数据区 ng-model=point.params.area ng-change=\\\"   _config.AreaCC( point , this ) \\\" ng-options=\\\"  o.v as o.k for  o in  _config.area  \\\"></select><input tl-wrap label=偏移地址 required type=Number max=65535 min=0 ng-model=\\\"point.params.offset\\\"><select tl-wrap label=数据类型 ng-model=point.params.type ng-change=\\\"  _config.TypeCC( point  , this ) \\\" ng-options=\\\" o.v as o.k for o  in   _dataType \\\"></select><div ng-if=\\\"  point.params.area  >1  && point.params.type == 0    \\\"><input tl-wrap required label=位偏移 type=number max=15 min=0 placeholder=\\\" 0 - 15 \\\" tl-default=0 ng-model=\\\"point.params.type_ex\\\"></div><div ng-if=\\\"  point.params.area  >1 && (point.params.type == 1 || point.params.type == 2)  \\\"><select tl-wrap label=字节偏移 ng-model=point.params.type_ex ng-options=\\\" o.v as o.k for o  in  _config.hlbyte \\\"></select></div><div ng-if=\\\"  point.params.area  >1  &&    point.params.type >= 12  \\\"><input tl-wrap required label=字节长度 type=number max=128 min=1 placeholder=\\\"1 - 128 \\\" ng-model=\\\"point.params.type_ex\\\"></div><div ng-if=\\\" point.params.area >1 && point.params.type == 8  \\\"><input tl-wrap required label=BCD码长度 type=number max=63 min=1 placeholder=\\\"1 - 63 \\\" ng-model=point.params.type_ex></div><select tl-wrap label=访问方式 ng-model=point.params.access ng-options=\\\" o.v as o.k for o in  _accerssType \\\"></select>\"\n  );\n\n\n  $templateCache.put('athena/_point/PI_SHCYA.html',\n    \"<div ng-init=\\\" _config = $sys.point[ dm.driver_id] \\\"></div><input tl-wrap label=公共地址 required type=Number max=65535 min=0 ng-model=point.params.app_address><select tl-wrap label=类型标识 ng-model=point.params.type_id ng-options=\\\" o.v as o.k for  o  in _config.type_id\\\"></select><input tl-wrap label=信息体地址 required type=Number max=65535 min=0 ng-model=point.params.infor_address>\"\n  );\n\n\n  $templateCache.put('athena/_point/PLC_MITSUBISHI_FX_PG.html',\n    \"<div class=hidden ng-init=\\\" _config = $sys.point[ dm.driver_id] ; \\n\" +\n    \"              _config.AreaCC( point , this  , true ) \\\"></div><select tl-wrap label=数据区 ng-model=point.params.area ng-change=\\\"   _config.AreaCC( point , this ) \\\" ng-options=\\\"  o.v as o.k for  o in  _config.area  \\\"></select><div ng-if=\\\" point.params.area  <= 1 \\\"><input tl-wrap label=偏移地址 required type=Number max=377 min=0 pattern=^[0-7]*$ ng-model=\\\"point.params.offset\\\"></div><div ng-if=\\\"  point.params.area==4 || point.params.area==5 || point.params.area==8 || point.params.area==9 \\\"><input tl-wrap label=偏移地址 required type=Number max=255 min=0 ng-model=\\\"point.params.offset\\\"></div><div ng-if=\\\" point.params.area == 2 \\\"><input tl-wrap label=偏移地址 required type=Number max=3071 min=0 ng-model=\\\"point.params.offset\\\"></div><div ng-if=\\\" point.params.area == 3 \\\"><input tl-wrap label=偏移地址 required type=Number max=999 min=0 ng-model=\\\"point.params.offset\\\"></div><div ng-if=\\\" point.params.area == 6 \\\"><input tl-wrap label=偏移地址 required type=Number max=8999 min=0 ng-model=\\\"point.params.offset\\\"></div><div ng-if=\\\" point.params.area == 7 \\\"><input tl-wrap label=偏移地址 required type=Number max=8255 min=8000 ng-model=\\\"point.params.offset\\\"></div><select tl-wrap label=数据类型 ng-model=point.params.type ng-change=\\\"  _config.TypeCC( point  , this ) \\\" ng-options=\\\" o.v as o.k for o  in   _dataType \\\"></select><div ng-if=\\\"  point.params.area == 6 || point.params.area == 8  || point.params.area == 9 \\\"><div ng-if=\\\" point.params.type == 0    \\\"><input tl-wrap required label=位偏移 type=number max=15 min=0 placeholder=\\\" 0 - 15 \\\" tl-default=0 ng-model=\\\"point.params.type_ex\\\"></div><div ng-if=\\\" point.params.type == 11   \\\"><input tl-wrap required label=长度 type=number max=31 min=1 placeholder=\\\" 1 - 31 \\\" tl-default=0 ng-model=\\\"point.params.type_ex\\\"></div><div ng-if=\\\" point.params.type  == 1 ||  point.params.type  == 2   \\\"><select tl-wrap label=高低字节 ng-model=point.params.type_ex ng-options=\\\" o.v as o.k for o  in  _config.hlbyte \\\"></select></div></div><select tl-wrap label=访问方式 ng-model=point.params.access ng-options=\\\" o.v as o.k for o in  _accessType \\\"></select>\"\n  );\n\n\n  $templateCache.put('athena/_point/PLC_SIEMENS_PPI.html',\n    \"<div ng-init=\\\"\\n\" +\n    \"    _config = $sys.point[ dm.driver_id] ;  \\n\" +\n    \"    _config.areaCC( this ,point , true) ;     \\\"></div><select tl-wrap label=\\\"数据区 \\\" ng-model=point.params.area ng-options=\\\" o.v as o.k for  o  in _config.area\\\" ng-change=\\\" _config.areaCC( this, point  ) \\\"></select><input tl-wrap label=偏移地址 required type=Number max=65535 min=0 ng-model=point.params.offset><div ng-if=\\\"point.params.area != 6  && point.params.area != 8 \\\"><select tl-wrap label=\\\"数据类型 \\\" ng-model=point.params.type ng-options=\\\"  o.v as o.k for  o  in _dataType\\\" ng-change=\\\"_config.typeCC( point )\\\"></select></div><div ng-if=\\\" point.params.type ==9 \\\"><input tl-wrap label=字符串长度 required type=Number max=127 min=1 ng-model=point.params.type_ex></div><div ng-if=\\\" point.params.type== 0 \\\"><input tl-wrap label=位偏移 required type=Number max=65535 min=0 ng-model=point.params.type_ex></div>\"\n  );\n\n\n  $templateCache.put('athena/account/_user_form.html',\n    \"<input tl-wrap-l label=用户名 ng-model=\\\" user.username  \\\" ng-model-options=\\\" { updateOn: 'blur' } \\\" required ng-change=\\\"ccField('username' , user.username)\\\"> <input tl-wrap-l label=昵称 ng-model=\\\" user.nickname   \\\" ng-change=\\\"ccField('nickname' , user.nickname)\\\"><div class=form-group ng-if=!isAdd><label class=\\\"col-sm-3 control-label\\\"><span>更改密码</span></label><div class=col-sm-9><label class=\\\"i-checks m-t-xs\\\"><input type=checkbox ng-model=op.ccpass> <i></i></label></div></div><div ng-if=op.ccpass><input tl-wrap-l label=新密码 name=password ng-minlength=6 ng-maxlength=20 ng-change=\\\"ccField('password' , user.password)\\\" ng-model=\\\" user.password \\\" required></div><div class=form-group ng-if=isAdd><label class=\\\"col-sm-3 control-label text-base\\\"><mark></mark> 密码</label><div class=col-sm-8><input type=password placeholder=密码(至少六位) name=password ng-maxlength=20 ng-minlength=6 class=form-control ng-model=\\\" user.password \\\" required></div></div><div class=form-group ng-if=isAdd><label class=\\\"col-sm-3 control-label text-base\\\"><mark></mark> 确认密码</label><div class=col-sm-8><input type=password class=form-control name=confirm_password required ng-model=op.confirm_password placeholder=\\\" 确认密码 \\\" ui-validate=\\\" '$value==user.password' \\\"></div></div><input tl-wrap-l label=手机号码 ng-model=user.mobile_phone ng-pattern=\\\"/^1\\\\d{10}$/\\\" ng-change=\\\"ccField('mobile_phone' , user.mobile_phone)\\\"> <input tl-wrap-l label=电子信箱 ng-model=user.email type=email ng-disabled=\\\" user.is_super_user\\\" ng-change=\\\"ccField('email' , user.email)\\\"> <input tl-wrap-l label=地址 ng-model=user.address ng-change=\\\"ccField('address' , user.address)\\\"><textarea tl-wrap-l label=备注 ng-maxlength=100 ng-model=user.desc ng-change=\\\"ccField('desc' , user.desc)\\\">\\n\" +\n    \"\\n\" +\n    \"\\n\"\n  );\n\n\n  $templateCache.put('athena/account/account_info.html',\n    \"<div class=\\\"bg-light lter b-b wrapper-md ng-scope\\\"><h2 class=\\\"m-n font-thin h4\\\">{{user.account }}</h2></div><div class=wrapper-md><div class=row><div class=\\\"col-md-4 col-sm-12\\\"><div class=\\\"panel panel-default\\\"><div class=panel-heading>账户信息</div><div class=\\\"list-group no-radius alt\\\" style=\\\"color: #1f2427\\\"><span class=list-group-item><span class=pull-right style=\\\"color: #333333\\\">{{account.create_time | date:\\\"yyyy-MM-dd HH:mm Z\\\" }}</span> 创建时间</span> <span class=list-group-item><span class=\\\"badge bg-info\\\">{{regionNum}}</span> 区域数量</span> <span class=list-group-item><span class=\\\"badge bg-info\\\">{{userNum }}</span> 用户数量</span> <span class=list-group-item><span class=pull-right style=\\\"color: #333333\\\">{{user.username}}</span> 管理员</span></div></div></div><div class=\\\"col-md-4 col-sm-6 col-xs-12\\\"><div class=\\\"panel panel-default\\\" ng-if=\\\" initChart_sys \\\"><div class=panel-heading>系统数量</div><div class=\\\"panel-body text-center\\\"><h4 style=\\\"color: #333333\\\">{{ totalSys }}</h4><small class=\\\"text-muted block\\\">系统数量</small><div class=inline><div ui-jq=easyPieChart ui-options=\\\"{\\n\" +\n    \"                      percent: {{ totalSys_act*100 /  totalSys }},\\n\" +\n    \"                      lineWidth: 10,\\n\" +\n    \"                      trackColor: '#e8eff0',\\n\" +\n    \"                      barColor: '#7266ba',\\n\" +\n    \"                      scaleColor: '#e8eff0',\\n\" +\n    \"                      size: 188,\\n\" +\n    \"                      lineCap: 'butt'\\n\" +\n    \"\\n\" +\n    \"                    }\\\" class=easyPieChart style=\\\"width: 188px; height: 188px; line-height: 188px\\\"><div style=\\\"color: #333333\\\"><span class=\\\"h2 m-l-sm step\\\">{{ totalSys_act }}</span>个<div class=\\\"text text-sm\\\">已激活</div></div><canvas width=188 height=188></canvas></div></div></div></div></div><div class=\\\"col-md-4 col-sm-6 col-xs-12\\\"><div class=\\\"panel panel-default\\\" ng-if=\\\" initChart_alarm \\\"><div class=panel-heading>报警数量</div><div class=\\\"panel-body text-center\\\"><h4 style=\\\"color: #333333\\\">{{totalAlarm }}</h4><small class=\\\"text-muted block\\\">本周报警</small><div class=inline><div ui-jq=easyPieChart ui-options=\\\"{\\n\" +\n    \"                      percent:  {{ totalAlarm_act*100 / totalAlarm }},\\n\" +\n    \"                      lineWidth: 10,\\n\" +\n    \"                      trackColor: '#e8eff0',\\n\" +\n    \"                      barColor: 'red',\\n\" +\n    \"                      scaleColor: '#e8eff0',\\n\" +\n    \"                      size: 188,\\n\" +\n    \"                      lineCap: 'butt'\\n\" +\n    \"                    }\\\" class=easyPieChart style=\\\"width: 188px; height: 188px; line-height: 188px\\\"><div style=\\\"color: #333333\\\"><span class=\\\"h2 m-l-sm step\\\">{{totalAlarm_act }}</span>个<div class=\\\"text text-sm\\\">未处理</div></div><canvas width=188 height=188></canvas></div></div></div></div></div></div></div>\"\n  );\n\n\n  $templateCache.put('athena/account/account_weichat.html',\n    \"<div class=\\\"bg-light lter b-b wrapper-md ng-scope\\\"><h2 class=\\\"m-n font-thin h4\\\">微信绑定</h2></div><div load-mask></div><div class=\\\"panel panel-body\\\" ng-if=\\\"op.step == -1 \\\"><div class=\\\"col-md-8 col-md-offset-3 col-xs-12\\\"><h4 class=m-t-xxl>以下是您的微信服务号信息</h4><div class=hbox><div class=\\\"col w-sm\\\">微信号</div><div class=\\\"col text-muted\\\">{{:: wei.wechat_id || '......'}}</div></div><div class=hbox><div class=\\\"col w-sm\\\">URL (服务器地址)</div><div class=\\\"col text-muted\\\">{{:: wei.server_url || '......'}}</div></div><div class=text-muted>如果您想取消绑定, 或者更改微信服务号账号信息, 您可以 &nbsp; <a class=text-info ng-click=unBindServer()>注销服务号</a></div></div></div><div class=wrapper-md ng-if=\\\"op.step >= 0\\\"><div class=\\\"panel panel-default\\\"><div class=\\\"panel-heading text-center\\\" style=min-height:50px><div class=row><ul ng-if=\\\"op.step !== 0 \\\" id=breadcrumb class=m-b-none><li class=\\\"{{ op.step ==1 ? '':'resolve' }}\\\"><a><span>1</span> <i ng-if=\\\"op.step> 1\\\" class=\\\"fa fa-check-circle text-success\\\"></i> 验证微信帐号</a></li><li class=\\\"{{ op.step ==2? '' :'resolve' }}\\\"><a><span>2</span> <i ng-if=\\\"op.step> 2\\\" class=\\\"fa fa-check-circle text-success\\\"></i> 基本信息设置</a></li><li class=\\\"{{ op.step ==3 ? '' :'resolve' }}\\\"><a><span>3</span> 完成</a></li></ul></div></div><div class=panel-body load-mask><div class=row><div ng-if=\\\"op.step === 0 \\\" class=\\\"col-md-6 col-md-offset-3 col-xs-12\\\"><h4>欢迎使用ThingLinx企业微信号服务号功能</h4><p>开通此项服务您可以快速获得一个微信后端服务器,并与您微信号绑定,让您的用户能够访问此微信服务号.</p><h5>现以下功能:</h5><ul><li>基于区域的系统查看更能</li><li>系统产生报警的推送及查看功能</li><li>系统搜索功能</li></ul><div class=text-center><button class=\\\"btn btn-success btn-sm w-xs\\\" ng-click=\\\"op.step=1\\\">开始</button></div></div><div ng-if=\\\"op.step === 1 \\\" class=\\\"col-md-6 col-md-offset-3 col-xs-12\\\"><form role=form name=form1 class=form-validation><div class=\\\"form-group input-group\\\"><label>请输入您的企业微信号</label><input id=wei_no class=form-control style=width:80% ng-model=\\\"wei.wechat_id \\\" required> <span class=input-group-btn><button class=\\\"btn btn-default\\\" type=button ng-click=createUrl()>生成URL</button></span></div><div class=\\\"form-group input-group\\\"><label>URL(服务器地址)</label><input id=weichat_server_url class=form-control style=width:80% ng-model=wei.server_url> <span class=input-group-btn><button class=\\\"btn btn-default\\\" type=button id=copy_url ng-init=enbaleCopy() data-clipboard-target=#weichat_server_url>复制连接</button></span></div><p class=\\\"m-t-n text- muted\\\">请先复制以上地址到微信公众平台完成验证,再返回此页面继续操作.</p><div class=\\\"alert alert-danger\\\" ng-if=op.verifyError>该账号微信服务器地址未通过微信验证!</div><div class=\\\"alert alert-success\\\" ng-if=op.verifySuccess>验证成功!</div><div class=text-center><button type=submit class=\\\"btn btn-default btn-sm\\\" ng-disabled=\\\" !wei.server_url \\\" ng-click=verifyUrl()>查询验证状态</button></div></form><br><br><br><br></div><div ng-if=\\\"op.step === 2 \\\" class=\\\"col-md-9 col-md-offset-2 col-xs-12\\\"><form class=form-horizontal name=step2><div class=\\\"col-md-8 col-xs-12 m-t-lg\\\"><div class=form-group><label class=\\\"col-sm-3 control-label\\\" style=text-align:left>&nbsp;图片预览</label><div class=col-sm-8><div id=weichat_logo_preview style=\\\"width:300px ; height:70px; border-style:dashed;border-width:2px\\\"><button onclick=file.click() class=\\\"pos-abt no-border no-bg\\\" style=\\\"margin-top: 20px; margin-left:100px; color:#19a9d5\\\">点击上传</button></div><button class=\\\"no-bg no-border\\\" style=color:#19a9d5 onclick=\\\"file.click(); return false\\\">更换</button><p class=text-muted>图片尺寸550*70px</p><input type=file name=file onchange=\\\"angular.element(this).scope().setFiles( this )\\\" style=\\\"margin-top:-80px; opacity:0; margin-left:100px\\\" accept=image/*></div></div><br><p class=\\\"text-muted m-t-lg\\\">以下企业联系方式蒋展示于您的公众号菜单,以便用户与您联系</p><input tl-wrap label=官网地址 left><input tl-wrap label=电子邮箱 ng-model=wei.email required left><input tl-wrap label=联系电话 ng-model=wei.phoneno required left></div><div class=\\\"col-md-4 col-xs-12 m-t-n\\\"><img src=img/weichat_logo.png></div><div class=\\\"col-md-8 col-xs-12 m-t-lg\\\"><p class=text-muted>您可以对现有公众号菜单进行命名</p><div class=\\\"col-md-11 col-xs-12\\\"><div class=form-group><label>区域查询： 查看区域状态以及根据区域查看系统</label><input class=form-control ng-model=menu[0] required></div><div class=form-group><label>报警查询：查看系统产生的报警</label><input class=form-control ng-model=menu[1] required></div><div class=form-group><label>系统信息查询：扫码或根据条件搜索系统并查看状态</label><input class=form-control ng-model=menu[2] required></div><div class=form-group><label><mark></mark> 微信AppId</label><input class=form-control ng-model=wei.appid required></div><div class=form-group><label><mark></mark> 微信AppSecret</label><input class=form-control ng-model=wei.appsecret required></div></div><div class=text-center><button id=222 class=\\\"btn btn-sm btn-default w-xs\\\" ng-click=setp2Commit()>下一步</button></div></div><div class=\\\"col-md-4 col-xs-12 m-g-n\\\"><img src=img/weichat_menu.png></div></form></div><div ng-if=\\\"op.step === 3 \\\" class=\\\"col-md-6 col-md-offset-3 col-xs-12\\\"><h4>恭喜！ 您的微信服务号设置已经完成, 蒋于xx 分钟内生效.</h4><h5>您现在可以:</h5><ul><li>查看您的微信服务号帐号信息</li><li>更改帐号信息 或 取消绑定</li></ul><div><button class=\\\"btn btn-success btn-sm w-xs\\\" ng-click=\\\" op.step = -1 \\\">前往</button></div></div></div></div></div></div>\"\n  );\n\n\n  $templateCache.put('athena/account/author.html',\n    \"<div class=\\\"panel-body no-padder bg-light bg-white card\\\"><h4 class=center>账户信息</h4><div class=\\\"col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3 m-b-lg m-t-l text-base\\\"><div class=\\\"b-b line-dashed jbox\\\"><span>账户名称</span> <span class=\\\"float-right color-5\\\">{{account.name}}</span></div><div class=\\\"b-b line-dashed jbox\\\"><span>注册时间</span> <span class=\\\"float-right color-5\\\">{{account.create_time | date:\\\"yyyy-MM-dd HH:mm Z\\\" }}</span></div><div class=\\\"b-b line-dashed jbox\\\"><span>系统数量</span> <span class=\\\"float-right color-5\\\">{{system.group_id}}</span></div><div class=\\\"b-b line-dashed jbox\\\"><span>用户数量</span> <span class=\\\"float-right color-5\\\">{{ $sys.sysModelMode.values[systemModel.mode] }}</span></div><div class=\\\"b-b line-dashed jbox\\\"><span>用户组数量</span> <span class=\\\"float-right color-5\\\">{{ systemModel.comm_type }}</span></div><div class=\\\"b-b line-dashed jbox\\\"><span>购买系统数量</span> <span class=\\\"float-right color-5\\\">{{ system.network.daserver.network.type}}</span></div><div class=jbox><div class=inline>存储空间占用</div><div class=\\\"inline w-xl float-right m-t\\\"></div></div></div></div>\"\n  );\n\n\n  $templateCache.put('athena/account/author_region_add.html',\n    \"<div class=modal-header><h4>添加区域权限</h4></div><div class=modal-body><form name=form class=\\\"form-validation form-horizontal\\\"><select ng-if=filter_regions tl-wrap-l label=区域 ng-model=\\\" od.region \\\" class=form-control ui-jq=chosen source-arr=filter_regions k=name v=id&name required><option value>-请选择区域-</option></select><select tl-wrap-l ng-model=od.role label=角色 required ng-options=\\\" r as r.name for r in  roles| filter:{'role_category': 1 } \\\"><option value=\\\"\\\">-请选角色-</option></select><div class=form-group><div class=\\\"col-sm-3 control-label\\\">权限</div><div class=col-sm-8><a class=\\\"badge bg-info\\\" ng-repeat=\\\"p in  od.role.privilege\\\" translate={{p}}></a></div></div></form></div><ng-include src=\\\" 'athena/debris/_modal_footer.html' \\\"></ng-include>\"\n  );\n\n\n  $templateCache.put('athena/account/edit_user_popwin.html',\n    \"<span class=pos-rlt><div class=\\\"w bg-light dk border well\\\" style=\\\"position: absolute;\\n\" +\n    \"\\t                            top: 100%;\\n\" +\n    \"\\t                            left: 0;\\n\" +\n    \"\\t                            z-index: 9000; \\n\" +\n    \"\\t                            float: left\\\"><form role=form class=\\\"ng-pristine ng-valid\\\"><div class=form-group><label>Email address</label><input type=email class=form-control placeholder=\\\"Enter email\\\"></div><div class=form-group><label>Password</label><input type=password class=form-control placeholder=Password></div><div class=checkbox><label class=i-checks><input type=checkbox checked disabled><i></i> Check me out</label></div><button type=submit class=\\\"btn btn-sm btn-primary\\\">Submit</button></form></div></span>\"\n  );\n\n\n  $templateCache.put('athena/account/role.html',\n    \"<div class=\\\"bg-light lter b-b wrapper-md ng-scope\\\"><h2 class=\\\"m-n font-thin h4\\\">角色管理</h2></div><div class=wrapper-md><ul class=\\\"nav nav-tabs m-t-xxs bg-normal\\\"><li ui-sref-active=active><a ui-sref=app.role.region><i class=\\\"icon icon-screen-desktop\\\"></i> <span translate=区域></span></a></li><li ui-sref-active=active><a ui-sref=app.role.account><i class=\\\"icon icon-user\\\"></i> <span translate=账户></span></a></li></ul><div ui-view class=\\\"panel panel-default b-t-none\\\"></div></div>\"\n  );\n\n\n  $templateCache.put('athena/account/role_add.html',\n    \"<div class=modal-header><h4>添加角色</h4></div><div class=modal-body><form name=form class=\\\"form-validation form-horizontal\\\"><input tl-wrap ng-model=r.name required label=角色名称><div class=\\\"row m-b\\\"><div class=\\\"col-sm-3 col-sm-offset-1 text-right\\\">权限</div><div class=col-sm-8><label class=\\\"i-checks inline w-sm\\\" ng-repeat=\\\" a in promise\\\"><input type=checkbox ng-model=\\\"r.authors[ a]\\\"> <i></i> <span translate={{a}} style=margin-left:0 popover-trigger=mouseenter popover=\\\" {{ $sys.permissionDesc[a] }} \\\" popover-placement=right></span></label></div></div></form></div><ng-include src=\\\" 'athena/debris/_modal_footer.html' \\\"></ng-include>\"\n  );\n\n\n  $templateCache.put('athena/account/role_panel.html',\n    \"<div class=\\\"panel-body table-responsive no-padder no-border b-t\\\" load-mask><table class=\\\"table table-hover table-striped b-t-none\\\"><thead class=flip-content><tr><th width=15%>名称</th><th width=75%>权限</th><th width=5%>修改</th><th width=5%>删除</th></tr></thead><tbody><tr ng-repeat=\\\"  role in  roles\\\"><td>{{role.name}}</td><td class=text-left>{{ toText (role.privilege) }}</td><td><a class=text-info ng-click=\\\"addRole( role , $index)\\\">修改</a></td><td><a class=text-info ng-click=\\\"delRole( role, $index )\\\">删除</a></td></tr></tbody></table></div><div class=panel-footer>&nbsp; <button class=\\\"btn btn-primary btn-sm w-70 m-l-sm\\\" ng-click=\\\"  addRole(  page.data ) \\\">添加角色</button> &nbsp;<div ng-if=false class=\\\"text-center m-t-sm m-b-sm height-30\\\" ng-include src=\\\" 'athena/debris/_pager.html'  \\\"></div></div>\"\n  );\n\n\n  $templateCache.put('athena/account/user_detail.html',\n    \"<div class=\\\"bg-light lter b-b wrapper-sm padder-md\\\"><h2 class=\\\"m-n font-thin h4\\\">{{ user.username }}</h2><a ng-if=from href={{from.url}} class=text-xs>返回 <span class=text-info>{{from.text}}</span></a></div><div class=\\\"col-md-4 col-xs-12 m-t\\\"><div class=\\\"panel panel-default\\\"><div class=panel-heading><button ng-if=userself class=\\\"btn btn-sm btn-default pull-right m-t\\\" ng-click=reSetPW()>修改密码</button> <button ng-if=!userself class=\\\"btn btn-sm btn-default pull-right m-t\\\" ng-click=\\\"editUser( user )\\\">修改用户</button><p class=m-t><span class=\\\"thumb text-muted\\\">用户名</span> <span>{{user.username}}</span></p><p><span class=\\\"thumb text-muted\\\">昵称</span> <span>{{user.nickname}}</span><popwin ng-if=userself ng-model=user prop=nickname handler=\\\" updateUser \\\"></p><p class=\\\"text-xs m-t-xxl\\\"><span class=\\\"thumb-lg text-muted\\\">上次登录时间</span> <span>{{:: user.last_login_ip }}</span></p><p class=text-xs><span class=\\\"thumb-lg text-muted\\\">上次登录ip</span> <span>{{:: user.last_login_time | date:\\\"yyyy-MM-dd HH:mm Z\\\" }}</span></p></div><div class=panel-body><div class=\\\"bg-light lter m-l-n m-r-n wrapper\\\" style=\\\"background-color: #fff\\\"><p class=\\\"m-b-n-xs text-muted\\\"><i class=\\\"glyphicon glyphicon-phone m-r-xs\\\"></i> <span class=text-xs>电话</span></p><p>{{user.mobile_phone}}&nbsp; <span ng-if=user.mobile_phone_verified class=\\\"label bg-light text-success-lt inline m-t-sm\\\" style=background:#dff0d8>已验证</span> <span ng-if=!user.mobile_phone_verified class=\\\"label bg-light dker inline m-t-sm\\\">未验证</span> <a ng-if=userself class=\\\"pull-right text-muted fa fa-pencil m-t-xm\\\" ng-click=validPhone()></a></p><p class=\\\"m-b-n-xs text-muted\\\"><i class=\\\"fa fa-envelope m-r-xs\\\"></i> <span class=text-xs>邮箱</span></p><p>{{user.email }}&nbsp; <span ng-if=user.email_verified class=\\\"label bg-light text-success-lt inline m-t-sm\\\" style=background:#dff0d8>已验证</span> <span ng-if=!user.email_verified class=\\\"label bg-light dker inline m-t-sm\\\">未验证</span> <a ng-if=userself class=\\\"pull-right text-muted fa fa-pencil m-t-xm\\\" ng-click=validEmail()></a></p><p class=\\\"m-b-n-xs text-muted\\\"><i class=\\\"fa fa-map-marker m-r-xs\\\"></i> <span class=text-xs>地址</span></p><p class=m-t-xs>{{user.address}}&nbsp;<popwin ng-if=userself classfor=pull-right ng-model=user prop=address handler=\\\" updateUser \\\"></p><p class=\\\"m-b-n-xs text-muted\\\"><i class=\\\"fa fa-bookmark m-r-xs\\\"></i> <span class=text-xs>备注</span></p><p class=m-t-xs>{{user.desc }} &nbsp;<popwin ng-if=userself classfor=pull-right ng-model=user prop=desc handler=\\\" updateUser \\\"></p><p ng-if=userself class=m-t-lg>接收短信报警<label class=\\\"i-switch bg-info pull-right\\\"><input type=checkbox ng-model=user.sms_notice ng-change=\\\" acceptAlarm('sms_notice')\\\" class=\\\"ng-pristine ng-valid\\\"> <i></i></label></p><p ng-if=userself class=m-t>接收邮件报警<label class=\\\"i-switch bg-info pull-right\\\"><input type=checkbox ng-model=user.mail_notice ng-change=\\\" acceptAlarm('mail_notice')\\\" class=\\\"ng-pristine ng-valid\\\"> <i></i></label></p></div></div></div></div><div class=\\\"col-md-8 col-xs-12 m-t\\\" load-mask><div class=\\\"panel panel-default\\\"><div class=panel-heading>账户设置</div><div class=\\\"panel-body no-padder\\\"><div class=\\\"m-l m-t text-lg\\\">账户权限</div><div class=\\\"row m-t-sm\\\"><label class=\\\"col-sm-2 control-label m-t-xs m-l\\\">角色</label><div class=col-sm-8><form name=form><select class=\\\"form-control w\\\" name=accountRol ng-model=\\\" user.accountRol.id \\\" ng-disabled=userself ng-change=addAccountRole() ng-options=\\\" obj.id as obj.name for obj  in roles | filter: {  role_category: 0 } \\\"><option value=\\\"\\\">--无--</option></select></form></div><p class=\\\"col-sm-offset-2 col-sm-8\\\"><span class=\\\"text-muted text-xs m-l\\\">权限包括: {{ user.accountRol.prText }}</span></p></div><div class=\\\"m-l m-t text-lg\\\">区域权限</div><div class=table-responsive><table class=\\\"table table-condensed table-hover table-striped\\\"><thead class=flip-content><tr><th width=25%>区域</th><th width=25% ng-if=\\\"! user.is_super_user\\\">角色</th><th ng-if=\\\" !user.is_super_user\\\">权限</th><th width=5% ng-if=userself>接收报警</th><th class=w-50 ng-if=!userself>移除</th></tr></thead><tbody ng-if=\\\" page.data && roles \\\"><tr ng-repeat=\\\"  rr in  page.data \\\" ng-init=\\\" privilge2Text( rr  , this ) \\\"><td>{{:: rr.region_name || rr.name }}</td><td ng-class=\\\"{'no-padder': !userself }\\\" ng-if=\\\"! user.is_super_user\\\"><span ng-if=userself>{{:: rr.role_name }}</span><select ng-if=!userself ng-model=rr.role_id class=form-control ng-change=\\\"ccRegionRole( rr , this )\\\" ng-options=\\\" r.id as r.name for r  in roles | filter:{'role_category': 1 } \\\"></select></td><td ng-if=\\\"! user.is_super_user\\\" class=\\\"text-xs no-padder\\\"><div style=margin:0px;white-space:normal;word-wrap:break-word;word-break:break-all;line-height:1.4 class=padder>{{ rr.prText }}</div></td><td ng-if=userself><label class=\\\"checkbox i-checks m-t-none m-b-none\\\"><input type=checkbox ng-model=\\\" rr.acceptAlarm \\\" ng-change=\\\"acceptRegionAlarm( rr )\\\"> <i></i></label></td><td ng-if=!userself><a href=\\\"\\\" class=text-info ng-click=\\\"delRegionAuthor( rr , $index )\\\">移除</a></td></tr><tr></tr></tbody></table></div></div><div class=\\\"panel-footer b-t\\\" style=\\\"min-height: 40px\\\"><button ng-if=\\\" !userself \\\" class=\\\"btn btn-info m-t-n-xs btn-sm m-l-sm pull-left\\\" ng-click=addRegionAuthor()>添加区域权限</button><div ng-if=user.is_super_user class=text-center><pagination class=pagination-sm total-items=page.total ng-model=page.currentPage items-per-page=\\\" 5 \\\" ng-change=\\\" loadPageData( page.currentPage   ) \\\" num-pages=\\\" page.numPages \\\" max-size=10 boundary-links=true rotate=false first-text=&laquo; previous-text=&lsaquo; next-text=&rsaquo; last-text=&raquo;></pagination></div></div></div></div>\"\n  );\n\n\n  $templateCache.put('athena/account/users.html',\n    \"<div class=\\\"bg-light lter b-b wrapper-md ng-scope\\\"><h2 class=\\\"m-n font-thin h4\\\">用户管理</h2></div><div class=wrapper-md><div class=\\\"panel panel-default\\\"><div class=panel-heading>全部用户</div><div class=\\\"panel-body no-padder no-border\\\" load-mask><div class=\\\"input-group-sm col-md-5 col-xs-12 wrapper\\\"><div class=\\\"col-md-8 col-sm-6 col-xs-8 no-padder\\\"><input style=\\\"border-radius: 2px\\\" class=\\\"form-control input-sm\\\" ng-model=op.f_name></div><div class=\\\"col-md-4 col-sm-6 col-xs-4 text-base\\\"><button class=\\\"btn btn-info btn-sm\\\" ng-click=\\\" loadPageData(1)\\\">搜索</button></div></div><div class=table-responsive><table class=\\\"table table-hover table-condensed table-striped b-t\\\"><thead class=flip-content><tr><th style=\\\"text-align: left;padding-left: 30px\\\" width=20%>名称</th><th>昵称</th><th>验证</th><th>上次登录时间</th><th>上次登录IP</th><th>备注</th><th>操作</th></tr></thead><tbody><tr ng-repeat=\\\" u in page.data\\\" ng-if=!u.is_super_user><td><a ui-sref=\\\"app.userdetail({id: u.id })\\\" class=text-info>{{ u.username }}</a><popwin ng-model=u prop=username handler=\\\" updateUser \\\"></td><td>{{ u.nickname }}<popwin ng-model=u prop=nickname handler=\\\" updateUser \\\"></td><td><i class=\\\"glyphicon glyphicon-phone {{:: u.mobile_phone_verified?'text-success':'text-muted'}}\\\"></i> <i class=\\\"fa fa-envelope {{:: u.email_verified?'text-success':'text-muted'}}\\\"></i></td><td>{{u.last_login_time| date:'yyyy-MM-dd HH:mm:ss'}}</td><td>{{ u.last_login_ip }}</td><td>{{ u.desc }}<popwin ng-model=u prop=desc handler=\\\" updateUser \\\"></td><td><a href=\\\"\\\" class=text-info ng-click=\\\"delUser( page.data, u , $index)\\\" translate=del>删除用户</a></td></tr></tbody></table></div></div><div class=panel-footer><button class=\\\"btn btn-primary btn-sm pull-left\\\" ng-click=\\\" createUser() \\\">添加用户</button><div class=text-center ng-include src=\\\" 'athena/debris/_pager.html'  \\\"></div></div></div></div>\"\n  );\n\n\n  $templateCache.put('athena/account/users_edit.html',\n    \"<div class=modal-header><h4 ng-if=isAdd>添加用户</h4><h4 ng-if=!isAdd>编辑用户</h4></div><div class=modal-body style=\\\"padding:10px 12% 0\\\"><form name=form class=\\\"form-horizontal form-validation no-border\\\"><ng-include src=\\\" 'athena/account/_user_form.html' \\\"></ng-include></form></div><ng-include src=\\\" 'athena/debris/_modal_footer.html' \\\"></ng-include>\"\n  );\n\n\n  $templateCache.put('athena/account/users_verify_email.html',\n    \"<div class=modal-header><h4>验证邮箱</h4></div><div class=modal-body><form name=form class=\\\"form-horizontal form-validation no-border\\\"><div class=form-group><label class=\\\"col-sm-3 control-label text-base\\\">电子信箱</label><div class=col-sm-6><div class=input-group><input type=email class=form-control name=email ng-model=u.email ng-disabled=\\\" u.is_super_user\\\"> <span class=input-group-btn><button class=\\\"btn btn-info w-xsm btn-default\\\" type=button id=emailInterval ng-click=\\\"sendEmail( $event )\\\" ng-disabled=\\\"!form.email.$valid || interval.emailInterval \\\">发送验证码</button></span></div></div><div class=col-sm-3><input class=form-control ng-model=\\\"u.num \\\" placeholder=验证码></div></div><div class=form-group><div class=\\\"col-sm-9 col-sm-offset-3\\\"><button class=\\\"btn btn-info\\\" ng-disabled=!u.num ng-click=verifyEmail()>验证邮箱</button></div></div></form></div><div class=modal-footer><button class=\\\"btn btn-sm btn-default w-60\\\" ng-click=\\\" cancel(  ) \\\">关闭</button></div>\"\n  );\n\n\n  $templateCache.put('athena/account/users_verify_phone.html',\n    \"<div class=modal-header><h4>验证手机</h4></div><div class=modal-body><form name=form class=\\\"form-horizontal form-validation no-border\\\"><div class=form-group><label class=\\\"col-sm-3 control-label text-base\\\">手机号码</label><div class=col-sm-6><div class=input-group><input class=form-control name=phone ng-model=u.mobile_phone ng-pattern=\\\"/^1\\\\d{10}$/\\\"> <span class=input-group-btn><button class=\\\"btn btn-info w-xsm btn-default\\\" type=button id=smsInterval ng-click=\\\"sendNote( $event )\\\" ng-disabled=\\\" !form.phone.$valid || interval.smsInterval \\\">发送验证码</button></span></div></div><div class=col-sm-3><input class=form-control ng-model=u.verifi placeholder=验证码></div></div><div class=form-group><div class=\\\"col-sm-9 col-sm-offset-3\\\"><button class=\\\"btn btn-info\\\" ng-click=verifyPhone()>验证手机</button></div></div></form></div><div class=modal-footer><button class=\\\"btn btn-sm btn-default w-60\\\" ng-click=\\\" cancel(  ) \\\">关闭</button></div>\"\n  );\n\n\n  $templateCache.put('athena/app.html',\n    \"<div data-ng-include=\\\" 'athena/header.html' \\\" class=\\\"app-header navbar\\\" style=\\\"box-shadow: 0 2px 2px rgba(0,0,0,0.05)\\\"></div><div data-ng-include=\\\" 'athena/aside.html' \\\" class=\\\"app-aside hidden-xs {{app.settings.asideColor}}\\\"></div><div class=app-content><div ui-butterbar></div><a href class=\\\"off-screen-toggle hide\\\" ui-toggle-class=off-screen data-target=.app-aside></a><div class=\\\"app-content-body bg-normal\\\" ui-view></div></div><div class=\\\"app-footer wrapper b-t text-xs bg-normal\\\"><span class=pull-right ng-controller=service><a class=m-r-xs href=//www.thinglinx.net target=_blank>联系我们</a> <a href=javascript:scroll(0,0) ui-scroll=header class=\\\"m-l-sm m-r-sm\\\"><i class=\\\"fa fa-long-arrow-up\\\"></i></a></span> <span class=p-l>京ICP备14040729号-3</span></div>\"\n  );\n\n\n  $templateCache.put('athena/aside.html',\n    \"<div class=aside-wrap><div class=navi-wrap><nav ui-nav class=navi ng-include=\\\"'athena/nav.html'\\\"></nav></div></div>\"\n  );\n\n\n  $templateCache.put('athena/cc_password.html',\n    \"<div class=\\\"modal-header text-center\\\"><h4>修改密码</h4></div><div class=modal-body><form class=\\\"bs-example form-validation form-horizontal padding-10\\\" name=form><div class=form-group><label class=\\\"col-sm-3 col-sm-offset-1 control-label\\\"><span>原始密码</span></label><div class=col-sm-7><input onfocus=\\\"this.type='password'\\\" ng-model=\\\" op.old_password\\\" required ng-change=\\\" od.msg= false \\\" class=form-control><div class=text-danger ng-show=\\\" od.msg \\\">{{od.msg}}</div></div></div><div class=form-group><label class=\\\"col-sm-3 col-sm-offset-1 control-label\\\"><span>新密码</span></label><div class=col-sm-7><input onfocus=\\\"this.type='password'\\\" ng-model=\\\" op.new_password\\\" required class=form-control></div></div><div class=form-group><label class=\\\"col-sm-3 col-sm-offset-1 control-label\\\"><span>确认新密码</span></label><div class=col-sm-7><input onfocus=\\\"this.type='password'\\\" ng-model=\\\" confirm_password\\\" required name=confirm_password class=form-control ui-validate=\\\" '$value==op.new_password' \\\" ui-validate-watch=\\\" 'op.new_password' \\\"></div></div><div class=form-group><div class=\\\"col-sm-7 col-sm-offset-4\\\"><span ng-show=form.confirm_password.$error.validator class=text-danger>新密码输入不一致</span></div></div></form></div><ng-include src=\\\" 'athena/debris/_modal_footer.html' \\\"></ng-include>\"\n  );\n\n\n  $templateCache.put('athena/contactus.html',\n    \"<pre style=\\\"margin:0; font-size:15px\\\">\\n\" +\n    \"\\n\" +\n    \"\\t总部地址：北京市海淀区农大南路33号兴天海园201\\n\" +\n    \"\\t邮编：100193\\n\" +\n    \"\\t总机：86-10-59835588\\n\" +\n    \"\\t传真：86-10-59835566\\n\" +\n    \"\\t企业邮箱：thinglinx@sunwayland.com.cn\\n\" +\n    \"\\t全国服务投诉监督电话：13911598805\\n\" +\n    \"\\n\" +\n    \"</pre>\"\n  );\n\n\n  $templateCache.put('athena/dastation/_prop_daserver_network.html',\n    \"<div class=\\\"panel-heading b-t b-b m-b-lg\\\">设备网络参数</div><div><form name=form_daserver class=\\\"form-horizontal form-validation m-b-md col-md-8 padder-md\\\" ng-init=\\\"  initDaServer() ; loadSupportDtus();\\\"><div ng-if=\\\" daserver.type =='DTU' \\\" class=\\\"wrap-text-l padder\\\"><select tl-wrap-l label=DTU驱动 required ng-disabled=\\\"  cmway_port  \\\" ng-model=daserver.params.driverid ng-change=\\\" applyDtuData(daserver.params ) ;\\n\" +\n    \"              \\\" ng-options=\\\" o.driver_id as o.name  for o  in dtuList \\\"><option value=\\\"\\\">--请选择DTU驱动--</option></select><div ng-if=daserver.params.driverid ng-include=\\\"  'athena/_dtu/' +daserver.params.driverid + '.html' \\\"></div><input readonly tl-wrap-l label=中心域名 ng-model=cmway_port.inet_ipv4> <input readonly tl-wrap-l label=端口 ng-model=cmway_port.inet_port><div class=\\\"text-muted col-md-9 col-md-offset-3 padding-0\\\"><i class=\\\"fa fa-warning text-warning pos-rlt\\\"></i> DSC地址和端口需要设置到指定的DTU设备中</div></div><div ng-if=\\\"daserver.type =='TcpClient' \\\"><input tl-wrap-l label=SIM卡手机 required ng-model=a type=number> <input tl-wrap-l label=APN required ng-model=a type=number> <input tl-wrap-l label=APN用户名 ng-model=a> <input tl-wrap-l label=APN密码 ng-model=a></div><div ng-if=\\\"daserver.type =='TcpServer' \\\"><div class=\\\"col-sm-12 m-t-xs m-b-sm text-left\\\" style=\\\"padding-left: 0px\\\"><div class=checkbox><label class=i-checks><input type=checkbox ng-checked=true ng-model=isvpn><i></i> 是否使用VPN</label></div></div><div ng-if=true><input tl-wrap-l label=VPN服务器 ng-model=a required type=number> <input tl-wrap-l label=用户名 ng-model=a required> <input tl-wrap-l label=密码 ng-model=a required type=password></div></div><div class=row><div class=\\\"col-md-9 col-md-offset-3 padding m-t\\\"><span><button token=5000 class=\\\"btn btn-sm m-l-xs w-94 btn-success\\\" ng-click=\\\"  updateSystem( 'daserver' ,this);  \\\">保存网络参数</button></span> <span ng-show=\\\" needUpdate.daserver \\\" class=text-danger><i class=\\\"fa fa-exclamation-triangle\\\"></i> 编辑完成后请保存网络参数</span> <span ng-show=\\\" hasSave.daserver \\\"><strong class=\\\"text-info m-lg\\\"><i class=\\\"fa fa-thumbs-o-up\\\"></i> <span>保存成功!</span></strong></span></div></div></form></div>\"\n  );\n\n\n  $templateCache.put('athena/dastation/_prop_gateway_addgateway.html',\n    \"<div class=modal-header><h4 ng-if=isAdd>添加网络配置</h4><h4 ng-if=!isAdd>编辑网络配置</h4></div><div ng-init=\\\"   _type =  ['ETHERNET' ,'GPRS' , 'WIFI' ]  \\\"></div><div class=modal-body><form name=form_gateway class=\\\"form-validation form-horizontal\\\"><select tl-wrap ng-if=isAdd ng-model=op.T ng-options=\\\" t for t in  _type   \\\" label=类型 ng-change=\\\"  op.t = undefined ; op.way = {} \\\" required></select><div ng-if=\\\" op.T == 'ETHERNET' \\\" ng-init=\\\"  op.x =  op.x||'LAN' \\\"><select tl-wrap ng-model=op.x ng-options=\\\" x as x  for x in ['LAN','WLAN'] \\\" label=以太网类型></select><input tl-wrap label=名称 ng-model=\\\" op.t \\\" required> <input tl-wrap label=ip ng-model=\\\" op.way.ip \\\" required> <input tl-wrap label=subnet ng-model=\\\" op.way.subnet \\\" required><div ng-if=\\\" op.x == 'WLAN'  \\\"><input tl-wrap label=gateway ng-model=\\\" op.way.gateway \\\" required> <input tl-wrap label=dns ng-model=\\\" op.way.dns \\\" required></div></div><div ng-if=\\\" op.T == 'GPRS' \\\"><input tl-wrap label=名称 ng-model=\\\" op.t \\\" required> <input tl-wrap label=simid ng-model=\\\" op.way.simid \\\" required> <input tl-wrap label=apn ng-model=\\\" op.way.apn \\\" required> <input tl-wrap label=apn_user ng-model=\\\" op.way.apn_user \\\" required> <input tl-wrap label=apn_password ng-model=\\\" op.way.apn_password \\\" required></div><div ng-if=\\\" op.T == 'WIFI' \\\"><input tl-wrap label=名称 ng-model=\\\" op.t \\\" required> <input tl-wrap label=simid ng-model=\\\" op.way.router \\\" required> <input tl-wrap label=user ng-model=\\\" op.way.user \\\" required> <input tl-wrap label=password ng-model=\\\" op.way.password \\\" required></div></form></div><ng-include src=\\\" 'athena/debris/_modal_footer.html' \\\"></ng-include>\"\n  );\n\n\n  $templateCache.put('athena/dastation/_prop_gateway_device.html',\n    \"<div class=\\\"panel-heading b-t b-b\\\">设备网络参数</div><table class=\\\"table b-b\\\" ng-init=\\\"  initGatewayDevs()\\\"><thead class=flip-content><tr><th width=15%>device_id</th><th width=15%>类型</th><th width=15%>Channel</th><th width=15%>Ip</th><th width=15%>Port</th><th width=15%>proto</th><th width=10%>操作</th></tr></thead><tbody><tr ng-repeat=\\\"   dev  in gatewayDevs  \\\" class=hover ng-init=\\\"  devRef[dev.id] = true  \\\"><td>{{ deviceKV[ dev.id ] }}</td><td>{{ dev.type }}</td><td>{{ dev.params.channel }}</td><td>{{ dev.params.ip }}</td><td>{{ dev.params.port }}</td><td>{{ dev.params.proto }}</td><td><a class=\\\"text-info m-r-xs\\\" ng-click=\\\"c_u_dev( gatewayDevs,  $index , dev   )\\\">编辑</a> <a class=\\\"text-info m-r-xs\\\" translate=bu.bu4 ng-click=\\\"delete_dev( gatewayDevs , $index , dev   )\\\">移除</a></td></tr><tr><td colspan=7 class=text-left><button class=\\\"btn btn-primary btn-sm m-l-lmg w-70\\\" ng-show=\\\" gatewayDevs.length !=  sysmodel.devices.length \\\" ng-click=\\\" c_u_dev(  gatewayDevs  ) \\\">添加设备</button> <span class=text-danger ng-show=\\\" needUpdate.gatewayDevs \\\"><button class=\\\"btn btn-sm w-94 m-l btn-success\\\" ng-click=\\\"  updateSystem( 'gatewayDevs' );  \\\">保存网络参数</button> <i class=\\\"fa fa-exclamation-triangle\\\"></i> 编辑完成后请保存网络参数</span> <span ng-show=\\\" hasSave.gatewayDevs \\\"><strong class=\\\"text-info m-lg\\\"><i class=\\\"fa fa-thumbs-o-up\\\"></i> <span>保存成功!</span></strong></span></td></tr></tbody></table>\"\n  );\n\n\n  $templateCache.put('athena/dastation/_prop_gateway_gateway.html',\n    \"<div class=\\\"panel-heading b-t b-b\\\">网络参数</div><div class=\\\"b-b m-b-lg\\\"><table class=\\\"table table-striped m-b-none\\\" ng-init=\\\" initGateWay() \\\"><thead class=flip-content><tr><th width=10%>类型</th><th width=10%>名称</th><th width=10%>是否可用</th><th width=10%>参数</th><th width=10%>操作</th></tr></thead><tbody ng-repeat=\\\" ($T,$d)  in gateway  \\\"><tr ng-repeat=\\\"  ($t,$way)  in $d  \\\" class=hover><td>{{$T}}</td><td>{{ $t }}</td><td>{{ $way.enable }}</td><td>{{ $way }}</td><td><a class=\\\"text-info m-r-xs\\\" ng-click=\\\"c_u_way ( $T , $t,  $way   )\\\">编辑</a> <a class=\\\"text-info m-r-xs\\\" translate=bu.bu4 ng-click=\\\"del_way ( $T , $t,  $way  )\\\">移除</a></td></tr></tbody><tbody><tr><td colspan=5 class=text-left><button class=\\\"btn btn-primary btn-sm w-94 m-l-lmg\\\" ng-click=\\\" c_u_way( ) \\\">添加网络参数</button> <span class=text-danger ng-show=\\\" needUpdate.gateway \\\"><button class=\\\"btn btn-sm m-l w-94 btn-success\\\" ng-click=\\\"  updateSystem( 'gateway' );  \\\">保存网络参数</button> <i class=\\\"fa fa-exclamation-triangle\\\"></i> 编辑完成后请保存网络参数</span> <span ng-show=\\\" hasSave.gateway \\\"><strong class=\\\"text-info m-lg\\\"><i class=\\\"fa fa-thumbs-o-up\\\"></i> <span>保存成功!</span></strong></span></td></tr><tr><td class=text-left><div class=\\\"checkbox m-l m-t-none m-b-none\\\"><label class=i-checks><input type=checkbox ng-model=enbaleGPS ng-change=enbaleGpsChange()> <i></i> GPS</label></div></td><td ng-if=\\\"enbaleGPS \\\" colspan=2><span>Distance</span><select ng-model=GateWay.GPS.distance class=\\\"input-sm w inline\\\" ng-options=\\\"  k for k  in $sys.gateway.gps_distance\\\" ng-change=\\\" cc() \\\" label=Distance></select></td><td ng-if=\\\"enbaleGPS \\\" colspan=2><span>波特率</span><select ng-model=GateWay.GPS.baud_rate class=\\\"input-sm w inline\\\" ng-change=\\\" cc() \\\" ng-options=\\\"  k for k  in $sys.gateway.gps_baud_rate\\\"></select></td></tr></tbody></table></div>\"\n  );\n\n\n  $templateCache.put('athena/dastation/add_gateway_device.html',\n    \"<div class=modal-header><h4 ng-if=isAdd>添加Gateway Device</h4><h4 ng-if=!isAdd>编辑Gateway Device</h4></div><div class=hiden ng-init=\\\"\\n\" +\n    \"_type  =  [ 'ETHERNET' , 'RS232' , 'RS485' , 'RS422' ] ;\\n\" +\n    \"_proto =  ['tcp' , 'udp'] ;\\n\" +\n    \"\\n\" +\n    \"\\\"></div><div class=modal-body><form name=form class=\\\"form-validation form-horizontal\\\"><div class=\\\"text-center text-danger m-b\\\" ng-show=\\\" iaAdd && ! _$devs.length\\\"><i class=\\\"fa fa-exclamation-triangle\\\"></i> 无可添加设备!</div><select tl-wrap ng-if=isAdd ng-init=\\\"  filterDev()\\\" ng-model=dev.id ng-options=\\\" d.id as d.name for d in _$devs \\\" label=设备 required><option value=\\\"\\\">--请选择设备--</option></select><select tl-wrap ng-model=dev.type label=type ng-options=\\\" t for t in _type\\\" tl-default=ETHERNET when-change=\\\" filterChannel( true ) \\\" required></select><select tl-wrap ng-model=\\\" dev.params.channel \\\" ng-options=\\\"  k as k  for  (k,v)  in  _$channel ||  filterChannel( false )   \\\" label=channel tl-default=LAN_1 when-change=\\\" op._$$edit = true ; \\\" required></select><div ng-if=\\\" dev.params.channel == 'LAN_1'   \\\" ng-init=\\\"op._$$edit  &&  ( dev.params = { channel: dev.params.channel , type:'static'} ) \\\"><input tl-wrap ng-model=dev.params.ip label=ip required> <input tl-wrap ng-model=dev.params.port label=port required><select tl-wrap ng-model=dev.params.proto label=proto ng-options=\\\"  p for p in _proto\\\" tl-default=tcp required></select></div><div ng-if=\\\" dev.params.channel == 'WLAN_1'   \\\" ng-init=\\\" op._$$edit  && ( dev.params = { channel: dev.params.channel , type:'static'} ) \\\"><input tl-wrap ng-model=dev.params.ip label=ip required> <input tl-wrap ng-model=dev.params.subnet label=subnet required> <input tl-wrap ng-model=dev.params.gateway label=gateway required> <input tl-wrap ng-model=dev.params.dns label=dns required></div></form></div><ng-include src=\\\" 'athena/debris/_modal_footer.html' \\\"></ng-include>\"\n  );\n\n\n  $templateCache.put('athena/dastation/dastation_add_temp.html',\n    \"<div class=modal-header><span>添加系统</span></div><div class=modal-body load-mask><form name=form class=\\\"form-horizontal form-validation j_form_15\\\"><input tl-wrap label=系统名称 required ng-model=system.name><select tl-wrap label=所属区域 ng-model=system.region_id ng-disabled=od.selectRegion required ng-options=\\\"  proj.id  as  proj.name  for  proj   in regions \\\"><option value=\\\"\\\">-请选择区域-</option></select><select tl-wrap ng-model=od.systemModel ng-options=\\\" s  as s.name for s in sysModels\\\" label=系统模型 required><option value=\\\"\\\">-请选择系统模型-</option></select><select tl-wrap ng-model=system.profile ng-options=\\\"  p.uuid as p.name for  p  in  profiles \\\" label=系统配置项 required><option value=\\\"\\\">--请选择配置项--</option></select><div class=form-group ng-if=\\\" od.systemModel.mode==1 && od.systemModel.comm_type == 1 \\\" ng-init=\\\" system.network= { daserver: { type:'DTU'}  }; \\\"><label class=\\\"col-sm-3 col-sm-offset-1 control-label\\\"><span>网络类型</span></label><div class=col-sm-7><div class=radio><label class=i-checks><input type=radio value=DTU ng-model=system.network.daserver.type> <i></i> DTU</label></div></div></div><textarea tl-wrap label=备注 ng-maxlength=100 placeholder=\\\" 不应超过100字符\\\" ng-model=\\\" system.desc \\\">\\n\" +\n    \"        </textarea></form></div><ng-include src=\\\" 'athena/debris/_modal_footer.html' \\\"></ng-include>\"\n  );\n\n\n  $templateCache.put('athena/dastation/dastation_prop.html',\n    \"<div class=\\\"bg-light lter b-b wrapper-xs padder-md\\\"><span class=\\\"m-n font-thin h4\\\">{{station.name}}</span> <i class=\\\"m-l fa fa-circle {{ station.online==1 ?'text-success' : 'text-danger' }}\\\"></i> <button class=\\\"btn btn-sm btn-info m-l-lg\\\" ng-if=\\\"station.state != 1\\\" ng-click=\\\"activateStation(  null , station )\\\">激活</button> <button class=\\\"btn btn-sm btn-danger m-l\\\" ng-if=\\\"station.state  ==1\\\" ng-click=\\\"effStation( null , station )\\\">失效</button><br><a ng-if=from class=text-xs href=\\\"{{ from.url }}\\\">返回 <span class=text-info>{{ from.text}}</span></a></div><div class=wrapper-md><ul class=\\\"nav nav-tabs m-t-xxs bg-normal text-base\\\" ng-if=\\\" !isShowModul \\\"><li ui-sref-active=active><a ui-sref=app.m_system_prop._basic><i class=\\\"icon icon-info\\\"></i> 状态</a></li><li ui-sref-active=active><a ui-sref=app.m_system_prop._config><i class=\\\"icon icon-wrench\\\"></i> 配置</a></li><li ui-sref-active=active><a ui-sref=app.m_system_prop.tag><i class=\\\"icon icon-bar-chart\\\"></i> 变量</a></li><li ui-sref-active=active><a ui-sref=app.m_system_prop.trigger><i class=\\\"icon icon-rocket\\\"></i> 触发器</a></li><li ui-sref-active=active><a ui-sref=app.m_system_prop._map><i class=\\\"icon icon-pointer\\\"></i> 位置</a></li></ul><div ui-view></div></div>\"\n  );\n\n\n  $templateCache.put('athena/dastation/dastation_temp.html',\n    \"<div class=\\\"bg-light lter b-b wrapper-md ng-scope\\\"><h2 class=\\\"m-n font-thin h4\\\">{{::isShowModul?\\\"系统\\\":\\\"系统管理\\\" }}</h2></div><div class=wrapper-md><ng-include src=\\\" 'athena/dastation/dastation_temp_panel.html' \\\"></ng-include></div>\"\n  );\n\n\n  $templateCache.put('athena/dastation/dastation_temp_panel.html',\n    \"<div class=\\\"panel panel-default\\\" ng-class=\\\" {'b-t-none':  $state.includes('app.m_region_prop')}\\\" ng-init=\\\" lm = 'list' \\\"><div class=panel-heading ng-if=\\\"!$state.includes('app.m_region_prop')\\\">系统列表</div><div class=\\\"panel-body no-padder\\\" ng-switch on=op.lm load-mask><div class=\\\"row m-l-xs m-r-xs m-t\\\"><div class=\\\"form-group col-lg-2-4 col-sm-6\\\"><label>名称</label><input class=form-control ng-model=\\\"od.name\\\"></div><div class=\\\"form-group col-lg-2-4 col-sm-6\\\"><label>ID</label><input class=form-control ng-model=od.uuid></div><div class=\\\"form-group col-lg-2-4 col-sm-6\\\" ng-if=_$showRegionTH><label>区域</label><select class=form-control ng-model=od.region_id ng-options=\\\"  r.id as r.name for r in  regions\\\"><option value=\\\"\\\">-所有区域-</option></select></div><div class=\\\"form-group col-lg-2-4 col-sm-6\\\"><label>模型</label><select class=form-control ng-model=od.model ng-options=\\\" s.uuid as s.name for s in  sysModels\\\"><option value=\\\"\\\">-所有模型-</option></select></div><div class=\\\"form-group col-lg-2-4 col-sm-6\\\" ng-if=!isShowModul><label>活跃状态</label><select class=form-control label=活跃状态 ng-model=od.state ng-options=\\\" v as k for (k,v) in  $sys.sysState\\\"><option value=\\\"\\\">-全部-</option></select></div><div class=col-xs-12><button class=\\\"btn btn-sm btn-info float-right w-46\\\" ng-click=\\\" loadPageData(1)\\\" token>搜索</button> <button class=\\\"btn btn-sm btn-info m-l float-right w-46\\\" ng-click=\\\"  reset();  \\\">复位</button><div class=\\\"radio pull-right m-r\\\"><label class=i-checks><input type=radio value=map ng-model=\\\" op.lm \\\"> <i></i> 地图</label></div><div class=\\\"radio pull-right m-r m-t\\\"><label class=i-checks><input type=radio value=list ng-model=op.lm> <i></i> 列表</label></div></div></div><div ng-switch-when=list class=table-responsive><table class=\\\"table table-striped table-hover b-t\\\"><thead class=flip-content><tr><th width=5%>状态</th><th width=10%>系统名称</th><th width=10%>ID</th><th width=10% ng-if=_$showRegionTH>区域</th><th width=10% ng-if=!isShowModul>活跃状态</th><th width=20%>备注</th><th width=1% ng-if=\\\" !isShowModul  \\\">激活</th><th width=1% ng-if=\\\" !isShowModul  \\\">同步</th><th width=1% ng-if=\\\" !isShowModul  \\\">删除</th></tr></thead><tbody><tr ng-repeat=\\\"  das  in page.data \\\"><td><i class=\\\"fa fa-circle {{ das.online==1 ?'text-success' : 'text-danger' }}\\\"></i></td><td><a class=text-info-dk ng-click=\\\"goto( _$stationState , das , das )\\\">{{ das.name }}</a><popwin ng-if=\\\" !isShowModul\\\" ng-model=das pk=uuid prop=name handler=\\\"updateSystem \\\"></td><td>{{ :: das.uuid }}</td><td ng-if=_$showRegionTH><a class=text-info-dk ng-click=\\\" goto( _$projState ,   rg_k_v[ das.region_id] ,  rg_k_v[ das.region_id] ) \\\">{{ :: das.region_name }}</a></td><td ng-if=!isShowModul>{{ das.state ==1?\\\"激活\\\":\\\"未激活\\\" }}</td><td>{{das.desc}}<popwin ng-model=das ng-if=\\\" !isShowModul\\\" pk=uuid prop=desc handler=\\\" updateSystem  \\\"></td><td ng-if=\\\" !isShowModul  \\\"><a class=\\\"text-info-dk m-r-xs\\\" ng-if=\\\"das.state ==1 \\\" ng-click=\\\" effStation(page.data , das  ,$index  ) \\\">失效</a> <a class=\\\"text-info-dk m-r-xs\\\" ng-if=\\\" das.state ==0 \\\" ng-click=\\\" activateStation( null,das,$index ,false ) \\\">激活</a></td><td ng-if=\\\" !isShowModul   \\\"><a class=text-info ng-if=\\\" das.state==1 && das.needsync \\\" ng-click=\\\" syncSystem( das , $event , this )\\\" token=5000>同步</a> <span class=text-muted ng-if=\\\" das.state !=1  \\\">同步</span> <i ng-if=\\\" das.state ==1 && !das.needsync \\\" class=\\\"fa fa-check text-success\\\"></i> <i class=\\\"fa fa-spin fa-spinner text-info\\\" style=display:none></i></td><td ng-if=\\\" !isShowModul \\\"><a class=text-info ng-if=\\\"das.state != 1 \\\" ng-click=\\\" delStation( page.data  ,das , $index  ) \\\">删除</a> <span ng-if=\\\"das.state == 1\\\" class=text-muted>删除</span></td></tr></tbody></table></div><div ng-switch-when=map a=xxxxx class=\\\"b-t sys_bdmap\\\" id=bdmap ng-init=\\\" initMap( ); \\\"></div></div><div class=panel-footer ng-if=\\\"op.lm=='list'\\\"><button ng-if=\\\" !isShowModul \\\" class=\\\"btn btn-info btn-sm m-l-sm pull-left\\\" ng-click=\\\" createSystem() \\\">添加系统</button><div class=text-center ng-include src=\\\" 'athena/debris/_pager.html'  \\\"></div></div></div><div id=xxxxx></div>\"\n  );\n\n\n  $templateCache.put('athena/dastation/prop_basic.html',\n    \"<div class=\\\"panel panel-default b-t-none\\\"><div class=panel-body><div class=row><div class=\\\"col-md-6 col-xs-12\\\"><div class=list-group><span class=\\\"list-group-item no-border\\\">系统Id <span class=pull-right>{{ :: station.uuid }}</span></span> <span class=\\\"list-group-item no-border\\\">所属区域 <span class=pull-right><a class=text-info ui-sref=\\\"app.m_region_prop.system({id: station.region_id })\\\">{{ station.region_name }}</a></span></span> <span class=\\\"list-group-item no-border\\\">活跃状态 <span class=pull-right>{{ station.state == 1 ? \\\"激活\\\":\\\"未激活\\\" }}</span></span> <span class=\\\"list-group-item no-border\\\">使用的模型 <span class=pull-right><a ng-click=\\\" goto( 'app.sysmodel_p.basic' , sysmodel , sysmodel  )\\\" class=text-info-dk>{{ sysmodel.name}}</a></span></span> <span class=\\\"list-group-item no-border\\\">通讯类型 <span class=pull-right>{{ sysmodel.comm_type == 1 ? 'DaServer':'GateWay' }}</span></span> <span class=\\\"list-group-item no-border\\\">创建时间 <span class=pull-right>{{ station.create_time | date:\\\"yyyy-MM-dd HH:mm Z\\\" }}</span></span> <span class=\\\"list-group-item no-border\\\">配置同步状态 <span class=\\\"pull-right fa\\\">{{ station.needsync ? \\\"需要同步\\\":\\\"已同步\\\" }}</span></span> <span class=\\\"list-group-item no-border\\\">位置 <span class=pull-right>{{ station.map_address }}</span></span> <span class=\\\"list-group-item no-border\\\">备注<div class=\\\"b-a m-t-sm alert\\\" style=\\\"color: #a0a0a0;height:100px\\\">{{station.desc }}</div></span> <span class=\\\"list-group-item no-border\\\"><button class=\\\"btn btn-sm btn-primary\\\" ng-click=\\\"editStation( this, station  )\\\">修改信息</button></span></div></div><div class=\\\"col-md-6 col-xs-12\\\"><img ng-src=\\\"{{ station.pic_url?( ossRoot + station.pic_url):'img/system_null.png'  }}\\\" class=\\\"pag-5 m-t-lg w-full b\\\" style=height:400px><form class=\\\"hbox m-t\\\"><label class=\\\"col w-xs m-t-n p-t-10\\\">上传系统图片</label><div class=col><input ui-jq=filestyle type=file id=file_sys ng-model-instant class=input-sm onchange=\\\"angular.element(this).scope().setFiles(this)\\\"><div style=height:10px><progressbar class=\\\"progress-xs active m-b-sm m-t-xxs\\\" ng-show=progressVisible value=progress type=success>{{progress}}%</progressbar></div><div class=text-muted>支持不超过500K的jpeg,png,jpg格式图片!</div><div ng-show=!op.rightfile class=text-danger>文件过大!</div></div><div class=\\\"col w-xs\\\"><button class=\\\"btn btn-info m-l w-70\\\" ng-click=uploadFile() ng-disabled=\\\" ! op.rightfile \\\">上传</button></div></form></div></div></div></div>\"\n  );\n\n\n  $templateCache.put('athena/dastation/prop_config.html',\n    \"<div class=\\\"panel panel-default b-t-none\\\"><div class=\\\"panel-body no-padder\\\"><div class=\\\"col-md-8 col-xs-12 text-left m-b-sm m-t padder-md\\\"><label class=\\\"col-md-3 control-label m-t-xs color-4\\\">配置项</label><div class=col-md-9><select ng-model=profile class=form-control ng-options=\\\"   p as p.name for p in profiles  \\\" ng-change=\\\"toUpdate('profile')\\\" required></select><span class=\\\"help-block m-b-none m-b-xs\\\" ng-show=\\\" profile.desc\\\"><i class=\\\"fa fa-warning text-success pos-rlt\\\"></i> {{profile.desc}}</span></div><div class=\\\"col-md-9 col-md-offset-3 m-t-xs m-b\\\"><span class=text-danger ng-show=\\\" needUpdate.profile \\\"><button class=\\\"btn btn-sm w-94 btn-success\\\" ng-click=\\\"  updateSystem( 'profile' );  \\\">保存系统配置</button> <i class=\\\"fa fa-exclamation-triangle\\\"></i> 编辑完成后请保存系统配置</span> <span ng-show=\\\" hasSave.profile \\\"><strong class=text-info><i class=\\\"fa fa-thumbs-o-up\\\"></i> <span>保存成功!</span></strong></span></div><div ng-if=\\\"  nT \\\"><label class=\\\"col-md-3 control-label m-t-xs color-4\\\">SN</label><div class=col-md-9><div class=input-group><input class=form-control ng-model=t.sn ng-disabled=t.ticket> <span class=input-group-btn ng-show=\\\" !t.ticket  \\\" style=padding-left:10px><button class=\\\"btn btn-info btn-default w-xs\\\" type=button ng-click=createTicket()>注册</button></span> <span class=input-group-btn ng-show=t.ticket style=padding-left:10px><button class=\\\"btn btn-info btn-default w-xs\\\" type=button ng-click=unBindTicket()>解除绑定</button></span></div></div><label class=\\\"col-md-3 col-lg-offet-1 control-label m-t color-4\\\">Ticket</label><div class=\\\"col-md-9 m-t\\\"><textarea ng-model=\\\"  t.ticket \\\" class=\\\"input w-full panel bg-light lter b\\\" style=\\\"resize: none\\\" readonly></textarea></div></div></div><div class=line ng-if=!nT></div><ng-include ng-if=\\\" !nT \\\" src=\\\"  'athena/dastation/_prop_daserver_network.html'  \\\"></ng-include><ng-include ng-if=\\\" sysmodel.mode ==1 && sysmodel.comm_type ==2   \\\" src=\\\" 'athena/dastation/_prop_gateway_gateway.html'  \\\"></ng-include><ng-include ng-if=\\\" sysmodel.devices.length && sysmodel.mode ==1 && sysmodel.comm_type ==2 \\\" src=\\\"  'athena/dastation/_prop_gateway_device.html'  \\\"></ng-include><div class=\\\"line b-b\\\" ng-if=!nT></div><div ng-if=\\\" sysmodel.mode ==1 \\\"><div class=\\\"col-md-8 col-xs-12 text-left padder-md\\\"><div class=\\\"col-md-3 col-xs-6 text-left m-t-sm m-b-sm color-4\\\"><span>上次配置更新</span></div><div class=\\\"col-md-9 col-xs-6 m-t-sm m-b-sm\\\">{{ station.last_modify_time| date:\\\"yyyy-MM-dd HH:mm\\\" }}</div></div><div class=\\\"col-md-8 col-xs-12 text-left padder-md\\\"><div class=\\\"col-md-3 col-xs-6 text-left m-t-xs m-t-sm m-b-sm color-4\\\">上次同步</div><div class=\\\"col-md-9 col-xs-6 m-t-xs m-t-sm m-b-sm\\\"><span>{{station.last_sync_time | date:\\\"yyyy-MM-dd HH:mm\\\" }}</span></div></div><div class=\\\"col-md-8 col-xs-12 text-left m-b padder-md\\\"><div class=\\\"col-xs-6 m-t-sm col-md-6 m-t-sm m-b-sm\\\"><button class=\\\"btn btn-sm btn-info\\\" ng-click=\\\" syncSystem( station , $event , this )\\\" token spinner>同步配置</button> <span class=text-info ng-show=_show_sync_ok>同步成功</span> <span class=text-danger ng-show=_show_sync_error>同步失败</span></div></div></div></div></div>\"\n  );\n\n\n  $templateCache.put('athena/dastation/prop_contact.html',\n    \"<div class=\\\"panel-body table-responsive no-padder no-border bg-light\\\" id=ccc><h4 class=\\\"text-center m-t-l\\\"></h4><form name=form class=\\\"form-horizontal form-validation col-md-7 col-md-offset-3 col-sm-10 col-sm-offset-1 col-xs-12 m-t ccc\\\"><div class=\\\"form-group col-md-6\\\"><label class=\\\"col-sm-12 control-label\\\"><span translate=姓>姓</span></label><div class=col-sm-12><input label=姓 ng-model=\\\" C.first_name \\\" class=form-control required></div></div><div class=\\\"form-group col-md-6\\\"><label class=\\\"col-sm-12 control-label\\\"><span translate=名字>名字</span></label><div class=col-sm-12><input label=名字 ng-model=\\\" C.last_name \\\" class=form-control required></div></div><div class=\\\"form-group col-md-6\\\"><label class=\\\"col-sm-12 control-label\\\"><span translate=邮箱>邮箱</span></label><div class=col-sm-12><input label=邮箱 ng-model=\\\" C.email \\\" type=email class=form-control required></div></div><div class=\\\"form-group col-md-6\\\"><label class=\\\"col-sm-12 control-label\\\"><span translate=固定电话>固定电话</span></label><div class=col-sm-12><input label=固定电话 ng-model=\\\" C.tel \\\" class=form-control ng-pattern=\\\"/^\\\\d{4}-\\\\d{7,8}$/\\\" placeholder=xxxx-xxxxxxxx></div></div><div class=\\\"form-group col-md-6\\\" ng-if=!isAdd><label class=\\\"col-sm-12 control-label\\\"><span>更改联系人号码</span></label><div class=col-sm-9><div class=\\\"checkbox inline\\\"><label class=i-checks><input type=checkbox ng-model=\\\"op.cc_phone \\\" checked><i></i></label></div></div></div><div class=\\\"form-group col-md-6\\\" ng-if=\\\" isAdd ||  op.cc_phone \\\"><label class=\\\"col-sm-12 control-label\\\"><span translate=手机号码 class=ng-scope>手机号码</span> <mark></label><div class=col-sm-12><div class=input-group><input name=mobile_phone ng-model=\\\" C.mobile_phone \\\" class=form-control ng-pattern=\\\"/^1\\\\d{10}$/\\\" required> <span class=input-group-btn ng-show=!op.send><button class=\\\"btn btn-default\\\" type=button ng-disabled=!form.mobile_phone.$valid ng-click=sendVer()>发送验证码</button></span> <span class=input-group-btn ng-show=op.send><button class=\\\"btn btn-default\\\" type=button ng-disabled=true>重新发送({{op.second}})</button></span></div></div></div><div class=\\\"form-group col-md-6\\\" ng-if=\\\" isAdd || op.cc_phone \\\"><label class=\\\"col-sm-12 control-label\\\"><span translate=验证码 class=ng-scope>验证码</span> <mark></label><div class=col-sm-12><input ng-model=\\\" C.code \\\" class=\\\"form-control inline\\\" ui-validate=\\\" 'validVer($value)' \\\"></div></div><div class=\\\"form-group col-md-6\\\"><label class=\\\"col-sm-12 control-label\\\"><span translate=国家>国家</span></label><div class=col-sm-12><input label=国家 class=form-control ng-model=\\\" C.country \\\"></div></div><div class=\\\"form-group col-md-6\\\"><label class=\\\"col-sm-12 control-label\\\"><span translate=省>省</span></label><div class=col-sm-12><input label=省 class=form-control ng-model=\\\" C.province \\\"></div></div><div class=\\\"form-group col-md-6\\\"><label class=\\\"col-sm-12 control-label\\\"><span translate=城市>城市</span></label><div class=col-sm-12><input label=城市 class=form-control ng-model=\\\" C.city \\\"></div></div><div class=\\\"form-group col-md-6\\\"><label class=\\\"col-sm-12 control-label\\\"><span translate=邮政编码>邮政编码</span></label><div class=col-sm-12><input label=邮政编码 class=form-control ng-model=\\\" C.zip_code \\\"></div></div><div class=\\\"form-group col-md-12\\\"><label class=\\\"col-sm-12 control-label\\\"><span translate=详细地址>详细地址</span></label><div class=col-sm-12 style=\\\"padding-right: 40px\\\"><input label=详细地址 class=form-control ng-model=\\\" C.address \\\"></div></div><div class=\\\"form-group col-md-12\\\"><label class=\\\"col-sm-6 control-label\\\"><span>通知形式</span></label><div class=col-sm-6 style=\\\"padding-right: 40px\\\"><div class=\\\"checkbox inline float-right m-l\\\"><label class=i-checks><input type=checkbox ng-model=\\\" C.mail_notice \\\" checked ng-true-value=1 ng-false-value=0><i></i> <span>邮件通知</span></label></div><div class=\\\"checkbox inline float-right m-l\\\"><label class=i-checks><input type=checkbox ng-model=\\\" C.sms_notice \\\" checked ng-true-value=1 ng-false-value=0><i></i> <span>短信通知</span></label></div></div></div></form><div class=\\\"text-right col-md-7 col-md-offset-3 col-sm-10 col-sm-offset-1 col-xs-12\\\" ng-if=\\\" !isShowModul \\\"><button style=\\\"margin-right: 65px\\\" class=\\\"btn btn-success btn-block-middle w-46 m-b m-t\\\" ng-click=commit() token>保存</button></div></div>\"\n  );\n\n\n  $templateCache.put('athena/dastation/prop_map.html',\n    \"<div class=\\\"panel panel-default b-t-none\\\"><div class=\\\"panel-body no-padder\\\"><div class=\\\"row m-l-xs m-r-xs\\\"><div class=\\\"form-group m-b-none\\\"><label class=\\\"col-md-1 m-t\\\">搜索</label><div class=\\\"col-md-4 m-t\\\"><input class=\\\"form-control input-sm\\\" id=suggestId><div id=searchResultPanel style=\\\"border:1px solid #C0C0C0 ;height:auto; display:none\\\"></div></div></div><div class=\\\"form-group m-l m-b\\\"><button class=\\\"btn btn-sm btn-info m-t\\\" ng-click=markLocation() ng-disabled=\\\" station.latitude   \\\">标记位置</button> <button class=\\\"btn btn-sm btn-info m-t\\\" ng-click=delMarker() ng-disabled=\\\" station.latitude == 0 || staation.latitude != null \\\">删除位置</button></div></div><div id=station_map class=m-t-xs ng-init=createMap()></div></div></div>\"\n  );\n\n\n  $templateCache.put('athena/dastation/prop_map_location.html',\n    \"<div class=w-md><h5 class=\\\"text-left text-muted\\\">定位</h5><div class=hbox><div class=\\\"col w-50\\\">经度</div><div class=\\\"col text-muted\\\">{{msg.lng}}</div></div><div class=hbox><div class=\\\"col w-50\\\">纬度</div><div class=\\\"col text-muted\\\">{{msg.lat}}</div></div><div class=hbox><div class=\\\"col w-50\\\">地址</div><div class=\\\"col text-muted\\\" style=height:50px>{{msg.address}}</div></div><div class=text-center><button class=\\\"btn btn-sm\\\" ng-click=locatedSation() ng-if=op.toNewLocation>确定位置</button> <button class=\\\"btn btn-sm\\\" ng-click=letMarkerMove() ng-if=!op.toNewLocation>移动</button> <button class=\\\"btn btn-sm btn-danger\\\" ng-click=delMarker() ng-if=\\\"station.longitude !== undefined \\\">移除</button></div></div>\"\n  );\n\n\n  $templateCache.put('athena/dastation/prop_map_popup.html',\n    \"<div style=\\\"padding-top : 10px; width:300px\\\"><div class=\\\"row m-n b-b line-dashed\\\"><div class=col-sm-5>系统:</div><div class=col-sm-7><a>{{name}}</a> <i class=\\\"glyphicon glyphicon-signal text-info\\\"></i></div></div><div class=\\\"row m-n b-b line-dashed\\\" ng-if=false><div class=col-sm-5>id:</div><div class=col-sm-7>{{uuid}}</div></div><div class=\\\"row m-n b-b line-dashed\\\"><div class=col-sm-5>所属区域:</div><div class=col-sm-7>{{region_name}}</div></div><div class=\\\"row m-n b-b line-dashed\\\"><div class=col-sm-5>创建时间:</div><div class=col-sm-7>{{create_time}}</div></div></div>\"\n  );\n\n\n  $templateCache.put('athena/dastation/prop_prop.html',\n    \"<div class=panel-body><form name=form class=\\\"form-horizontal form-validation tl-center-form\\\"><input type=submit class=hidden> <input tl-wrap-l label=系统名称 required ng-model=station.name> <span ng-if=false tl-wrap-l label=激活码 ng-model=dastation.activeno></span> <input tl-wrap-l label=项目 readonly ng-model=dastation.activeno> <input tl-wrap-l label=联系人 ng-model=\\\" project.linkman \\\"> <input tl-wrap-l label=电话号码 ng-model=\\\" project.tel \\\" placeholder=XXXX-XXXXXXX ng-pattern=\\\"/^[0-9]{3,4}-[0-9]{7,8}$/\\\"> <input tl-wrap-l label=手机 ng-model=\\\" project.cellphone \\\" ng-pattern=\\\"/^[0-9]{11}$/\\\"> <input tl-wrap-l label=电子邮件 ng-model=\\\" project.email \\\" type=email> <input tl-wrap-l label=地址 ng-model=\\\" project.address \\\"><textarea tl-wrap-l label=备注 ng-model=\\\" project.msg \\\" style=\\\"resize: none\\\" placeholder=\\\" 不应超过100字符\\\"></textarea><div class=\\\"line line-dashed b-b line-chart m-l-n-sm\\\"></div><div class=\\\"row m-t-xs\\\"><div class=col-xs-12><button class=\\\"btn btn-success btn-sm w-46\\\" ng-click=setNetWork()>保存</button></div></div></form></div>\"\n  );\n\n\n  $templateCache.put('athena/dastation/station_activate.html',\n    \"<div class=\\\"modal-header text-center\\\"><h4>激活系统: {{ station.name }} ?</h4></div><div class=modal-body><form name=form class=\\\"form-validation form-horizontal padding-10\\\"><input type=submit class=hidden> <input tl-wrap label=系统名称 ng-model=\\\" station.name \\\" disabled><div class=\\\"line line-dashed b-b\\\"></div>Select primary usage for this system This can be changed later.<div class=radio><label class=i-checks><input type=radio value=option1 name=a> <i></i> Use system for View & Control (Remote management)<br><div class=text-muted>Primary usage will be logging, viewing live values and alarm management of the devices connected to the EC product.</div></label></div><div class=radio><label class=i-checks><input type=radio checked value=option2 name=a> <i></i> Use system for Remote Access<br><div class=text-muted>Primary usage will be remote access and use of the EC product for access to connected devices via own software tools.</div></label></div></form></div><ng-include src=\\\" 'athena/debris/_modal_footer.html' \\\"></ng-include>\"\n  );\n\n\n  $templateCache.put('athena/dastation/station_change.html',\n    \"<div class=\\\"modal-header text-center\\\"><h4>更换系统 {{ station.name }}</h4></div><div class=modal-body><div class=text-muted>更换系统将在两个系统间交换所有信息.<br>更换后，新系统要采用旧系统相同的日志参数和警告设置进行配置.<br>一般来讲，系统更换是本地化地将配置备份恢复到该系统.</div><div class=\\\"line line-dashed b-b\\\"></div><form class=\\\"form-horizontal form-validation\\\" name=form><input type=submit class=hidden> <span tl-wrap label=已更换的系统>{{ station.name }}</span> <input tl-wrap label=已更换系统激活码 ng-model=xxx><div class=\\\"line line-dashed b-b\\\"></div><div class=text-muted>在待定列表中没有相同类型的系统。如需更换一个系统，首先添加一个新的活跃系统.</div><input tl-wrap label=更换系统激活码 required ng-model=xxx1></form></div><ng-include src=\\\" 'athena/debris/_modal_footer.html' \\\"></ng-include>\"\n  );\n\n\n  $templateCache.put('athena/dastation/station_delete.html',\n    \"<div class=\\\"modal-body text-center\\\"><i class=\\\"fa fa-warning fa-2x text-warning pos-rlt\\\"></i> <span class=modal-title>请确认是否要移除该系统( {{ station.name }} ) ?</span><div class=\\\"text-center text-danger\\\">注：系统日志和历史数据将做删除标志。</div></div><ng-include src=\\\" 'athena/debris/_modal_footer.html' \\\"></ng-include>\"\n  );\n\n\n  $templateCache.put('athena/dastation/station_edit.html',\n    \"<div class=\\\"modal-header text-center\\\">编辑系统</div><div class=modal-body><form name=form class=\\\"form-validation form-horizontal padding-10\\\"><input tl-wrap label=系统名称 required ng-model=\\\"das.name \\\" ng-change=\\\" ch( 'name' , das.name )\\\"><select tl-wrap label=区域 ng-model=op._proj ng-options=\\\"p as p.name  for p in projs \\\" required><option value=\\\"\\\">--请选择区域--</option></select><textarea ng-model=\\\" das.desc \\\" style=\\\"resize: none\\\" label=备注 tl-wrap ng-change=\\\" ch( 'desc' , das.desc )\\\"></textarea></form></div><ng-include src=\\\" 'athena/debris/_modal_footer.html' \\\"></ng-include>\"\n  );\n\n\n  $templateCache.put('athena/dastation/station_efficacy.html',\n    \"<div class=\\\"modal-header text-center\\\"><h4>请确认是否要使采集站 {{ station.name }} 失效 ?</h4></div><div class=modal-body><div class=\\\"col-sm-5 text-right\\\"><span>删除日志历史</span></div><div class=col-sm-7><label class=i-checks><input type=checkbox checked><i></i></label></div><div class=\\\"text-center text-muted\\\">系统历史数据和警告将做删除标志。</div></div><ng-include src=\\\" 'athena/debris/_modal_footer.html' \\\"></ng-include>\"\n  );\n\n\n  $templateCache.put('athena/debris/_alert.html',\n    \"<div class=\\\"modal-body text-center\\\"><h4>{{msg.title}}</h4><div class=\\\"small text-muted\\\">{{msg.note}}</div><div class=\\\"small text-danger\\\">{{msg.warn }}</div></div><div class=modal-footer><button class=\\\"btn btn-sm btn-primary w-46\\\" ng-click=\\\" done() \\\" token>确定</button></div>\"\n  );\n\n\n  $templateCache.put('athena/debris/_device_base.html',\n    \"<div class=\\\"form-group m-b-xxs\\\"><label class=\\\"col-sm-3 control-label\\\">设备类型</label><div class=col-sm-9><input class=\\\"form-control height-30\\\" ng-model=dev.type ng-if=\\\" isedit \\\"><div ng-if=\\\"! isedit\\\">{{ dev.type }}</div></div></div><div class=\\\"form-group m-b-xxs\\\"><label class=\\\"col-sm-3 control-label\\\">模板</label><div class=col-sm-9><input class=\\\"form-control height-30\\\" ng-model=dev.template ng-if=\\\" isedit \\\"><div ng-if=\\\"! isedit\\\">{{ dev.template }}</div></div></div><div class=\\\"form-group m-b-xxs\\\"><label class=\\\"col-sm-3 control-label\\\">设备名称</label><div class=col-sm-9><input class=\\\"form-control height-30\\\" ng-model=dev.name></div></div>\"\n  );\n\n\n  $templateCache.put('athena/debris/_device_modbus.html',\n    \"<div class=\\\"form-group m-b-xxs\\\"><label class=\\\"col-sm-5 control-label\\\">Modbus总线从设备*</label><div class=col-sm-7><input class=\\\"form-control height-30\\\" ng-model=dev.type></div></div><div class=\\\"form-group m-b-xxs\\\"><label class=\\\"col-sm-5 control-label\\\">Modbus总线IP</label><div class=col-sm-7><input class=\\\"form-control height-30\\\" ng-model=dev.type></div></div><div class=\\\"form-group m-b-xxs\\\"><label class=\\\"col-sm-5 control-label\\\">Modbus总线端口</label><div class=col-sm-7><input class=\\\"form-control height-30\\\" ng-model=dev.type></div></div>\"\n  );\n\n\n  $templateCache.put('athena/debris/_driver_temp_point.html',\n    \"<select tl-wrap ng-model=\\\" opt.D \\\" label=驱动类型 required ng-options=\\\"o.id as o.description  for o in drivers\\\" ng-change=\\\"driverTypeChange( this )\\\"></select><select ng-options=\\\" o.template_id as o.name  for  o in temps  \\\" tl-wrap ng-model=\\\" opt.temp_id \\\" label=模版 required></select><select ng-options=\\\" o as o.name  for  o in temppoints   \\\" tl-wrap ng-model=\\\"opt.point \\\" label=模版点 required></select>\"\n  );\n\n\n  $templateCache.put('athena/debris/_edit_field.html',\n    \"<div><div class=form-group><label>编辑</label><input ng-model=\\\"$ov.value \\\" class=form-control></div><button class=\\\"btn btn-info btn-sm\\\" ng-click=done() token>确定</button> <button class=\\\"btn btn-sm btn-default\\\" ng-click=cancel()>取消</button></div>\"\n  );\n\n\n  $templateCache.put('athena/debris/_modal_footer.html',\n    \"<div class=modal-footer><button class=\\\"btn btn-sm btn-primary w-46\\\" ng-click=\\\" done( $event ) \\\" token=2000>确定</button> <button class=\\\"btn btn-sm btn-default w-46\\\" ng-click=\\\" cancel(  ) \\\">取消</button></div>\"\n  );\n\n\n  $templateCache.put('athena/debris/_pager.html',\n    \"<pagination class=pagination-sm total-items=page.total ng-model=page.currentPage items-per-page=\\\" $sys.itemsPerPage \\\" ng-change=\\\" loadPageData( page.currentPage   ) \\\" num-pages=\\\" page.numPages \\\" max-size=10 boundary-links=true rotate=false first-text=&laquo; previous-text=&lsaquo; next-text=&rsaquo; last-text=&raquo;></pagination>\"\n  );\n\n\n  $templateCache.put('athena/debris/_tabs.html',\n    \"<div class=\\\"bg-light lter b-b wrapper-md ng-scope\\\"><h2 class=\\\"m-n font-thin h4\\\">{{ title }}</h2></div><div class=wrapper-md><ul class=\\\"nav nav-tabs m-t-xxs bg-normal\\\"><li ui-sref-active=active ng-repeat=\\\"t in tabs \\\"><a ui-sref={{t.state}}><i class=\\\"{{t.icon }}\\\"></i> <span translate={{t.title}}>系统配置</span></a></li></ul><div ui-view></div></div>\"\n  );\n\n\n  $templateCache.put('athena/debris/confirm_invoke.html',\n    \"<div class=modal-header>{{ msg.title }}</div><div class=\\\"modal-body m-b\\\"><div ng-if=msg.note class=m-l-lg><i class=\\\"fa fa-warning fa-2x text-warning\\\"></i> {{ msg.note }}</div><div ng-if=\\\"msg.warn \\\" class=\\\"m-l-lg text-danger\\\"><i class=\\\"fa fa-exclamation-triangle fa-2x\\\"></i> {{ msg.warn}}</div></div><div class=modal-footer><button class=\\\"btn btn-sm btn-primary w-46\\\" ng-click=\\\" done() \\\" token translate={{todo}}></button> <button class=\\\"btn btn-sm btn-default w-46\\\" ng-click=\\\" cancel() \\\" translate=\\\"{{ undo }}\\\">取消</button></div>\"\n  );\n\n\n  $templateCache.put('athena/debris/edit_dev.html',\n    \"<div class=\\\"modal-header text-center\\\">参数编辑</div><div class=modal-body ng-init=\\\" isedit = true \\\"><form class=\\\"bs-example form-horizontal padding-10\\\"><ng-include src=\\\" 'athena/debris/_device_base.html' \\\"></ng-include><ng-include src=\\\" 'athena/debris/_device_' +  devtype  + '.html' \\\"></ng-include></form></div><ng-include src=\\\" 'athena/debris/_modal_footer.html' \\\"></ng-include>\"\n  );\n\n\n  $templateCache.put('athena/debris/log_visual.html',\n    \"<div class=\\\"modal-header text-center\\\">参数编辑</div><div class=modal-body><form class=\\\"bs-example form-horizontal padding-10\\\"><div class=\\\"form-group m-b-xxs\\\"><label class=\\\"col-sm-4 control-label\\\">模板</label><div class=col-sm-8><input class=\\\"form-control height-30\\\" ng-model=g.gname></div></div><div class=\\\"form-group m-b-xxs\\\"><label class=\\\"col-sm-4 control-label\\\">分组</label><div class=col-sm-8><input class=\\\"form-control height-30\\\" ng-model=g.gname></div></div><div class=\\\"form-group m-b-xxs\\\"><label class=\\\"col-sm-4 control-label\\\">参数*</label><div class=col-sm-8><input class=\\\"form-control height-30\\\" ng-model=g.gname></div></div><div class=\\\"form-group m-b-xxs\\\"><label class=\\\"col-sm-4 control-label\\\">描述</label><div class=col-sm-8><input class=\\\"form-control height-30\\\" ng-model=g.gname></div></div><div class=\\\"form-group m-b-xxs\\\"><label class=\\\"col-sm-4 control-label\\\">单元</label><div class=col-sm-8><input class=\\\"form-control height-30\\\" ng-model=g.gname></div></div><div class=\\\"form-group m-b-xxs\\\"><label class=\\\"col-sm-4 control-label\\\">比例缩放</label><div class=col-sm-8><input class=\\\"form-control height-30\\\" ng-model=g.gname></div></div><div class=\\\"form-group m-b-xxs\\\"><label class=\\\"col-sm-4 control-label\\\">偏差</label><div class=col-sm-8><input class=\\\"form-control height-30\\\" ng-model=g.gname></div></div><div class=\\\"form-group m-b-xxs\\\"><label class=\\\"col-sm-4 control-label\\\">Tag</label><div class=col-sm-8><input class=\\\"form-control height-30\\\" ng-model=g.gname></div></div><div class=\\\"form-group m-b-xxs\\\"><label class=\\\"col-sm-4 control-label\\\">十进制数量</label><div class=col-sm-8><input class=\\\"form-control height-30\\\" ng-model=g.gname></div></div><div class=\\\"form-group m-b-xxs\\\"><label class=\\\"col-sm-4 control-label\\\">有效范围</label><div class=col-sm-8><input class=\\\"form-control height-30\\\" ng-model=g.gname></div></div><div class=\\\"form-group m-b-xxs\\\"><label class=\\\"col-sm-4 control-label\\\">枚举</label><div class=col-sm-8><input class=\\\"form-control height-30\\\" ng-model=g.gname></div></div><div class=\\\"form-group m-b-xxs\\\"><label class=\\\"col-sm-4 control-label\\\">日志记录间隔</label><div class=col-sm-8><input class=\\\"form-control height-30\\\" ng-model=g.gname></div></div><div class=\\\"form-group m-b-xxs\\\"><label class=\\\"col-sm-4 control-label\\\">日志类型</label><div class=col-sm-8><input class=\\\"form-control height-30\\\" ng-model=g.gname></div></div></form></div><ng-include src=\\\" 'athena/debris/_modal_footer.html' \\\"></ng-include>\"\n  );\n\n\n  $templateCache.put('athena/debris/prop_view.html',\n    \"<div class=\\\"modal-header text-center\\\">{{ title }}</div><div class=modal-body><form class=\\\"bs-example form-horizontal padding-10\\\"><div class=\\\"form-group m-b-xxs\\\" ng-repeat=\\\"  (k , v) in props \\\"><label class=\\\"col-sm-5 control-label\\\">{{ k }}</label><div class=\\\"col-sm-7 m-t-xs\\\">{{ v }}</div></div></form></div><ng-include src=\\\" 'athena/debris/_modal_footer.html' \\\"></ng-include>\"\n  );\n\n\n  $templateCache.put('athena/debris/regist_no.html',\n    \"<div class=\\\"modal-body text-center\\\"><i class=\\\"fa fa-warning fa-2x text-warning pos-rlt\\\"></i> <span class=modal-title>输入注册码 {{ myform.k0.$valid }} ccccc</span><form class=text-center><input id=regno_in_0 class=\\\"form-control w-xxs\\\" ng-keyup=\\\" keyUp( 0, $event ) \\\" ng-change=\\\"changeV( 0,  No[0] )\\\" ng-model=\\\" No[0] \\\"> - <input id=regno_in_1 class=\\\"form-control w-xxs\\\" ng-keyup=\\\" keyUp( 1,$event  ) \\\" ng-change=\\\"changeV( 1,  No[1] )\\\" ng-model=No[1]> - <input id=regno_in_2 class=\\\"form-control w-xxs\\\" ng-keyup=\\\" keyUp( 2 ,$event   ) \\\" ng-change=\\\"changeV( 2,  No[2] )\\\" ng-model=No[2]> - <input id=regno_in_3 class=\\\"form-control w-xxs\\\" ng-keyup=\\\" keyUp( 3 , $event  ) \\\" ng-change=\\\"changeV( 3,  No[3] )\\\" ng-model=No[3]></form></div><ng-include src=\\\" 'athena/debris/_modal_footer.html' \\\"></ng-include>\"\n  );\n\n\n  $templateCache.put('athena/feedback.html',\n    \"<div class=modal-header><h4>问题反馈</h4></div><div class=modal-body><form class=\\\"bs-example form-validation form-horizontal padding-10\\\" name=form><input tl-wrap-l label=类型: ng-model=point.name><textarea tl-wrap-l ng-model=point.desc label=描述:></textarea></form></div><ng-include src=\\\" 'athena/debris/_modal_footer.html' \\\"></ng-include>\"\n  );\n\n\n  $templateCache.put('athena/header.html',\n    \"<div class=\\\"navbar-header {{app.settings.navbarHeaderColor}}\\\"><button class=\\\"pull-right visible-xs dk\\\" ui-toggle-class=show data-target=.navbar-collapse><i class=icon-map></i></button> <button class=\\\"pull-right visible-xs\\\" ui-toggle-class=off-screen data-target=.app-aside ui-scroll=app><i class=\\\"fa fa-bars\\\"></i></button> <span class=navbar-brand><i class=\\\"fa fa-cloud fa-fw\\\" ng-class=\\\" {hide : !app.settings.asideFolded  }\\\"></i> <img class=hidden-folded src=img/logo_3.png style=\\\"width: 150px\\\"></span></div><div class=\\\"collapse navbar-collapse box-shadow {{app.settings.navbarCollapseColor}}\\\"><div class=\\\"nav navbar-nav m-l-sm hidden-xs\\\"><a href class=\\\"btn no-shadow navbar-btn\\\" ng-click=\\\"app.settings.asideFolded = !app.settings.asideFolded\\\"><i class=\\\"fa {{app.settings.asideFolded ? 'fa-indent' : 'fa-dedent'}} fa-fw\\\"></i></a></div><ul class=\\\"nav navbar-nav navbar-right\\\"><li class=dropdown dropdown><a href class=\\\"dropdown-toggle clear\\\" dropdown-toggle><span class=\\\"thumb-sm avatar pull-right m-t-n-sm m-b-n-sm m-l-sm\\\"><img src=img/a0.jpg alt=...> <i class=\\\"on md b-white bottom\\\"></i></span> <span>{{user.username}}</span> <b class=caret></b></a><ul class=\\\"dropdown-menu w-lg\\\"><li class=\\\"b-b bg-light m-t-n-xs\\\"><p class=\\\"text-base m-b-none wrapper\\\">上次登录时间: <span>{{user.last_login_time |date :\\\"yyyy-MM-dd HH:mm\\\"}}</span></p></li><li class=b-b><a ui-sref=\\\" app.my_detail \\\" style=\\\"padding: 10px 15px\\\">用户设置</a></li><li class=text-center><a ng-click=logout() style=\\\"padding: 10px 15px\\\">注销</a></li></ul></li></ul></div>\"\n  );\n\n\n  $templateCache.put('athena/nav.html',\n    \"<ul class=nav><li class=\\\"hidden-folded padder m-t m-b-sm text-muted text-xs\\\"><span><h5 translate=nav.a>展1示</h5></span></li><li ui-sref-active=active><a ui-sref=app.s_region><i class=\\\"icon icon-grid text-info-dk\\\"></i> <span>区域</span></a></li><li ui-sref-active=active><a ui-sref=app.s_system><i class=\\\"icon icon-screen-desktop text-info-dk\\\"></i> <span>系统</span></a></li><li ui-sref-active=active><a ui-sref=app.s_alarm><i class=\\\"icon icon-fire text-info-dk\\\"></i> <span>报警</span></a></li><li class=\\\"line dk hidden-folded\\\"></li><li class=\\\"hidden-folded padder m-t m-b-sm text-muted text-xs\\\"><h5 translate=nav.b>管理</h5></li><li><a ui-sref=app.m_region><i class=\\\"icon icon-grid text-info-dk\\\"></i> <span>区域</span></a></li><li><a ui-sref=app.m_system><i class=\\\"icon icon-screen-desktop text-info-dk\\\"></i> <span translate=nav.g>系统</span></a></li><li><a href class=auto><span class=\\\"pull-right text-muted\\\"><i class=\\\"fa fa-fw fa-angle-right text\\\"></i> <i class=\\\"fa fa-fw fa-angle-down text-active\\\"></i></span> <i class=\\\"icon icon-puzzle text-info-dker\\\"></i> <span translate=nav.c>模型 , 配置项</span></a><ul class=\\\"nav nav-sub dk\\\"><li ui-sref-active=active><a ui-sref=app.sysmodel><span translate=nav.c2>系统模型</span></a></li><li ui-sref-active=active><a ui-sref=app.devmodel><span translate=nav.c1>设备模型</span></a></li></ul></li><li><a href class=auto><span class=\\\"pull-right text-muted\\\"><i class=\\\"fa fa-fw fa-angle-right text\\\"></i> <i class=\\\"fa fa-fw fa-angle-down text-active\\\"></i></span> <i class=\\\"icon icon-user text-info-dker\\\"></i> <span>用户</span></a><ul class=\\\"nav nav-sub dk\\\"><li ui-sref-active=active><a ui-sref=app.user><span>用户管理</span></a></li><li ui-sref-active=active><a ui-sref=app.role.region><span>角色管理</span></a></li></ul></li><li ng-if=user.is_super_user><a href class=auto><span class=\\\"pull-right text-muted\\\"><i class=\\\"fa fa-fw fa-angle-right text\\\"></i> <i class=\\\"fa fa-fw fa-angle-down text-active\\\"></i></span> <i class=\\\"icon icon-notebook text-info-dker\\\"></i> <span>账户</span></a><ul class=\\\"nav nav-sub dk\\\"><li ui-sref-active=active><a ui-sref=app.account_info><span>账户信息</span></a></li><li ui-sref-active=active><a ui-sref=app.account_weichat><span>微信绑定</span></a></li></ul></li></ul>\"\n  );\n\n\n  $templateCache.put('athena/page_footer.html',\n    \"<p><small class=text-muted><a class=text-muted href=\\\"http://www.sunwayland.com/\\\" target=_blank>北京力控元通科技有限公司</a> &copy; 2014<br>京ICP备14040729号-3</small></p>\"\n  );\n\n\n  $templateCache.put('athena/page_forgotpwd.html',\n    \"<div class=\\\"text-center m-t-lg m-b-sm\\\"><img src=img/logo_2.png class=logo></div><div ng-show=\\\" od.step == '1' \\\" load-mask class=\\\"m-b-lg container w-xxl w-auto-xs m-t-lg\\\"><form name=step1 class=form-validation><strong>请输入您要找回密码的账户名称</strong> <input ng-model=account.account class=\\\"form-control m-t-xs\\\" required> <input name=password ng-model=account.identify class=\\\"form-control inline m-t-xs\\\" style=width:55% ng-minlength=4 ng-maxlength=4 placeholder=请输入验证码 required> <img ng-src=\\\"node/common/identify/admin?t={{t||123}}\\\" class=\\\"inline m-l\\\" style=\\\"width: 100px;height: 35px\\\"> <a class=\\\"fa fa-refresh text-info\\\" ng-click=\\\" t = t+1 ; od.identiok = false \\\"></a> <button type=submit ng-disabled=\\\" !step1.$valid\\\" class=\\\"btn btn-lg btn-primary btn-block m-t\\\" ng-click=\\\" setp1( $event )\\\">下一步</button> <a ui-sref=access.signin class=\\\"btn btn-lg btn-default btn-block\\\">返回登录</a></form></div><div ng-show=\\\" od.step == '2' \\\" class=\\\"m-g-lg m-t-lg\\\"><div class=\\\"wrapper text-center\\\"><h4 class=m-t-lg>邮件已经发送至管理员的邮箱</h4><h4>请点击邮件中的连接完成管理员用户密码修改</h4><i class=\\\"fa fa-check-circle text-success fa-3x\\\"></i><br><a ui-sref=access.signin class=\\\"btn btn-lg w btn-default w-xxm\\\">返回登录</a></div></div><div ng-show=\\\" od.step == '3' \\\" load-mask class=\\\"m-b-lg m-t-lg container w-xxl w-auto-xs\\\"><form name=form2 class=\\\"form-validation m-t\\\"><div class=\\\"wrapper text-center\\\"><strong>修改管理员用户密码</strong></div><div class=\\\"list-group list-group-sm\\\"><div class=list-group-item><input name=username ng-model=admin.username placeholder=管理员用户名,至少2个字符 ng-minlength=2 ng-maxlength=16 class=\\\"form-control no-border\\\" required></div><div class=list-group-item><input name=password ng-model=admin.password placeholder=管理员密码,至少6个字符 ng-minlength=6 ng-maxlength=16 onfocus=\\\"this.type='password'\\\" class=\\\"form-control no-border\\\" required></div><div class=list-group-item><input type=password class=\\\"form-control no-border\\\" name=confirm_password required ng-model=confirm_password placeholder=\\\" 确认密码 \\\" ui-validate=\\\" '$value==admin.password' \\\" ui-validate-watch=\\\" 'admin.password' \\\"><div ng-show=form2.confirm_password.$error.validator class=text-danger>密码输入不一致</div></div></div><button type=submit class=\\\"btn btn-lg btn-primary btn-block\\\" ng-click=cc_done()>完成</button> <a ui-sref=access.signin class=\\\"btn btn-lg btn-default btn-block\\\">返回登录</a></form></div><div ng-show=\\\" od.step == '4' \\\" class=\\\"m-b-lg m-t-lg container w-xxl w-auto-xs\\\"><div class=\\\"m-g-lg text-center\\\"><h4>页面失效!</h4><h5>5秒后返回登录页面!</h5></div></div><div class=\\\"pos-abt w-full text-center\\\" style=bottom:0><div ng-include=\\\"'athena/page_footer.html'\\\"></div></div>\"\n  );\n\n\n  $templateCache.put('athena/page_signin.html',\n    \"<div class=\\\"container w-xxl w-auto-xs\\\"><div class=\\\"text-center m-t-lg m-b-lg\\\"><img src=img/logo_2.png class=logo></div><div ng-show=op.b class=pos-abt style=\\\"z-index:999;top:30%; left:49%\\\"><i class=\\\"fa fa-spin fa-3x text-info fa-spinner\\\"></i></div><form name=form class=\\\"form-validation m-t-lg\\\"><div class=\\\"list-group list-group-sm\\\"><div class=list-group-item><input placeholder=账户名称 class=\\\"form-control no-border\\\" name=accountname id=accountname required ng-model=user.account ng-keydown=\\\"showErr = false\\\"></div><div class=list-group-item><input placeholder=用户名 class=\\\"form-control no-border\\\" name=username id=username ng-keydown=\\\"showErr = false\\\" ng-model=user.username required></div><div class=list-group-item><input onfocus=\\\"this.type='password'\\\" autocomplete=off placeholder=密码 class=\\\"form-control no-border\\\" ng-keydown=\\\"showErr =false \\\" id=password name=password ng-model=user.password required></div><div class=list-group-item ng-if=\\\"op.need_idenfity \\\"><input name=password ng-model=user.verifi class=\\\"form-control inline m-t-xs\\\" style=width:50% placeholder=请输入验证码 required> <img id=login_identify ng-src=\\\"node/common/identify/login?t={{op.t||123}}\\\" class=\\\"inline m-l\\\" style=\\\"width: 80px;height: 30px\\\"> <a class=\\\"fa fa-refresh text-info\\\" ng-click=\\\" op.t = op.t+1\\\"></a></div></div><div class=\\\"text-danger wrapper text-center\\\" ng-show=\\\" resp.err=='pass_error' \\\">帐号或密码不正确!</div><div class=\\\"text-danger wrapper text-center\\\" ng-show=\\\" resp.err=='verifi_error' \\\">验证码不正确!</div><button type=submit class=\\\"btn btn-lg btn-primary btn-block\\\" ng-click=login() ng-disabled=op.b>登录</button><div class=\\\"text-center m-t m-b\\\"><a ui-sref=access.forgotpwd class=\\\"text-primary font-normal\\\">忘记管理员密码?</a></div><div class=\\\"line line-dashed\\\"></div><a ui-sref=access.signup class=\\\"btn btn-lg btn-default btn-block\\\">企业注册</a></form><div class=\\\"text-center m-t\\\" ng-include=\\\" 'athena/page_footer.html' \\\"></div></div>\"\n  );\n\n\n  $templateCache.put('athena/page_signup.html',\n    \"<div class=\\\"text-center m-t-lg m-b-sm\\\"><img src=img/logo_2.png class=logo></div><div ng-show=\\\" op.step == 'step1' \\\" load-mask class=\\\"m-b-lg container w-xxl w-auto-xs m-t-lg\\\"><div class=\\\"wrapper text-center\\\"><strong>1/3&nbsp;&nbsp;注册account用户</strong></div><form name=form1 class=form-validation><div class=\\\"list-group list-group-sm\\\"><div class=list-group-item><input name=username ng-model=comp.name placeholder=账户名称(2至20个字符) class=\\\"form-control no-border\\\" required ng-minlength=2 ng-maxlength=20></div><div class=list-group-item><input name=invicode ng-model=comp.invitation_code placeholder=激活码 class=\\\"form-control no-border\\\" required></div><div class=list-group-item><input name=email ng-model=comp.admin.email type=email placeholder=邮箱 class=\\\"form-control no-border\\\" required></div><div class=list-group-item><input name=password ng-model=comp.identifyCode class=\\\"form-control inline m-t-xs\\\" style=width:50% placeholder=请输入验证码 required> <img ng-src=\\\"node/common/identify/account?t={{op.t||123}}  \\\" class=\\\"inline m-l\\\" style=\\\"width: 100px;height: 30px\\\"> <a class=\\\"fa fa-refresh text-info\\\" ng-click=\\\" op.t = op.t+1\\\"></a></div></div><div class=\\\"checkbox m-b-md m-t-none\\\"><label class=\\\"i-checks small\\\"><input type=checkbox name=check ng-model=agree required><i></i> 我已阅读并同意 <a href=\\\"ThingLinx Terms.pdf\\\" target=_blank style=\\\"text-decoration: underline\\\">&lt;&lt;ThingLinx工业云使用条款&gt;&gt;</a></label></div><button type=submit class=\\\"btn btn-lg btn-primary btn-block\\\" ng-click=\\\"signup( $event )\\\">注册</button> <a ui-sref=access.signin class=\\\"btn btn-lg btn-default btn-block\\\">返回登录</a></form></div><div ng-show=\\\" op.step == 'step2' \\\" class=\\\"m-g-lg m-t-lg\\\"><div class=\\\"wrapper text-center\\\"><strong>2/3&nbsp;&nbsp;验证邮箱</strong><h4 class=m-t-lg>激活邮件已经发送至您的邮箱{{comp.admin.email}}</h4><h4>请点击邮件中的连接完成注册</h4><button class=\\\"btn btn-info btn-lg w-lg\\\" ng-show=true ng-click=openEmail()>登录邮箱</button><br><i class=\\\"fa fa-check-circle text-success fa-3x\\\" ng-show=\\\"\\\"></i></div><div class=\\\"text-left b-t p-t-20 pos-abt color-5\\\" style=\\\"bottom:130px;width: 80%;margin-left: 10%\\\"><div><span>没有收到邮件?</span> <a href=\\\"\\\" class=text-info ng-click=\\\"reSendEmail();  op.showe=true\\\" ng-show=!op.showe>点此重发邮件</a></div><div class=\\\"m-l-lg m-t-xs m-b-xs\\\">看看是否在邮箱的回收站, 垃圾邮件中</div><div class=m-l-lg>请尝试更换其他的邮箱注册</div></div></div><div ng-show=\\\" op.step == 'step3' \\\" load-mask class=\\\"m-b-lg m-t-lg container w-xxl w-auto-xs\\\"><form name=form2 class=\\\"form-validation m-t\\\"><div class=\\\"wrapper text-center\\\"><strong>3/3&nbsp;&nbsp;完成注册</strong></div><div class=\\\"list-group list-group-sm\\\"><div class=list-group-item><input name=password ng-model=comp.admin.username placeholder=管理用户名,至少2个字符 ng-minlength=2 ng-maxlength=16 class=\\\"form-control no-border\\\" required></div><div class=list-group-item><input name=password ng-model=comp.admin.password placeholder=管理员密码,至少6个字符 ng-minlength=6 ng-maxlength=16 onfocus=\\\"this.type='password'\\\" class=\\\"form-control no-border\\\" required></div><div class=list-group-item><input type=password class=\\\"form-control no-border\\\" name=confirm_password required ng-model=confirm_password placeholder=\\\" 确认密码 \\\" ui-validate=\\\" '$value==comp.admin.password' \\\" ui-validate-watch=\\\" 'comp.admin.password' \\\"><div ng-show=form2.confirm_password.$error.validator class=text-danger>密码输入不一致</div></div></div><button type=submit class=\\\"btn btn-lg btn-primary btn-block\\\" ng-click=create()>完成</button> <a ui-sref=access.signin class=\\\"btn btn-lg btn-default btn-block\\\">返回登录</a></form></div><div ng-show=!op.step class=\\\"wrapper text-center\\\"><i class=\\\"fa fa\\\"></i></div><div class=\\\"pos-abt w-full text-center\\\" style=bottom:0><div ng-include=\\\"'athena/page_footer.html'\\\"></div></div>\"\n  );\n\n\n  $templateCache.put('athena/page_verifyemail.html',\n    \"<div class=\\\"text-center m-t-lg m-b-sm\\\"><img src=img/logo_2.png class=logo></div><div class=\\\"wrapper text-center\\\"><div class=\\\"m-g-lg m-t-lg\\\" ng-show=\\\" op.verifyemail ==1 \\\"><h4>用户邮箱验证成功</h4><i class=\\\"fa fa-check-circle text-success fa-3x\\\"></i><br></div><div class=m-g-lg ng-show=\\\"op.verifyemail == 2 \\\"><h4>页面失效!</h4></div></div>\"\n  );\n\n\n  $templateCache.put('athena/region/msg_add.html',\n    \"<div class=\\\"form-group col-lg-12\\\" style=\\\"margin-top  : 30px\\\"><label>信息板名称:</label><input ng-model=data.panel_name class=form-control></div><div class=\\\"form-group col-lg-12\\\"><label>访问级别:</label><select class=form-control ng-model=data.access_level ng-options=\\\" k as v  for  (k,v) in types\\\"></select></div><div class=\\\"form-group col-lg-12\\\"><label>类型:</label><button class=\\\"btn btn-sm w-46 btn-default\\\" ng-click=\\\"\\\">资料</button></div><div id=frofile class=\\\"form-group col-lg-12\\\"><label>资料:</label><select class=form-control ng-model=obj ng-options=\\\" obj as obj.name  for obj in type_name \\\"></select></div><div class=\\\"form-group col-lg-12\\\"><button class=\\\"btn m-b-xs w-60 btn-dark btn-success\\\" ng-click=save()>保存</button></div>\"\n  );\n\n\n  $templateCache.put('athena/region/msg_desc.html',\n    \"<div class=\\\"form-group col-lg-12\\\" ng-repeat=\\\"panel  in panelList\\\" style=\\\"margin-top :  10px\\\"><a ng-click=panel_edit(panel) class=\\\"text-info col-sm-8\\\">{{ panel.panel_name }}</a> <a class=\\\"fa fa-times col-sm-4\\\" ng-click=\\\"panel_del( panel , panelList , $index)\\\"></a></div>\"\n  );\n\n\n  $templateCache.put('athena/region/panel_edit.html',\n    \"<div class=col-sm-6 style=\\\"margin-top : 30px\\\"><button class=\\\"btn m-b-xs w-60 btn-dark btn-success\\\" ng-click=save()>保存</button></div><div id=panel_content class=col-sm-12></div>\"\n  );\n\n\n  $templateCache.put('athena/region/pro_addproject.html',\n    \"<div class=\\\"col-lg-10 col-lg-offset-1\\\"><form name=forma class=\\\"form-horizontal form-validation\\\"><div class=\\\"panel panel-default\\\"><div class=panel-heading><strong>添加项目</strong></div><div class=panel-body><div class=\\\"line line-dashed b-b line-lg pull-in\\\"></div><div class=form-group><label class=\\\"col-sm-3 control-label\\\">项目名称</label><div class=col-sm-9><input class=form-control ng-model=g.b required></div></div><div class=\\\"line line-dashed b-b line-lg pull-in\\\"></div><div class=form-group><label class=\\\"col-sm-3 control-label\\\">开始查看</label><div class=col-sm-9><select class=\\\"form-control m-t\\\" ng-model=f.b required><option value=foo>列表视图</option><option value=bar>地图试图</option></select></div></div><div class=form-group><label class=\\\"col-sm-3 control-label\\\">公司</label><div class=col-sm-9><input type=email class=form-control placeholder=email ng-model=g.a required></div></div><div class=form-group><label class=\\\"col-sm-3 control-label\\\">联系人</label><div class=col-sm-9><input type=email class=form-control placeholder=email ng-model=g.a required></div></div><div class=form-group><label class=\\\"col-sm-3 control-label\\\">电话号码</label><div class=col-sm-9><input class=form-control placeholder=\\\"(XXX) XXXX XXX\\\" ng-model=g.g ng-pattern=\\\"/\\\\([0-9]{3}\\\\) ([0-9]{3}) ([0-9]{3})$/\\\" required></div></div><div class=form-group><label class=\\\"col-sm-3 control-label\\\">手机</label><div class=col-sm-9><input type=number class=form-control placeholder=email ng-model=g.a required></div></div><div class=form-group><label class=\\\"col-sm-3 control-label\\\">电子邮件</label><div class=col-sm-9><input type=email class=form-control placeholder=email ng-model=g.a required></div></div><div class=form-group><label class=\\\"col-sm-3 control-label\\\">地址</label><div class=col-sm-9><input type=email class=form-control ng-model=g.a required></div></div><div class=form-group><label class=\\\"col-sm-3 control-label\\\">邮编</label><div class=col-sm-9><input type=number class=form-control ng-model=g.a required></div></div><div class=form-group><label class=\\\"col-sm-3 control-label\\\">城市</label><div class=col-sm-9><input class=form-control ng-model=g.a required></div></div><div class=form-group><label class=\\\"col-sm-3 control-label\\\">省/县</label><div class=col-sm-9><input class=form-control ng-model=g.a required></div></div><div class=form-group><label class=\\\"col-sm-3 control-label\\\">国家</label><div class=col-sm-9><input class=form-control ng-model=g.a required></div></div><div class=form-group><label class=\\\"col-sm-3 control-label\\\">其他信息</label><div class=col-sm-9><input class=form-control ng-model=g.a required></div></div><footer class=\\\"panel-footer text-center bg-light lter\\\"><button type=submit class=\\\"btn w-60 btn-success\\\">Submit</button></footer></div></div></form></div>\"\n  );\n\n\n  $templateCache.put('athena/region/pro_man_prop.html',\n    \"<div class=\\\"bg-light lter b-b wrapper-sm padder-md ng-scope\\\"><h2 class=\\\"m-n font-thin h4\\\">{{ project.name }}</h2><a ui-sref=app.m_region class=text-xs>返回 <span class=text-info>区域管理</span></a></div><div class=wrapper-md><ul class=\\\"nav nav-tabs m-t-xxs bg-normal\\\"><li ui-sref-active=active><a ui-sref=app.m_region_prop.system><i class=\\\"icon icon-screen-desktop\\\"></i> <span>系统</span></a></li><li ui-sref-active=active><a ui-sref=app.m_region_prop.author><i class=\\\"icon icon-user\\\"></i> <span>权限</span></a></li></ul><div ui-view class=b-t-none></div></div>\"\n  );\n\n\n  $templateCache.put('athena/region/project_add_temp.html',\n    \"<div class=modal-header>创建区域</div><div class=modal-body load-mask><form name=form class=\\\"form-horizontal form-validation\\\"><input tl-wrap label=区域名称 required ng-model=\\\" proj.name \\\"><textarea tl-wrap label=备注 ng-model=\\\" proj.desc \\\" style=\\\"resize: none\\\" ng-maxlength=100 placeholder=\\\" 不应超过100字符\\\"></textarea></form></div><ng-include src=\\\" 'athena/debris/_modal_footer.html' \\\"></ng-include>\"\n  );\n\n\n  $templateCache.put('athena/region/project_info.html',\n    \"<div class=\\\"panel-body no-padder bg-light bg-white\\\"><div class=\\\"col-md-8 col-md-offset-2 col-lg-5 col-lg-offset-3 m-b-lg m-t-l text-base\\\"><div class=\\\"b-b line-dashed jbox\\\"><span>区域名称</span> <span class=\\\"float-right color-5\\\">{{proj.name}}</span></div><div class=\\\"b-b line-dashed jbox\\\"><span>联系人</span> <span class=\\\"float-right color-5\\\">{{proj.contact_user}}</span></div><div class=\\\"b-b line-dashed jbox\\\"><span>电话号码</span> <span class=\\\"float-right color-5\\\">{{proj.mobile_phone}}</span></div><div class=\\\"b-b line-dashed jbox\\\"><span>电子邮件</span> <span class=\\\"float-right color-5\\\">{{proj.email}}</span></div><div class=\\\"b-b line-dashed jbox\\\"><span>地址</span> <span class=\\\"float-right color-5\\\">{{proj.address}}</span></div><div class=jbox><span>备注</span> <span class=\\\"float-right color-5\\\">{{proj.desc}}</span></div></div></div>\"\n  );\n\n\n  $templateCache.put('athena/region/project_temp.html',\n    \"<div class=\\\"bg-light lter b-b wrapper-md ng-scope\\\"><h2 class=\\\"m-n font-thin h4\\\">{{::isShowModul?\\\"区域\\\":\\\"区域管理\\\" }}</h2></div><div class=wrapper-md><div class=\\\"panel panel-default\\\"><div class=panel-heading>区域列表</div><div class=\\\"panel-body no-border table-responsive no-padder\\\" load-mask><div class=\\\"col-md-4 m-t m-b\\\"><div class=input-group><input class=form-control ng-model=f_projname> <span class=input-group-btn><button class=\\\"btn btn-default\\\" type=button ng-click=\\\" loadPageData(1)\\\">搜索</button></span></div></div><div class=table-responsive><table class=\\\"table table-hover table-striped b-t\\\"><thead class=flip-content><tr class=background><th width=20%><a translate=th.th2>名称</a></th><th width=30%><a translate=th.th3>创建时间</a></th><th width=10%>已激活系统</th><th width=10% ng-if=\\\" ! isShowModul \\\">未激活系统</th><th width=30%>备注</th><th width=10% ng-if=\\\" ! isShowModul \\\">删除</th></tr></thead><tbody><tr ng-repeat=\\\"  proj  in page.data  \\\" ng-init=\\\" collectRegionId( proj , $last )\\\"><td><a class=text-info-dk ng-click=\\\"  goto ( _$nextState ,  proj  , proj ); \\\">{{ proj.name }}</a><popwin ng-model=proj ng-if=\\\" !isShowModul\\\" prop=name handler=\\\" updateRegion  \\\"></td><td>{{ :: proj.create_time | date:\\\"yyyy-MM-dd HH:mm Z\\\" }}</td><td class=numeric id=act_{{proj.id}}>0</td><td class=numeric ng-if=\\\" ! isShowModul \\\" id=unact_{{proj.id}}>0</td><td>{{ proj.desc}}<popwin ng-model=proj ng-if=\\\" !isShowModul\\\" prop=desc handler=\\\" updateRegion  \\\"></td><td class=numeric ng-if=\\\" ! isShowModul \\\"><a class=\\\"text-info-dk m-r-xs\\\" ng-disabled=true ng-click=\\\"delProject( proj  , $index   )\\\">删除</a></td></tr></tbody></table></div></div><div class=panel-footer><button class=\\\"btn btn-primary btn-sm pull-left m-l-sm\\\" ng-if=\\\" !isShowModul\\\" ng-click=\\\"  addProj() \\\">添加区域</button><div class=text-center ng-include src=\\\" 'athena/debris/_pager.html'  \\\"></div></div></div></div>\"\n  );\n\n\n  $templateCache.put('athena/region/prop_author.html',\n    \"<div class=\\\"panel panel-default b-t-none\\\"><div class=\\\"panel-body no-border table-responsive no-padder\\\"><table class=\\\"table table-striped j_table b-t-none\\\"><thead class=flip-content><tr><th>用户</th><th>角色</th><th>权限</th></tr></thead><tbody><tr ng-repeat=\\\"u in page.data \\\" ng-init=\\\" getUser( u , $last )\\\" ng-if=!u.is_super_user><td><a id=user_{{u.user_id}} ui-sref=\\\"app.userdetail({id: u.user_id })\\\" class=text-info></a></td><td>{{ :: u.role_name}}</td><td>{{ :: privilge2Text ( u.privilege ) }}</td></tr></tbody></table></div><div class=panel-footer><div class=text-center ng-include src=\\\" 'athena/debris/_pager.html'  \\\"></div></div></div>\"\n  );\n\n\n  $templateCache.put('athena/settings.html',\n    \" <button class=\\\"btn btn-default no-shadow pos-abt\\\" ui-toggle-class=active target=.settings><i class=\\\"fa fa-gear\\\"></i></button><div class=panel-heading>Settings</div><div class=panel-body><div class=m-b-sm><label class=\\\"i-switch bg-info pull-right\\\"><input type=checkbox ng-model=app.settings.headerFixed> <i></i></label>Fixed header</div><div class=m-b-sm><label class=\\\"i-switch bg-info pull-right\\\"><input type=checkbox ng-model=app.settings.asideFixed> <i></i></label>Fixed aside</div><div><label class=\\\"i-switch bg-info pull-right\\\"><input type=checkbox ng-model=app.settings.asideFolded> <i></i></label>Folded aside</div></div><div class=\\\"wrapper b-t b-light bg-light lter r-b\\\"><div class=\\\"row row-sm\\\"><div class=col-xs-6><label class=\\\"i-checks block m-b\\\" ng-click=\\\"\\n\" +\n    \"          app.settings.navbarHeaderColor='bg-black'; \\n\" +\n    \"          app.settings.navbarCollapseColor='bg-white-only'; \\n\" +\n    \"          app.settings.asideColor='bg-black';\\n\" +\n    \"         \\\"><input type=radio name=a ng-model=app.settings.themeID value=1> <span class=\\\"block bg-light clearfix pos-rlt\\\"><span class=\\\"active pos-abt w-full h-full bg-black-opacity text-center\\\"><i class=\\\"glyphicon glyphicon-ok text-white m-t-xs\\\"></i></span> <b class=\\\"bg-black header\\\"></b> <b class=\\\"bg-white header\\\"></b> <b class=bg-black></b></span></label><label class=\\\"i-checks block m-b\\\" ng-click=\\\"\\n\" +\n    \"          app.settings.navbarHeaderColor='bg-white-only'; \\n\" +\n    \"          app.settings.navbarCollapseColor='bg-white-only'; \\n\" +\n    \"          app.settings.asideColor='bg-black';\\n\" +\n    \"         \\\"><input type=radio ng-model=app.settings.themeID value=2> <span class=\\\"block bg-light clearfix pos-rlt\\\"><span class=\\\"active pos-abt w-full h-full bg-black-opacity text-center\\\"><i class=\\\"glyphicon glyphicon-ok text-white m-t-xs\\\"></i></span> <b class=\\\"bg-white header\\\"></b> <b class=\\\"bg-white header\\\"></b> <b class=bg-black></b></span></label><label class=\\\"i-checks block m-b\\\" ng-click=\\\"\\n\" +\n    \"          app.settings.navbarHeaderColor='bg-primary'; \\n\" +\n    \"          app.settings.navbarCollapseColor='bg-white-only'; \\n\" +\n    \"          app.settings.asideColor='bg-dark';\\n\" +\n    \"         \\\"><input type=radio ng-model=app.settings.themeID value=3> <span class=\\\"block bg-light clearfix pos-rlt\\\"><span class=\\\"active pos-abt w-full h-full bg-black-opacity text-center\\\"><i class=\\\"glyphicon glyphicon-ok text-white m-t-xs\\\"></i></span> <b class=\\\"bg-primary header\\\"></b> <b class=\\\"bg-white header\\\"></b> <b class=bg-dark></b></span></label><label class=\\\"i-checks block m-b\\\" ng-click=\\\"\\n\" +\n    \"          app.settings.navbarHeaderColor='bg-info'; \\n\" +\n    \"          app.settings.navbarCollapseColor='bg-white-only'; \\n\" +\n    \"          app.settings.asideColor='bg-black';\\n\" +\n    \"         \\\"><input type=radio ng-model=app.settings.themeID value=4> <span class=\\\"block bg-light clearfix pos-rlt\\\"><span class=\\\"active pos-abt w-full h-full bg-black-opacity text-center\\\"><i class=\\\"glyphicon glyphicon-ok text-white m-t-xs\\\"></i></span> <b class=\\\"bg-info header\\\"></b> <b class=\\\"bg-white header\\\"></b> <b class=bg-black></b></span></label><label class=\\\"i-checks block m-b\\\" ng-click=\\\"\\n\" +\n    \"          app.settings.navbarHeaderColor='bg-success'; \\n\" +\n    \"          app.settings.navbarCollapseColor='bg-white-only'; \\n\" +\n    \"          app.settings.asideColor='bg-dark';\\n\" +\n    \"         \\\"><input type=radio ng-model=app.settings.themeID value=5> <span class=\\\"block bg-light clearfix pos-rlt\\\"><span class=\\\"active pos-abt w-full h-full bg-black-opacity text-center\\\"><i class=\\\"glyphicon glyphicon-ok text-white m-t-xs\\\"></i></span> <b class=\\\"bg-success header\\\"></b> <b class=\\\"bg-white header\\\"></b> <b class=bg-dark></b></span></label><label class=\\\"i-checks block\\\" ng-click=\\\"\\n\" +\n    \"          app.settings.navbarHeaderColor='bg-danger'; \\n\" +\n    \"          app.settings.navbarCollapseColor='bg-white-only'; \\n\" +\n    \"          app.settings.asideColor='bg-dark';\\n\" +\n    \"         \\\"><input type=radio ng-model=app.settings.themeID value=6> <span class=\\\"block bg-light clearfix pos-rlt\\\"><span class=\\\"active pos-abt w-full h-full bg-black-opacity text-center\\\"><i class=\\\"glyphicon glyphicon-ok text-white m-t-xs\\\"></i></span> <b class=\\\"bg-danger header\\\"></b> <b class=\\\"bg-white header\\\"></b> <b class=bg-dark></b></span></label></div><div class=col-xs-6><label class=\\\"i-checks block m-b\\\" ng-click=\\\"\\n\" +\n    \"          app.settings.navbarHeaderColor='bg-primary'; \\n\" +\n    \"          app.settings.navbarCollapseColor='bg-primary'; \\n\" +\n    \"          app.settings.asideColor='bg-white b-r';\\n\" +\n    \"         \\\"><input type=radio ng-model=app.settings.themeID value=7> <span class=\\\"block bg-light clearfix pos-rlt\\\"><span class=\\\"active pos-abt w-full h-full bg-black-opacity text-center\\\"><i class=\\\"glyphicon glyphicon-ok text-white m-t-xs\\\"></i></span> <b class=\\\"bg-primary header\\\"></b> <b class=\\\"bg-primary header\\\"></b> <b class=bg-white></b></span></label><label class=\\\"i-checks block m-b\\\" ng-click=\\\"\\n\" +\n    \"          app.settings.navbarHeaderColor='bg-info dker'; \\n\" +\n    \"          app.settings.navbarCollapseColor='bg-info dker'; \\n\" +\n    \"          app.settings.asideColor='bg-light dker b-r';\\n\" +\n    \"         \\\"><input type=radio ng-model=app.settings.themeID value=8> <span class=\\\"block bg-light clearfix pos-rlt\\\"><span class=\\\"active pos-abt w-full h-full bg-black-opacity text-center\\\"><i class=\\\"glyphicon glyphicon-ok text-white m-t-xs\\\"></i></span> <b class=\\\"bg-info dker header\\\"></b> <b class=\\\"bg-info dker header\\\"></b> <b class=\\\"bg-light dker\\\"></b></span></label><label class=\\\"i-checks block m-b\\\" ng-click=\\\"\\n\" +\n    \"          app.settings.navbarHeaderColor='bg-primary'; \\n\" +\n    \"          app.settings.navbarCollapseColor='bg-primary'; \\n\" +\n    \"          app.settings.asideColor='bg-dark';\\n\" +\n    \"         \\\"><input type=radio ng-model=app.settings.themeID value=9> <span class=\\\"block bg-light clearfix pos-rlt\\\"><span class=\\\"active pos-abt w-full h-full bg-black-opacity text-center\\\"><i class=\\\"glyphicon glyphicon-ok text-white m-t-xs\\\"></i></span> <b class=\\\"bg-primary header\\\"></b> <b class=\\\"bg-primary header\\\"></b> <b class=bg-dark></b></span></label><label class=\\\"i-checks block m-b\\\" ng-click=\\\"\\n\" +\n    \"          app.settings.navbarHeaderColor='bg-info dker'; \\n\" +\n    \"          app.settings.navbarCollapseColor='bg-info dk'; \\n\" +\n    \"          app.settings.asideColor='bg-black';\\n\" +\n    \"         \\\"><input type=radio ng-model=app.settings.themeID value=10> <span class=\\\"block bg-light clearfix pos-rlt\\\"><span class=\\\"active pos-abt w-full h-full bg-black-opacity text-center\\\"><i class=\\\"glyphicon glyphicon-ok text-white m-t-xs\\\"></i></span> <b class=\\\"bg-info dker header\\\"></b> <b class=\\\"bg-info dk header\\\"></b> <b class=bg-black></b></span></label><label class=\\\"i-checks block m-b\\\" ng-click=\\\"\\n\" +\n    \"          app.settings.navbarHeaderColor='bg-success'; \\n\" +\n    \"          app.settings.navbarCollapseColor='bg-success';\\n\" +\n    \"          app.settings.asideColor='bg-dark';\\n\" +\n    \"          \\\"><input type=radio ng-model=app.settings.themeID value=11> <span class=\\\"block bg-light clearfix pos-rlt\\\"><span class=\\\"active pos-abt w-full h-full bg-black-opacity text-center\\\"><i class=\\\"glyphicon glyphicon-ok text-white m-t-xs\\\"></i></span> <b class=\\\"bg-success header\\\"></b> <b class=\\\"bg-success header\\\"></b> <b class=bg-dark></b></span></label><label class=\\\"i-checks block\\\" ng-click=\\\"\\n\" +\n    \"          app.settings.navbarHeaderColor='bg-danger dker bg-gd'; \\n\" +\n    \"          app.settings.navbarCollapseColor='bg-danger dker bg-gd'; \\n\" +\n    \"          app.settings.asideColor='bg-dark';\\n\" +\n    \"         \\\"><input type=radio ng-model=app.settings.themeID value=12> <span class=\\\"block bg-light clearfix pos-rlt\\\"><span class=\\\"active pos-abt w-full h-full bg-black-opacity text-center\\\"><i class=\\\"glyphicon glyphicon-ok text-white m-t-xs\\\"></i></span> <b class=\\\"bg-danger dker header\\\"></b> <b class=\\\"bg-danger dker header\\\"></b> <b class=bg-dark></b></span></label></div></div></div>\"\n  );\n\n\n  $templateCache.put('athena/show/alarm.html',\n    \"<div class=\\\"bg-light lter b-b wrapper-md ng-scope\\\"><h2 class=\\\"m-n font-thin h4\\\">报警</h2></div><div class=wrapper-md><div class=\\\"panel panel-default\\\"><div class=panel-heading style=\\\"padding-bottom: 0\\\"><div class=row><form class=form-validation name=form><div class=\\\"col-md-4 col-xs-6 m-t-sm tl-wrap-r wrap-label-span-30\\\"><div class=form-group><label class=\\\"col-sm-4 no-padder control-label\\\"><span>区域</span></label><div class=col-sm-8><select class=\\\"input input-sm form-control\\\" ng-model=od.region_id ng-options=\\\"p.id as p.name  for p in  regions\\\" ng-change=\\\" loadSys()\\\"><option value=\\\"\\\">全部区域</option></select></div></div></div><div class=\\\"col-md-4 col-xs-6 m-t-sm tl-wrap-r wrap-label-span-30\\\"><div class=form-group><label class=\\\"col-sm-4 no-padder control-label\\\"><span>系统</span></label><div class=col-sm-8><select class=\\\"input input-sm form-control\\\" ng-model=\\\" od.system_id\\\" ng-options=\\\"s.uuid as s.name  for s in systems\\\"><option value=\\\"\\\">全部系统</option></select></div></div></div><div class=\\\"col-md-4 col-xs-6 m-t-sm tl-wrap-r wrap-label-span-30\\\"><div class=form-group><label class=\\\"col-sm-4 no-padder control-label\\\"><span>严重性</span></label><div class=col-sm-8><select class=\\\"input input-sm form-control\\\" ng-model=od.severity name=serverify ng-options=\\\" k as v for (k,v) in $sys.trigger.severity\\\"><option value=\\\"\\\">全部</option></select></div></div></div><div class=\\\"col-md-4 col-xs-6 m-t-sm tl-wrap-r wrap-label-span-30\\\"><div class=form-group><label class=\\\"col-sm-4 no-padder control-label\\\"><span>起始时间</span></label><div class=col-sm-8><input class=\\\"input input-sm form-control\\\" datetime-picker date-format=\\\"yyyy-MM-dd HH:mm\\\" nofocus data-readonly-input=false ng-model=od.start is-open=\\\"op.showS\\\"> <span class=float-left><button type=button style=\\\"position: absolute;top: 0;right: 10px\\\" class=\\\"btn btn-default btn-sm\\\" ng-click=\\\"openCalendar($event, 'op.showS=true')\\\"><i class=\\\"fa fa-calendar\\\"></i></button></span></div></div></div><div class=\\\"col-md-4 col-xs-6 m-t-sm tl-wrap-r wrap-label-span-30\\\"><div class=form-group><label class=\\\"col-sm-4 no-padder control-label\\\"><span>结束时间</span></label><div class=col-sm-8><input class=\\\"input input-sm form-control\\\" datetime-picker date-format=\\\"yyyy-MM-dd HH:mm\\\" nofocus data-readonly-input=false ng-model=od.end is-open=\\\"op.showE\\\"> <span class=float-left><button type=button style=\\\"position: absolute;top: 0;right: 10px\\\" class=\\\"btn btn-default btn-sm\\\" ng-click=\\\"openCalendar($event, 'op.showE=true')\\\"><i class=\\\"fa fa-calendar\\\"></i></button></span></div></div></div><div class=\\\"col-md-4 col-xs-6 m-t-sm tl-wrap-r wrap-label-span-30\\\"><div class=form-group><label class=\\\"col-sm-4 no-padder control-label\\\"><span>描述</span></label><div class=col-sm-8><input class=\\\"input input-sm form-control\\\" ng-model=\\\"od.desc\\\"></div></div></div><div class=\\\"col-md-4 col-xs-12 m-t-sm padder float-right\\\"><div class=\\\"form-group m-t-xs\\\"><button class=\\\"btn btn-info btn-sm w-46\\\" ng-click=loadPageData(1) token>查询</button></div></div></form></div><div class=\\\"row bg-white m-t-sm b-t\\\"><p class=\\\"h4 pull-left padder\\\" style=\\\"height: 60px;line-height: 60px;font-weight: 100\\\">报警详情</p><div class=\\\"radio pull-right m-r\\\"><label class=i-checks><input type=radio value=b checked ng-model=\\\"op.active \\\"> <i></i> 全部报警</label></div><div class=\\\"radio pull-right m-r m-t\\\"><label class=i-checks><input type=radio value=a ng-model=op.active> <i></i> 活跃报警</label></div></div></div><div class=\\\"panel-body table-responsive no-padder no-border\\\" load-mask ng-init=\\\" _$A = $sys.trigger.op\\\"><table class=\\\"table table-hover table-striped j_table\\\" ng-init=\\\"_config = $sys.trigger.severity\\\"><thead class=flip-content><tr class=background><th>报警ID</th><th width=10%>报警时间</th><th>系统</th><th>报警描述</th><th>重要性</th><th>类别</th><th>活跃状态</th><th class=w-xs style=\\\"padding-right: 20px\\\">操作</th></tr></thead><tbody><tr ng-repeat=\\\"  a  in page.data  \\\"><td>{{ :: a.id }}</td><td>{{ :: a.timestamp | date:\\\"yyyy-MM-dd HH:mm:ss\\\" }}</td><td><a ui-sref=\\\"app.s_system_prop.basic({uuid: a.system_id })\\\" class=text-info>{{ :: a.system_name }}</a></td><td>{{ :: a.desc }}</td><td>{{ :: _config[a.severity] }}</td><td>{{ :: a.class_id }}</td><td>{{ a.active? \\\"活跃\\\":\\\"关闭\\\" }}</td><td style=\\\"padding-right: 20px\\\"><a class=text-info ng-if=\\\" a.active!=1 \\\" ng-click=\\\"showAlarmMsg(a , od.system_id )\\\">详细信息</a> <a ng-if=\\\" a.active == 1 \\\" class=text-info ng-click=\\\"conformAlarm( page, a , $index , od.system_id , op.active )\\\">确认报警</a></td></tr></tbody></table></div><div class=panel-footer><div class=text-center ng-include src=\\\" 'athena/debris/_pager.html'  \\\"></div></div></div></div>\"\n  );\n\n\n  $templateCache.put('athena/show/alarm_bb.html',\n    \"<div class=\\\"panel panel-default\\\"><div class=panel-heading style=padding-top:0px><form class=\\\"form-inline form-validation ng-pristine ng-valid\\\" name=form><div class=\\\"form-group m-t-xs\\\"><label class=\\\"i-checks m-t-xs\\\" style=padding-left:0>活跃报警 <input type=checkbox ng-model=xxx> <i style=margin-left:0></i></label></div><div class=\\\"form-group m-t-xs\\\"><label>区域</label><select class=\\\"input input-sm\\\" ng-model=od.orgin ng-options=\\\"p.id as p.name  for p in  projs\\\"><option value=\\\"\\\">所有区域</option></select><label>系统</label><select class=\\\"input input-sm\\\"><option value=\\\"\\\">所有系统</option></select></div><div class=\\\"form-group m-t-xs\\\"><label>严重性</label><select class=\\\"input input-sm\\\" ng-model=od.severity ng-options=\\\" k as v for (k,v) in $sys.trigger.severity\\\"><option value=\\\"\\\">全部</option></select><label>类别</label><select class=\\\"input input-sm\\\" ng-model=od.class ng-options=\\\" v for v in [1,2,3,4,5,6,7,8,9,0]\\\"><option value=\\\"\\\"></option></select></div><div class=\\\"form-group m-t-xs\\\"><label class=\\\"w-xxs text-right control-label float-left m-t-xs\\\">起始时间:</label><input class=\\\"input input-sm float-left\\\" datetime-picker date-format=\\\"yyyy-MM-dd HH:mm\\\" nofocus data-readonly-input=false ng-model=od.start is-open=\\\"op.showS\\\"> <span class=float-left><button type=button class=\\\"btn btn-default btn-sm\\\" ng-click=\\\"openCalendar($event, 'op.showS=true')\\\"><i class=\\\"fa fa-calendar\\\"></i></button></span><label class=\\\"w-xxs text-right control-label float-left m-t-xs\\\">结束时间:</label><input class=\\\"input input-sm float-left\\\" datetime-picker date-format=\\\"yyyy-MM-dd HH:mm\\\" nofocus ng-model=od.end is-open=\\\"op.showE\\\"> <span class=float-left><button type=button class=\\\"btn btn-default btn-sm\\\" ng-click=\\\"openCalendar($event, 'op.showE=true')\\\"><i class=\\\"fa fa-calendar\\\"></i></button></span></div><div class=\\\"form-group m-t-xs\\\"><span ng-if=\\\" op.ala !='a' \\\" class=\\\"btn btn-info btn-sm w-46 m-l\\\" ng-click=queryAlarm() token=5000>查询</span></div></form><div ng-if=$debug>od = {{od}}<br>op ={{op}}</div></div><div class=\\\"panel-body table-responsive no-padder\\\" ng-init=\\\" _$A = $sys.trigger.op\\\"><table class=\\\"table table-bordered\\\" ng-init=\\\"_config = $sys.trigger.severity\\\"><thead class=flip-content><tr class=background><th>报警ID</th><th>报警时间</th><th>报警描述</th><th>重要性</th><th>类别</th><th>活跃状态</th><th class=w-xs></th></tr></thead><tbody class=text-center><tr ng-repeat=\\\"  a  in alarms  \\\" class=hover><td>{{ a.id }}</td><td>{{ a.timestamp | date:\\\"yyyy-MM-dd HH:mm:ss\\\" }}</td><td>{{ a.desc }}</td><td>{{ _config[a.severity] }}</td><td>{{ a.class_id }}</td><td>{{ a.active?\\\"活跃\\\":\\\"关闭\\\" }}</td><td><a class=text-link ng-click=alarmMsg(a)>详细信息</a></td></tr></tbody></table></div></div>\"\n  );\n\n\n  $templateCache.put('athena/show/alarm_conform.html',\n    \"<div class=modal-header><h4>确认报警</h4></div><div class=modal-body><form name=form class=\\\"form-validation form-horizontal\\\"><textarea tl-wrap ng-model=od.message label=确认信息 ng-maxlength=50 placeholder=请输入确认信息> </textarea></form></div><ng-include src=\\\" 'athena/debris/_modal_footer.html' \\\"></ng-include>\"\n  );\n\n\n  $templateCache.put('athena/show/alarm_msg.html',\n    \"<div class=\\\"well lt row\\\" style=margin-bottom:0px><div class=\\\"text-center m-b m-t\\\"><strong>详细信息</strong></div><div class=\\\"col-xs-6 p-15 m-b\\\"><div class=p-l>报警Id: {{alarm.id}}<br>触发器Id: {{ alarm.trigger_id}}<br>报警时间:{{ alarm.timestamp | date:\\\"yyyy-MM-dd HH:mm:ss\\\" }}<br>重要性:{{ $sys.trigger.severity[ alarm.severity ] }}<br>报警描述: {{alarm.desc}}<br>类别: {{alarm.class_id}}<br></div></div><div class=col-xs-6><div class=p-l>活跃状态:{{ alarm.active==1?\\\"活跃\\\":\\\"关闭\\\" }}<br>关闭时间: {{ alarm.close_time | date:\\\"yyyy-MM-dd HH:mm:ss\\\" }}<br>确认信息: {{ conformMsg.message }}<br>确认人: {{ conformMsg.username }}<br></div></div></div>\"\n  );\n\n\n  $templateCache.put('athena/show/region_system.html',\n    \"<div class=\\\"bg-light lter b-b wrapper-sm padder-md ng-scope\\\"><h2 class=\\\"m-n font-thin h4\\\">{{title}}</h2><a ui-sref=app.s_region class=text-xs>返回 <span class=text-info>区域</span></a></div><div class=wrapper-md ng-controller=dastation_ignore_active><ng-include src=\\\" 'athena/dastation/dastation_temp_panel.html' \\\"></ng-include></div>\"\n  );\n\n\n  $templateCache.put('athena/show/system_prop.html',\n    \"<div class=\\\"bg-light lter b-b wrapper-sm padder-md ng-scope\\\"><span class=\\\"m-n font-thin h4\\\">{{ system.name }}</span> <i class=\\\"m-l fa fa-circle {{ system.online==1 ?'text-success' : 'text-danger' }}\\\"></i><br><a href={{from.url}} class=text-xs>返回 <span class=text-info>{{from.text}}</span></a></div><div class=wrapper-md><ul class=\\\"nav nav-tabs m-t-xxs bg-normal\\\"><li ui-sref-active=active><a class=inline ui-sref=app.s_system_prop.basic><i class=\\\"icon icon-info\\\"></i> <span>系统概览</span></a></li><li ui-sref-active=active><a class=inline ui-sref=app.s_system_prop.current><i class=\\\"icon icon-graph\\\"></i> <span>实时</span></a></li><li ui-sref-active=active><a ui-sref=app.s_system_prop.history><i class=\\\"fa fa-history\\\"></i> <span>历史</span></a></li><li ui-sref-active=active><a ui-sref=app.s_system_prop.alarm><i class=\\\"icon icon-fire\\\"></i> <span>报警</span></a></li><li ui-sref-active=active><a ui-sref=app.s_system_prop.map><i class=\\\"icon icon-pointer\\\"></i> 地图</a></li><li ui-sref-active=active ng-if=user.viewPanel><a ui-sref=app.s_system_prop.panel><i class=\\\"icon icon-flag\\\"></i> 信息板</a></li></ul><div ui-view></div></div>\"\n  );\n\n\n  $templateCache.put('athena/show/system_prop_alarm.html',\n    \"<div class=\\\"panel panel-default b-t-none\\\"><div class=\\\"panel-heading bg-white-only\\\" style=padding-top:0px><form class=\\\"form-validation ng-pristine ng-valid padding-10\\\" name=form><div class=row><div class=\\\"radio pull-right m-r\\\"><label class=i-checks><input type=radio ng-model=op.ala value=b> <i></i> 全部报警</label></div><div class=\\\"radio pull-right m-r m-t\\\"><label class=i-checks><input type=radio ng-model=op.ala value=a checked> <i></i> 活跃报警</label></div><div ng-if=\\\" op.ala == 'b' \\\" class=\\\"inline col-md-8 col-sm-8 col-xs-12\\\"><div class=\\\"col-md-5 col-sm-6 m-t-sm\\\"><label class=\\\"w-xxs text-right control-label m-t-xs col-sm-3 no-padder\\\">起始时间</label><div class=col-sm-9><input class=\\\"form-control input input-sm col-xs-12\\\" datetime-picker date-format=\\\"yyyy-MM-dd HH:mm\\\" nofocus data-readonly-input=false ng-model=op.start is-open=\\\"od.showS\\\"> <span class=float-left style=\\\"position: absolute;top: 0px;right:0px\\\"><button type=button class=\\\"btn btn-default btn-sm\\\" ng-click=\\\"openCalendar($event, 'od.showS=true')\\\"><i class=\\\"fa fa-calendar\\\"></i></button></span></div></div><div class=\\\"col-md-5 col-sm-6 m-t-sm\\\"><label class=\\\"w-xxs text-right control-label m-t-xs col-sm-3 no-padder\\\">结束时间</label><div class=col-sm-9><input class=\\\"form-control input input-sm col-xs-12\\\" datetime-picker date-format=\\\"yyyy-MM-dd HH:mm\\\" nofocus ng-model=op.end is-open=\\\"od.showE\\\"> <span class=float-left style=\\\"position: absolute;top: 0px;right:0px\\\"><button type=button class=\\\"btn btn-default btn-sm\\\" ng-click=\\\"openCalendar($event, 'od.showE=true')\\\"><i class=\\\"fa fa-calendar\\\"></i></button></span></div></div><div ng-if=false><label class=\\\"w-30 text-right\\\" for=exampleInputPassword2>条数</label><select ng-model=op.num class=\\\"form-control w-xs inline m-t-xs\\\" ng-options=\\\" n for n in [50,100,200,300,400,500] \\\" required></select></div><div class=\\\"col-md-2 col-sm-6 float-right\\\"><span ng-if=\\\" op.ala !='a' \\\" class=\\\"btn btn-info btn-sm w-46 m-l m-t-sm float-right pos-rlt\\\" ng-click=\\\"loadPageData(1 , $event  )\\\" token>查询 <i class=\\\"fa fa-spin fa-spinner hide float-right pos-abt\\\" style=\\\"right: -20px;top:5px;color: #333\\\"></i></span></div></div><div ng-if=\\\" op.ala=='a' \\\" class=\\\"inline p-t\\\"><span class=\\\"btn btn-info btn-sm w-46 m-l-sm m-t-sm pos-rlt\\\" ng-click=\\\"loadPageData(1 , $event )\\\" token>刷新 <i class=\\\"fa fa-spin fa-spinner hide pull-right pos-abt\\\" style=\\\"right: -20px;color: #333;top: 5px\\\"></i></span></div></div></form></div><div class=\\\"panel-body table-responsive no-padder\\\" load-mask ng-init=\\\" _$A = $sys.trigger.op\\\"><table class=\\\"table j_table table-striped b-t-none b-b-none\\\" ng-init=\\\"_config = $sys.trigger.severity\\\"><thead class=flip-content><tr class=background><th>报警ID</th><th>报警时间</th><th>报警描述</th><th>重要性</th><th>类别</th><th>活跃状态</th><th class=w-xs style=\\\"padding-right: 20px\\\">操作</th></tr></thead><tbody class=text-left><tr ng-repeat=\\\"  a  in  page.data  \\\"><td>{{ :: a.id }}</td><td>{{ :: a.timestamp | date:\\\"yyyy-MM-dd HH:mm:ss\\\" }}</td><td>{{ :: a.desc }}</td><td>{{ :: _config[a.severity] }}</td><td>{{ :: a.class_id }}</td><td translate=\\\"alarm_active.{{ a.active}}\\\"></td><td style=\\\"padding-right: 20px\\\"><a class=text-info ng-if=\\\" a.active!=1 \\\" ng-click=\\\"showAlarmMsg(a , system.uuid)\\\">详细信息</a> <a ng-if=\\\" a.active == 1 \\\" class=text-info ng-click=\\\"conformAlarm( page, a , $index , system.uuid , op.ala )\\\">确认报警</a></td></tr></tbody></table></div><div class=panel-footer><div class=text-center ng-include src=\\\" 'athena/debris/_pager.html'  \\\"></div></div></div>\"\n  );\n\n\n  $templateCache.put('athena/show/system_prop_basic.html',\n    \"<div class=\\\"panel-body bg-light b-a b-t-none bg-white text-base\\\"><div class=\\\"col-md-6 m-b padder-md\\\"><div class=\\\"m-b hbox\\\"><div class=\\\"col w-sm\\\">系统Id</div><div class=\\\"col text-right\\\">{{:: system.uuid }}</div></div><div class=\\\"m-b hbox\\\"><div class=\\\"col w-sm\\\">所属区域</div><div class=\\\"col text-right\\\">{{ :: system.region_name }}</div></div><div class=\\\"m-b hbox\\\"><div class=\\\"col w-sm\\\">创建时间</div><div class=\\\"col text-right\\\">{{ :: system.create_time | date:\\\"yyyy-MM-dd HH:mm\\\"}}</div></div><div class=m-b><div class=\\\"col w-sm m-b-sm\\\">备注</div><div class=\\\"w-full wrapper-sm b-a\\\" style=\\\"height: 100px;color: #a0a0a0\\\">{{ :: system.desc}}</div></div><div class=\\\"m-b col-xs-12 no-padder\\\"><div class=\\\"col-xs-4 no-padder\\\"><div class=\\\"panel padder-v item bg-primary text-center r-2x\\\"><span class=\\\"text-white font-thin h1 block\\\">{{ :: totalAlarm_act }}</span> <span class=text-xs style=\\\"color: #d3cfea\\\">活跃报警数</span></div></div><div class=\\\"col-xs-7 no-padder pull-right\\\"><div class=\\\"alert alert-danger r-2x\\\"><span class=\\\"text-danger text-sm m-t-xs block\\\" style=\\\"color: #a94442\\\">最新报警：{{ :: lastAlarm.timestamp | date:\\\"yyyy-MM-dd HH:mm\\\" }}</span> <span class=\\\"text-danger text-sm block\\\" style=\\\"color: #a94442\\\">具体报警: {{ :: lastAlarm.desc }}</span> <span class=\\\"text-danger text-sm block\\\" style=\\\"color: #a94442\\\">严重性 ：{{ lastAlarm.severity }}<a ui-sref=app.s_system_prop.alarm class=pull-right><span class=text-info-dk>查看报警</span></a></span></div></div></div></div><div class=\\\"col-md-6 gap-5 pull-right no-padder\\\" style=\\\"height: auto\\\"><img ng-src=\\\"{{ system.pic_url?( ossRoot + system.pic_url):'img/system_null.png'}}\\\" style=\\\"width:100%;height: auto;max-width: 500px\\\"></div></div>\"\n  );\n\n\n  $templateCache.put('athena/show/system_prop_current.html',\n    \"<div class=\\\"panel panel-default b-t-none\\\"><div class=\\\"panel-heading b-b-none no-padder bg-white-only\\\"><form class=\\\"form-inline row m-l m-r\\\"><div class=\\\"col-md-3 col-sm-5 col-xs-12 m-t-sm m-b-sm\\\"><label class=\\\"col-xs-4 float-left no-padder\\\" style=\\\"line-height: 30px\\\"><span>搜索</span></label><div class=\\\"col-xs-8 no-padder float-right\\\"><input class=\\\"form-control input-sm col-xs-12\\\" ng-model=f_name ng-change=filterTags(f_name)></div></div><div class=\\\"col-md-6 col-sm-7 col-xs-12 m-t-sm m-b-sm\\\" style=\\\"line-height: 30px;min-width: 350px\\\"><label class=\\\"i-checks col-sm-5 text-center\\\"><input type=checkbox ng-model=auto_r> <i></i> 自动刷新</label><span class=\\\"col-sm-7 float-right\\\"><progressbar class=\\\"progress-striped m-b-n-xs w-sm inline\\\" animate=false value=\\\" progValue / 100  \\\" type=success></progressbar></span></div><div class=\\\"col-md-3 col-sm-6 m-t-sm m-b-sm float-right no-padder\\\"><button ng-if=\\\"systemModel.mode !=2 \\\" class=\\\"btn btn-sm btn-info w-xs float-right m-l m-t-xs\\\" ng-click=\\\"d_call( system  , 2 , $event )\\\">召唤</button> <button class=\\\"btn btn-sm btn-info w-xs float-right m-l m-t-xs\\\" ng-click=\\\" getCurrent(  $event ) \\\" style=opacity:1>刷新</button></div></form></div><div class=\\\"panel-body table-responsive no-padder\\\"><table class=\\\"table table-striped j_table b-b-none\\\"><thead class=flip-content><th class=w>变量</th><th class=w>值</th><th class=w>时间戳</th><th class=w-lg>下置</th><th class=w>描述</th><th>查看历史</th></thead><tbody id=current-table><tr ng-repeat=\\\"t in   filtTags \\\" class=hover><td class=full-td>{{ :: t.name}}</td><td id=_val_{{$index}}></td><td id=_time_{{$index}}></td><td><input class=\\\"input input-s\\\" ng-model=v> <button class=\\\"btn btn-info btn-xs btn-s w-48\\\" ng-click=\\\"liveWrite( t, v , $event , this )\\\" token=5000>下置</button> <i class=\\\"fa fa-spin text-info fa-spinner\\\" ng-if=showSpinner></i> <span id=current_msg_{{t}} class=w>{{ msg }}</span></td><td>{{:: t.desc}}</td><td><button class=\\\"btn btn-info btn-xs btn-s w-60\\\" ng-click=goHis(t)>查看历史</button></td></tr></tbody></table></div></div>\"\n  );\n\n\n  $templateCache.put('athena/show/system_prop_history.html',\n    \"<div class=\\\"panel panel-default b-t-none\\\"><div class=\\\"panel-heading bg-white-only no-padder\\\"><form class=\\\"form-validation ng-pristine ng-valid\\\" name=form><div class=\\\"row padder\\\"><div class=\\\"form-group col-md-6 col-sm-6 col-xs-12 m-t-sm m-b-none\\\"><div class=w><select ng-model=op.his_tag class=\\\"height-30 inline col-xs-12 form-control input-sm\\\" ng-options=\\\" t as t.name  for t in tags  \\\" required><option value=\\\"\\\">-请选择变量-</option></select></div></div><div class=\\\"form-group col-md-6 col-sm-6 col-xs-12 m-t-sm m-b-none\\\"><button class=\\\"btn btn-sm btn-default pull-right\\\" ng-click=queryData(6,$event) data-name=6>1年</button> <button class=\\\"btn btn-sm btn-default pull-right\\\" ng-click=queryData(5,$event) data-name=5>6月</button> <button class=\\\"btn btn-sm btn-default pull-right\\\" ng-click=queryData(4,$event) data-name=4>3月</button> <button class=\\\"btn btn-sm btn-default pull-right\\\" ng-click=queryData(3,$event) data-name=3>1月</button> <button class=\\\"btn btn-sm btn-default pull-right\\\" ng-click=queryData(2,$event) data-name=2>7天</button> <button class=\\\"btn btn-sm btn-default pull-right\\\" ng-click=queryData(1,$event) data-name=1>1天</button></div><div class=\\\"form-group col-md-12 col-sm-12 col-xs-12 m-t-sm no-padder m-b-none\\\"><div class=\\\"padder wrapper progress-bar-info r-2x\\\" style=\\\"height: 48px\\\"><span class=\\\"pull-left text-white glyphicon glyphicon-chevron-left\\\" style=\\\"cursor: pointer\\\" ng-click=leftTime()></span><div class=\\\"col-md-6 col-md-offset-3 col-sm-6 col-sm-offset-3 col-xs-8 col-xs-offset-2 m-t-n-xs\\\"><div class=\\\"w item bg-white\\\" style=\\\"margin: 0 auto\\\"><p class=\\\"padder b-a m-b-none\\\" style=\\\"height: 30px;line-height: 30px\\\">{{dateStr}}</p><input style=display:none class=\\\"input input-sm form-control float-left col-xs-12\\\" datetime-picker date-format=\\\"yyyy-MM-dd HH:mm\\\" nofocus data-readonly-input=false ng-model=op.end is-open=\\\"od.showS\\\"> <span class=float-left style=\\\"position: absolute;top: 0px;right: 0px\\\"><button type=button class=\\\"btn btn-default btn-sm\\\" ng-click=\\\"openCalendar($event, 'od.showS=true');changeTemp=true\\\"><i class=\\\"fa fa-calendar\\\"></i></button></span></div></div><span class=\\\"pull-right text-white glyphicon glyphicon-chevron-right\\\" style=\\\"cursor: pointer\\\" ng-click=rightTime()></span></div></div></div></form></div><div class=panel-body><div class=\\\"col-lg-12 col-md-12\\\" id=show_live_data ng-init=initFlotChart() style=\\\"height: 540px; padding: 0px; position: relative\\\" load-mask></div></div></div>\"\n  );\n\n\n  $templateCache.put('athena/show/system_prop_map.html',\n    \"<div class=\\\"panel-body well m-b-none no-border\\\" id=station_map ng-init=initMap()></div>\"\n  );\n\n\n  $templateCache.put('athena/show/system_prop_panel.html',\n    \"<iframe class=\\\"b b-t-none m-b-none\\\" ng-src={{currentProjectUrl}} style=\\\"width: 100%;height: 700px\\\"></iframe>\"\n  );\n\n\n  $templateCache.put('athena/support/tech.html',\n    \"<div class=\\\"panel b-a gap-5\\\"><div class=\\\"panel-heading b-b b-light\\\"><div class=\\\"input-group col-md-6 col-lg-4\\\"><span class=input-group-btn><span class=\\\"btn btn-default height-30 disabled\\\" translate=common.search></span></span> <input class=\\\"form-control input-sm\\\" ng-model=f_projname></div></div><ul class=\\\"list-group list-group-lg no-bg auto\\\"><li class=\\\"list-group-item clearfix\\\"><span class=\\\"pull-left thumb-sm m-r\\\"><img src=../../img/a4.jpg alt=...> <i class=\\\"on b-white bottom\\\"></i></span> <span class=clear><a href=\\\"\\\">发噶尔啊发噶尔啊发噶尔啊发噶尔啊发噶尔啊发噶尔啊发放</a><div class=\\\"pull-right text-muted text-sm\\\">一个月前</div><small class=\\\"text-muted clear text-ellipsis\\\">方法为噶尔啊</small> <small class=\\\"text-muted clear text-ellipsis\\\">方法为噶尔啊</small></span></li><li class=\\\"list-group-item clearfix\\\"><span class=\\\"pull-left thumb-sm m-r\\\"><img src=../../img/a5.jpg alt=...> <i class=\\\"on b-white bottom\\\"></i></span> <span class=clear><span><i class=\\\"glyphicon glyphicon-bell text-info\\\"></i> <a ui-sref=app.tech_detail class=h5></a><div class=\\\"pull-right text-muted text-sm\\\">11:30 <span class=\\\"badge bg-warning pull-right m-l-xs\\\">10</span></div><small class=\\\"text-muted clear\\\">user_1 user_1 user_1</small> <small class=\\\"text-muted clear\\\">Come online and we need talk about the plans that we have discussed Come online and we need talk about the plans that we have discussed Come online and we need talk about the plans that we have discussed Come online and we need talk about the plans that</small></span></span></li></ul><div class=\\\"clearfix panel-footer\\\"><ng-include src=\\\" 'athena/debris/_pager.html'  \\\"></ng-include><button class=\\\"btn btn-success btn-sm w-70 m-l\\\" ng-if=\\\" !isShowModul\\\" ng-click=\\\"  goto( 'app.proj.addproj' ) \\\">添加区域</button></div></div>\"\n  );\n\n\n  $templateCache.put('athena/support/techdetail.html',\n    \"<div class=\\\"panel panel-default gap-5\\\" style=\\\"width:60%; margin: 5px auto\\\"><div class=panel-body><div class=m-b><a href=\\\"\\\" class=\\\"pull-left thumb-sm\\\"><img src=../../img/a2.jpg alt=...></a><div class=m-l-xxl><div class=\\\"pos-rlt wrapper b b-light r r-2x\\\"><span class=\\\"arrow left pull-up\\\"></span><p class=m-b-none>Hi John, What's up..i John, What's up..i John, What's up..i John, What's up.. i John, What's up..i John, What's up..i John, What's up..v i John, What's up..i John, What's up..i John, What's up.. i John, What's up..i John, What's up..i John, What's up..i John, What's up..i John, What's up.. i John, What's up..i John, What's up..i John, What's up..i John, What's up.. i John, What's up..i John, What's up..i John, What's up.. i John, What's up..i John, What's up..i John, What's up.. i John, What's up..i John, What's up.. .</p></div><small class=text-muted><i class=\\\"fa fa-ok text-success\\\"></i> 2 minutes ago</small></div></div><div class=m-b><a href=\\\"\\\" class=\\\"pull-left thumb-sm\\\"><img src=../../img/a2.jpg alt=...></a><div class=m-l-xxl><div class=\\\"pos-rlt wrapper b b-light r r-2x\\\"><span class=\\\"arrow left pull-up\\\"></span><p html=data></p></div><small class=text-muted><i class=\\\"fa fa-ok text-success\\\"></i> 2 minutes ago</small></div></div><div class=m-b><a href=\\\"\\\" class=\\\"pull-right thumb-sm\\\"><img src=../../img/a3.jpg class=img-circle alt=...></a><div class=m-r-xxl><div class=\\\"pos-rlt wrapper bg-primary r r-2x\\\"><span class=\\\"arrow right pull-up arrow-primary\\\"></span><p class=m-b-none>Lorem ipsum dolor sit amet, conse<br>adipiscing eli...<br>:)</p></div><small class=text-muted>1 minutes ago</small></div></div><div class=gap-5 ng-if=false><div ng-if=false class=\\\"btn-toolbar m-b-sm btn-editor\\\" data-role=editor-toolbar data-target=#editor><div class=\\\"btn-group dropdown\\\"><a class=\\\"btn btn-sm btn-default dropdown-toggle ng-scope\\\" data-toggle=dropdown tooltip=Font aria-haspopup=true aria-expanded=false><i class=\\\"fa text-base fa-font\\\"></i><b class=caret></b></a><ul class=dropdown-menu><li><a href=\\\"\\\" dropdown-toggle=\\\"\\\" data-edit=\\\"fontName Serif\\\" style=\\\"font-family:'Serif'\\\" aria-haspopup=true aria-expanded=false>Serif</a></li><li><a href=\\\"\\\" dropdown-toggle=\\\"\\\" data-edit=\\\"fontName Sans\\\" style=\\\"font-family:'Sans'\\\" aria-haspopup=true aria-expanded=false>Sans</a></li><li><a href=\\\"\\\" dropdown-toggle=\\\"\\\" data-edit=\\\"fontName Arial\\\" style=\\\"font-family:'Arial'\\\" aria-haspopup=true aria-expanded=false>Arial</a></li></ul></div><div class=\\\"btn-group dropdown\\\"><a class=\\\"btn btn-sm btn-default dropdown-toggle ng-scope\\\" data-toggle=dropdown tooltip=\\\"Font Size\\\" aria-haspopup=true aria-expanded=false><i class=\\\"fa text-base fa-text-height\\\"></i>&nbsp;<b class=caret></b></a><ul class=dropdown-menu><li><a href=\\\"\\\" dropdown-toggle=\\\"\\\" data-edit=\\\"fontSize 5\\\" style=font-size:24px aria-haspopup=true aria-expanded=false>Huge</a></li><li><a href=\\\"\\\" dropdown-toggle=\\\"\\\" data-edit=\\\"fontSize 3\\\" style=font-size:18px aria-haspopup=true aria-expanded=false>Normal</a></li><li><a href=\\\"\\\" dropdown-toggle=\\\"\\\" data-edit=\\\"fontSize 1\\\" style=font-size:14px aria-haspopup=true aria-expanded=false>Small</a></li></ul></div><div class=btn-group><a class=\\\"btn btn-sm btn-default ng-scope\\\" data-edit=bold tooltip=\\\"Bold (Ctrl/Cmd+B)\\\"><i class=\\\"fa text-base fa-bold\\\"></i></a> <a class=\\\"btn btn-sm btn-default ng-scope\\\" data-edit=italic tooltip=\\\"Italic (Ctrl/Cmd+I)\\\"><i class=\\\"fa text-base fa-italic\\\"></i></a> <a class=\\\"btn btn-sm btn-default ng-scope\\\" data-edit=strikethrough tooltip=Strikethrough><i class=\\\"fa text-base fa-strikethrough\\\"></i></a> <a class=\\\"btn btn-sm btn-default ng-scope\\\" data-edit=underline tooltip=\\\"Underline (Ctrl/Cmd+U)\\\"><i class=\\\"fa text-base fa-underline\\\"></i></a></div><div class=btn-group><a class=\\\"btn btn-sm btn-default ng-scope\\\" data-edit=insertunorderedlist tooltip=\\\"Bullet list\\\"><i class=\\\"fa text-base fa-list-ul\\\"></i></a> <a class=\\\"btn btn-sm btn-default ng-scope\\\" data-edit=insertorderedlist tooltip=\\\"Number list\\\"><i class=\\\"fa text-base fa-list-ol\\\"></i></a> <a class=\\\"btn btn-sm btn-default ng-scope\\\" data-edit=outdent tooltip=\\\"Reduce indent (Shift+Tab)\\\"><i class=\\\"fa text-base fa-dedent\\\"></i></a> <a class=\\\"btn btn-sm btn-default ng-scope\\\" data-edit=indent tooltip=\\\"Indent (Tab)\\\"><i class=\\\"fa text-base fa-indent\\\"></i></a></div><div class=btn-group><a class=\\\"btn btn-sm btn-default ng-scope btn-info\\\" data-edit=justifyleft tooltip=\\\"Align Left (Ctrl/Cmd+L)\\\"><i class=\\\"fa text-base fa-align-left\\\"></i></a> <a class=\\\"btn btn-sm btn-default ng-scope\\\" data-edit=justifycenter tooltip=\\\"Center (Ctrl/Cmd+E)\\\"><i class=\\\"fa text-base fa-align-center\\\"></i></a> <a class=\\\"btn btn-sm btn-default ng-scope\\\" data-edit=justifyright tooltip=\\\"Align Right (Ctrl/Cmd+R)\\\"><i class=\\\"fa text-base fa-align-right\\\"></i></a> <a class=\\\"btn btn-sm btn-default ng-scope\\\" data-edit=justifyfull tooltip=\\\"Justify (Ctrl/Cmd+J)\\\"><i class=\\\"fa text-base fa-align-justify\\\"></i></a></div></div></div></div><footer class=panel-footer><div><a class=\\\"pull-left thumb-xs\\\"><img src=../../img/a3.jpg class=img-circle alt=...></a><div class=m-l-xl><div ui-jq=wysiwyg class=\\\"form-control h-auto\\\" style=min-height:150px contenteditable=true></div><span class=input-group-btn><button class=\\\"btn btn-default m-t-xs\\\" type=button>SEND</button></span></div></div></footer></div>\"\n  );\n\n\n  $templateCache.put('athena/sysmodel/_log_part.html',\n    \" <input tl-wrap ng-if=\\\" !isAdd \\\" disabled ng-model=L.name label=text.name><select tl-wrap ng-init=\\\"L.log_type = L.save_log? L.log_type : undefined \\\" ng-options=\\\"  k as v for (k,v) in $sys.log_type.values\\\" ng-model=L.log_type label=保存日志 ng-change=\\\" L.save_log =  L.log_type ? 1: 0 \\\"><option value=\\\"\\\">--不保存日志--</option></select><div ng-if=\\\" L.save_log && L.log_type=='RAW'\\\"><select ng-options=\\\"  o.v as o.k  for o in  $sys.log_period.values\\\" tl-wrap ng-model=L.log_cycle label=日志记录间隔></select></div><div ng-if=\\\" T.type =='Analog' \\\"><input ng-model=L.deviation label=\\\"偏差 \\\" type=number tl-wrap required> <input ng-model=L.scale label=text.scale type=number tl-wrap required></div><input tl-wrap ng-model=L.unit label=text.unit>\"\n  );\n\n\n  $templateCache.put('athena/sysmodel/add_gateway.html',\n    \"<div class=modal-header><span ng-if=isAdd>添加串口配置</span> <span ng-if=!isAdd>编辑串口配置</span></div><div class=modal-body><form name=form class=\\\"form-validation form-horizontal\\\" ng-init=\\\" _config = $sys.gateway ;\\n\" +\n    \"               filterType()\\n\" +\n    \"            \\\"><select tl-wrap ng-if=isAdd ng-model=G.t ng-options=\\\" t as t group by T for (t,T) in _$types   \\\" label=串口 required></select><select tl-wrap ng-model=\\\" D.baud_rate \\\" ng-options=\\\"  k for k in _config.baud_rate\\\" label=波特率 required></select><select tl-wrap ng-model=\\\" D.data_bits \\\" ng-options=\\\"  k for k  in _config.data_bits\\\" label=数据位 required></select><select tl-wrap ng-model=\\\" D.stop_bits \\\" ng-options=\\\"  k for k  in _config.stop_bits\\\" label=停止位 required></select><select tl-wrap ng-model=\\\" D.parity \\\" ng-options=\\\"  k  as v  for (k,v)  in _config.parity\\\" label=校验 required></select><input type=number tl-wrap ng-model=D.delay label=延迟(毫秒)></form></div><ng-include src=\\\" 'athena/debris/_modal_footer.html' \\\"></ng-include>\"\n  );\n\n\n  $templateCache.put('athena/sysmodel/add_log_tag.html',\n    \"<div class=modal-header><span ng-if=isAdd>添加系统模型点</span> <span ng-if=!isAdd>编辑系统模型点</span></div><div class=modal-body><form name=form_log class=\\\"form-validation form-horizontal\\\"><ng-include src=\\\"  'athena/sysmodel/_log_part.html'  \\\"></ng-include></form></div><ng-include src=\\\" 'athena/debris/_modal_footer.html' \\\"></ng-include>\"\n  );\n\n\n  $templateCache.put('athena/sysmodel/add_message.html',\n    \"<div class=modal-header><span ng-if=isAdd>添加通知</span> <span ng-if=!isAdd>编辑通知</span></div><div class=modal-body><form name=form class=\\\"form-validation form-horizontal\\\" ng-init=\\\"_config = $sys.message \\\"><input tl-wrap ng-model=M.name label=text.name required><select tl-wrap ng-model=M.trigger_id ng-options=\\\" t.id as t.name for t in   triggers\\\" label=触发器 required><option value=\\\"\\\">选择触发器</option></select><div class=\\\"form-group ng-scope\\\"><label class=\\\"col-sm-3 col-sm-offset-1 control-label\\\"><span>接收用户</span></label><div class=col-sm-7><div class=\\\"radio inline\\\"><label class=i-checks><input type=radio ng-model=\\\"M.user_category \\\" value=1><i></i> <span>平台用户</span></label></div><div class=\\\"radio inline m-l\\\"><label class=i-checks><input type=radio ng-model=\\\" M.user_category \\\" value=0><i></i> <span>联系人用户</span></label></div></div></div><textarea tl-wrap ng-model=M.message_params label=消息体> </textarea></form></div><ng-include src=\\\" 'athena/debris/_modal_footer.html' \\\"></ng-include>\"\n  );\n\n\n  $templateCache.put('athena/sysmodel/add_proftrigger.html',\n    \"<div class=modal-header><span ng-if=isAdd>新建触发器</span> <span ng-if=!isAdd>编辑触发器</span></div><div class=modal-body ng-init=\\\"stepx={ step:0}\\\"><progressbar value=(stepx.step+1)*34 class=\\\"progress-xs m-b m-t-n-xs\\\" type=success></progressbar><form name=step0 ng-show=\\\"stepx.step == 0\\\" class=\\\"form-validation form-horizontal\\\" ng-init=\\\"_config = $sys.trigger \\\"><input tl-wrap ng-model=T.name label=text.name required><select tl-wrap ng-options=\\\" k as v for (k,v) in _config.type \\\" ng-model=T.type tl-default=_config.type_default label=触发类型></select><select tl-wrap ng-if=\\\"   sysmodel.mode == 1\\\" ng-options=\\\"  k as v  for (k,v) in _config.origin\\\" ng-model=T.origin label=触发源 tl-default=_config.origin_default></select><select tl-wrap ng-if=\\\"   sysmodel.mode == 2\\\" ng-options=\\\"  k as v  for (k,v) in  { 0 :_config.origin['0'] } \\\" ng-model=T.origin label=触发源 tl-default=0></select><textarea tl-wrap ng-model=T.desc label=text.desc></textarea></form><form name=step1 ng-show=\\\"stepx.step == 1\\\" ng-init=\\\"_config = $sys.trigger \\\" class=form-validation><table class=table><thead><tr><th width=10%>条件1</th><th width=10%>变量</th><th width=20%>参数</th><th width=10%>运算符</th><th width=10%>变量</th><th width=20%>参数</th><th width=10%></th></tr></thead><tbody class=text-left><tr ng-repeat=\\\" c in  T.conditions \\\" ng-init=\\\"  l = c.exp.left ;\\n\" +\n    \"                                                                r = c.exp.right ;\\n\" +\n    \"                                                                exp = c.exp ;\\n\" +\n    \"                                                                \\\"><td><select ng-options=\\\"  l for l in _config.verb \\\" class=form-control ng-model=c.verb ng-if=\\\"$index != 0 \\\"></select></td><td><input class=form-control ng-model=\\\" l.fn \\\" readonly></td><td><select ng-if=\\\" l.fn  == 'PV' \\\" ng-model=\\\" l.args \\\" class=form-control ui-validate=\\\"  '$value != r.args'   \\\" ui-validate-watch=\\\" 'r.args' \\\" ui-jq=chosen source-arr=tags_arr k=name v=name required><option value>请选择变量</option></select><input ng-if=\\\" l.fn  == null || l.fn == 'null' \\\" ng-model=l.args class=form-control type=\\\"{{ tags_nv[r.args].type }}\\\" placeholder=\\\"{{ typer }}\\\" ui-validate=\\\"  ' $value != r.args' \\\" ui-validate-watch=\\\" 'r.args' \\\" required></td><td><select ng-options=\\\" o for o in _config.op\\\" tl-default=_config.op_default ng-model=exp.op class=form-control></select></td><td><select ng-options=\\\" v as k for (k,v) in _config.fn\\\" ng-model=r.fn ng-change=\\\" r.args = null ;\\\" class=form-control><option value>数值</option></select></td><td ng-if=\\\"  r.fn == 'PV' \\\"><select ng-model=r.args class=form-control ui-validate=\\\"  '$value != l.args' \\\" ui-validate-watch=\\\" 'l.args'  \\\" ui-jq=chosen source-arr=tags_arr v=name k=name required><option value>请选择变量</option></select></td><td ng-if=\\\" r.fn == null || r.fn == 'null' \\\"><input ng-model=\\\" r.args\\\" class=form-control placeholder=\\\"{{ typel }}\\\" type=\\\"{{ tags_nv[l.args].type }}\\\" ui-validate=\\\"  '$value!= l.args' \\\" ui-validate-watch=\\\" 'l.args' \\\" required></td><td><a class=\\\"fa fa-minus-circle pull-right text-danger m-t-xs\\\" ng-show=\\\" $index != 0 \\\" ng-click=\\\"delVerb( $index )\\\"></a></td></tr><tr class=b-t><td colspan=7 class=text-left><span class=\\\"btn btn-primary btn-sm w-46 dropdown-toggle\\\" ng-click=appendVerb()>添加</span></td></tr></tbody></table></form><form name=step2 ng-show=\\\"stepx.step == 2\\\" ng-init=\\\"_config = $sys.trigger \\\" class=\\\"form-validation form-horizontal\\\"><select tl-wrap ng-options=\\\" k as v for (k,v) in _config.action \\\" ng-model=T.action tl-default=_config.action_default label=行为></select><div ng-if=\\\"T.action == _config.action_alarm \\\"><select tl-wrap ng-options=\\\" k as v for (k,v) in _config.severity \\\" ng-model=T.params.severity tl-default=_config.severity_default label=严重性></select><select tl-wrap ng-options=\\\" k as v for (k,v) in $sys.trigger.class_id \\\" ng-model=T.params.class_id tl-default=_config.class_id_default label=类别></select><textarea tl-wrap ng-model=T.params.desc ng-max=50 ng-maxlength=50 label=报警描述 required></textarea></div><div ng-if=\\\"T.action == _config.action_event\\\">Event Event Event Event Input .....</div><div ng-if=\\\"T.action == _config.action_task\\\">Task Task Task Task Task Input .....</div></form></div><div class=\\\"modal-footer text-center\\\"><div ng-show=\\\"stepx.step == 0\\\"><button type=submit class=\\\"btn btn-default btn-sm btn-primary w-60\\\" ng-click=\\\"validForm('step0') ;stepx.step = 1 ; \\\">下一步</button> <button type=submit class=\\\"btn btn-default btn-sm btn-primary w-60\\\" ng-click=cancel()>取消</button></div><div ng-show=\\\"stepx.step == 1\\\"><button class=\\\"btn btn-primary btn-sm w-60\\\" ng-click=\\\"stepx.step = 0 ;   \\\">上一步</button> <button class=\\\"btn btn-primary btn-sm w-60\\\" ng-disabled=form.$invalid ng-click=\\\" validForm('step1') ; stepx.step = 2   ; \\\">下一步</button> <button class=\\\"btn btn-default btn-sm btn-primary w-60\\\" ng-click=cancel()>取消</button></div><div ng-show=\\\"stepx.step == 2\\\"><button class=\\\"btn btn-primary btn-sm w-60\\\" ng-click=\\\"stepx.step = 1 ;   \\\">上一步</button> <button ng-disabled=step1.$invalid class=\\\"btn btn-primary btn-sm w-60\\\" ng-click=\\\" validForm('step2');done();\\\" ng-show=isAdd>创建</button> <button ng-disabled=step1.$invalid ng-show=!isAdd class=\\\"btn btn-primary btn-sm w-60\\\" ng-click=\\\" validForm('step2');done();\\\">更新</button> <button class=\\\"btn btn-default btn-sm btn-primary w-60\\\" ng-click=cancel()>取消</button></div></div>\"\n  );\n\n\n  $templateCache.put('athena/sysmodel/add_sysdevice.html',\n    \"<div class=modal-header><span ng-if=isAdd>添加系统设备</span> <span ng-if=!isAdd>编辑系统设备</span></div><div class=modal-body ng-init=\\\"stepx={  step: 0 } ;  \\\"><progressbar value=\\\"(stepx.step +1 )* ( isG?34:50) \\\" class=\\\"progress-xs m-t-n-xs m-b\\\" type=success></progressbar><div ng-show=\\\"stepx.step == 0\\\"><form name=step0 class=\\\"form-validation form-horizontal\\\"><input tl-wrap required ng-model=D.name label=设备名称> <input tl-wrap ng-model=D.dev_cycle type=number label=采样周期 min=1 max=59 required><select tl-wrap ng-model=D.cycle_unit label=采样周期单位 ng-options=\\\"o.v as o.k for o in $sys.device.timeUnit \\\"></select><input tl-wrap ng-model=D.slow_cycle type=number label=慢速周期 min=1 max=59 required><select tl-wrap ng-model=D.slow_cycle_unit label=慢速周期单位 ng-options=\\\"o.v as o.k for o in $sys.device.timeUnit \\\"></select><input tl-wrap ng-model=D.dev_timeout type=number label=连接超时时间(秒) max=60 min=8 required> <input tl-wrap ng-model=D.dev_retry type=number label=连接重试次数 min=0 max=3 required> <input tl-wrap ng-model=D.delay type=number label=命令延时(毫秒) min=0 max=1000 required><textarea tl-wrap ng-model=D.desc label=备注> </textarea></form></div><form name=step1 ng-show=\\\"stepx.step == 1\\\" class=\\\"form-validation form-horizontal\\\"><select tl-wrap ng-model=D.device_model ng-options=\\\"  k  as v.name for (k,v) in devModelKV\\\" ng-change=changeModel() ng-disabled=\\\" !isAdd\\\" label=设备模型></select><ng-include src=\\\" 'athena/_device/'+ devModel.driver_id +'.html' \\\"></ng-include></form><form name=step2 ng-show=\\\" isG && stepx.step == 2 \\\" class=\\\"form-validation form-horizontal\\\"><ng-include src=\\\" 'athena/_device/dev_network.html' \\\"></ng-include></form></div><div class=\\\"modal-footer text-center\\\"><div ng-show=\\\"stepx.step == 0\\\"><button class=\\\"btn btn-default btn-sm btn-primary w-60\\\" ng-click=\\\"validForm('step0') ;stepx.step = 1 ; \\\">下一步</button> <button class=\\\"btn btn-default btn-sm btn-primary w-60\\\" ng-click=cancel()>取消</button></div><div ng-show=\\\"stepx.step == 1 && isG \\\"><button class=\\\"btn btn-primary btn-sm w-60\\\" ng-click=\\\"stepx.step = 0 ;   \\\">上一步</button> <button class=\\\"btn btn-primary btn-sm w-60\\\" ng-click=\\\" validForm('step1') ; stepx.step = 2   ; \\\">下一步</button> <button class=\\\"btn btn-default btn-sm btn-primary w-60\\\" ng-click=cancel()>取消</button></div><div ng-show=\\\"stepx.step == 2 && isG \\\"><button class=\\\"btn btn-primary btn-sm w-60\\\" ng-click=\\\"stepx.step = 1 ;   \\\">上一步</button> <button class=\\\"btn btn-primary btn-sm w-60\\\" ng-click=\\\" validForm('step2');done();\\\" ng-show=isAdd>创建</button> <button ng-show=!isAdd class=\\\"btn btn-primary btn-sm w-60\\\" ng-click=\\\" validForm('step2');done();\\\">更新</button> <button class=\\\"btn btn-default btn-sm btn-primary w-60\\\" ng-click=cancel()>取消</button></div><div ng-show=\\\"stepx.step == 1 && !isG \\\"><button class=\\\"btn btn-primary btn-sm w-60\\\" ng-click=\\\"stepx.step = 0 ;   \\\">上一步</button> <button class=\\\"btn btn-primary btn-sm w-60\\\" ng-click=\\\" validForm('step1');done();\\\" ng-show=isAdd>创建</button> <button ng-show=!isAdd class=\\\"btn btn-primary btn-sm w-60\\\" ng-click=\\\" validForm('step1');done();\\\">更新</button> <button class=\\\"btn btn-default btn-sm btn-primary w-60\\\" ng-click=cancel()>取消</button></div></div>\"\n  );\n\n\n  $templateCache.put('athena/sysmodel/add_sysmodel.html',\n    \"<div class=modal-header><span ng-if=isAdd>新建系统模型</span> <span ng-if=!isAdd>编辑系统模型</span></div><div class=modal-body><form name=form class=\\\"form-validation form-horizontal\\\"><input tl-wrap ng-model=sm.name label=系统模型名称 required><select tl-wrap ng-model=sm.mode ng-if=isAdd ng-options=\\\" k as v  for (k,v) in $sys.sysModelMode.values\\\" ng-change=\\\" sm.comm_type=sm.mode=='1'?'1':undefined \\\" label=模式 required></select><div class=form-group ng-if=\\\" sm.mode == 1\\\"><label class=\\\"col-sm-3 control-label\\\"><span>通讯类型</span></label><div class=col-sm-7><div class=\\\"radio inline m-l\\\"><label class=i-checks><input type=radio value=1 ng-model=sm.comm_type> <i></i> DAServer</label></div></div></div><textarea tl-wrap ng-model=sm.desc label=备注> </textarea></form></div><ng-include src=\\\" 'athena/debris/_modal_footer.html' \\\"></ng-include>\"\n  );\n\n\n  $templateCache.put('athena/sysmodel/add_syspanel.html',\n    \"<div class=modal-header>添加系统信息板</div><div class=modal-body><form name=form class=\\\"form-validation form-horizontal\\\"><input type=submit class=hidden> <input tl-wrap required ng-model=project.name name=input label=名称><textarea tl-wrap ng-model=project.description label=备注>  </textarea></form></div><ng-include src=\\\" 'athena/debris/_modal_footer.html' \\\"></ng-include>\"\n  );\n\n\n  $templateCache.put('athena/sysmodel/add_sysprofile.html',\n    \"<div class=modal-header><span ng-if=isAdd>添加系统配置</span> <span ng-if=!isAdd>编辑系统配置</span></div><div class=modal-body><form name=form class=\\\"form-validation form-horizontal\\\"><input type=submit class=hidden> <input tl-wrap required ng-model=P.name name=input label=系统配置名称><textarea tl-wrap ng-model=P.desc label=备注>  </textarea></form></div><ng-include src=\\\" 'athena/debris/_modal_footer.html' \\\"></ng-include>\"\n  );\n\n\n  $templateCache.put('athena/sysmodel/add_systag.html',\n    \"<div class=modal-header><span ng-if=isAdd>添加变量</span> <span ng-if=!isAdd>编辑变量</span></div><div class=modal-body load-mask><form name=form_tag class=\\\"form-validation form-horizontal\\\"><div ng-if=\\\"isManageMode \\\"><select ng-options=\\\" o as o.name  for  o in sysdevices   \\\" tl-wrap ng-model=\\\" op.dev \\\" label=设备 ng-change=\\\" loadPoint( op.dev ) \\\" required><option value=\\\"\\\">--请选择设备--</option></select><select ui-jq=chosen tl-wrap label=\\\"connect 点\\\" ng-model=op.point ui-refresh=points ng-change=\\\" copyName() \\\" id=7fa574fa44awe k=name v=id&name required><option value=\\\"\\\">--请选择点--</option></select></div><input tl-wrap ng-model=T.name ng-disabled=\\\" !isAdd\\\" label=text.name required><select tl-wrap ng-model=T.type ng-options=\\\"  k  for k in $sys.tag.type\\\" label=text.type required ng-disabled=!isAdd><option value=\\\"\\\">--选择点类型--</option></select><textarea tl-wrap ng-model=T.desc label=备注> </textarea></form><form name=form_log class=\\\"form-validation form-horizontal\\\"><ng-include ng-if=\\\" L && hasProfile\\\" src=\\\"  'athena/sysmodel/_log_part.html'  \\\"></ng-include></form></div><ng-include src=\\\" 'athena/debris/_modal_footer.html' \\\"></ng-include>\"\n  );\n\n\n  $templateCache.put('athena/sysmodel/device_point_ganged.html',\n    \"\"\n  );\n\n\n  $templateCache.put('athena/sysmodel/sys_basic.html',\n    \"<div class=\\\"panel panel-default b-t-none\\\"><div class=\\\"panel-body bg-light bg-white text-base\\\"><div class=\\\"col-md-6 no-padder\\\"><div class=list-group><span class=\\\"list-group-item no-border\\\">ID <span class=pull-right>{{ :: sysmodel.uuid }}</span></span> <span class=\\\"list-group-item no-border\\\">模式 <span class=pull-right>{{ :: $sys.sysModelMode.values[sysmodel.mode] }}</span></span> <span class=\\\"list-group-item no-border\\\">通信类型 <span class=pull-right>{{ :: sysmodel.comm_type == 1 ? \\\"DAServer\\\":\\\"Gateway\\\" }}</span></span> <span class=\\\"list-group-item no-border\\\">变量数量 <span class=pull-right>{{ :: sysmodel.tag_count }}</span></span> <span class=\\\"list-group-item no-border\\\">配置项数量 <span class=pull-right>{{ profiles.length }}</span></span> <span class=\\\"list-group-item no-border\\\">创建时间 <span class=pull-right>{{ :: sysmodel.create_time | date:\\\"yyyy-MM-dd HH:mm Z\\\" }}</span></span> <span class=\\\"list-group-item no-border\\\">最后更新时间 <span class=pull-right>{{ :: sysmodel.create_time | date:\\\"yyyy-MM-dd HH:mm Z\\\" }}</span></span> <span class=\\\"list-group-item no-border\\\">备注<div class=\\\"b-a alert m-t-sm\\\" style=\\\"color: #a0a0a0;height:100px\\\">{{ :: sysmodel.desc }}</div></span></div></div></div></div>\"\n  );\n\n\n  $templateCache.put('athena/sysmodel/sys_device.html',\n    \"<div class=\\\"panel panel-default b-t-none\\\"><div class=\\\"panel-body table-responsive no-padder b-t-none b-b-none\\\" load-mask><table class=\\\"table table-hover table-striped j_table b-t-none\\\"><thead class=flip-content><tr class=background><th width=15%>名称</th><th width=15%>系统模型</th><th width=15%>设备模型</th><th width=20%>配置参数</th><th width=20%>网络参数</th><th width=20%>备注</th><th width=1%>编辑</th><th width=1%>删除</th></tr></thead><tbody><tr ng-repeat=\\\"  sysd  in sysdevices  \\\"><td>{{sysd.name}}</td><td>{{sysmodel.name}}</td><td>{{ devModelKV[ sysd.device_model ] . name }}</td><td><i class=\\\"fa fa-android text-info-dker\\\" popover-trigger=mouseenter popover=\\\" {{ jsonString2Text ( sysd.params ) }}\\\" popover-placement=top></i></td><td><i class=\\\"fa fa-android text-info-dker\\\" popover-trigger=mouseenter popover=\\\" {{ jsonString2Text ( sysd.networ ) }}\\\" popover-placement=top></i></td><td>{{sysd.desc}}</td><td><a class=text-info ng-click=\\\"addOrEditDevice( sysdevices , $index , sysd )\\\" translate=bu.bu3></a></td><td><a class=text-info ng-click=\\\"deleteSysD( this , $index , sysd )\\\" translate=bu.bu4></a></td></tr></tbody></table></div><div class=panel-footer><button class=\\\"btn btn-primary btn-sm w-70 m-l-xs\\\" ng-click=\\\" addOrEditDevice() \\\" token>添加设备</button></div></div>\"\n  );\n\n\n  $templateCache.put('athena/sysmodel/sys_gateway.html',\n    \"<div class=\\\"panel panel-default b-t-none\\\"><div class=\\\"panel-body table-responsive no-padder\\\"><table class=\\\"table table-hover table-striped\\\"><thead class=flip-content><tr><th width=15%>串口</th><th width=15%>波特率</th><th width=15%>data_bits</th><th width=15%>stop_bits</th><th width=15%>parity</th><th width=15%>delay</th><th width=10%>操作</th></tr></thead><tbody class=text-center ng-repeat=\\\" ($T,$W) in GateWay \\\" class=b-b-none ng-if=\\\" $T !='GPS' \\\"><tr ng-repeat=\\\"($t,$data) in $W\\\" class=hover><td>{{ $t }}</td><td>{{$data.baud_rate}}</td><td>{{$data.data_bits}}</td><td>{{$data.stop_bits}}</td><td>{{$data.parity}}</td><td>{{$data.delay}}</td><td><a class=\\\"text-info m-r-xs\\\" ng-click=\\\"c_u_Gateway(  $T , $t , $data  )\\\">编辑</a> <a class=\\\"text-info m-r-xs\\\" translate=bu.bu4 ng-click=\\\"deleteGateway( $T, $t, $data   )\\\">移除</a></td></tr></tbody><tbody><tr><td colspan=7 class=text-left ng-if=!canAddPort><button class=\\\"btn btn-primary btn-sm w-70 m-l m-t-sm m-b-sm\\\" ng-click=\\\" c_u_Gateway( ) \\\">添加串口</button></td></tr><tr><td class=\\\"text-left in-line\\\" colspan=3><div class=\\\"checkbox m-l m-t-sm m-b-sm\\\"><label class=i-checks><input type=checkbox ng-init=\\\"enbaleGPS=false\\\" ng-model=enbaleGPS ng-change=gpsChange()> <i></i> GPS</label></div></td><td ng-if=\\\"enbaleGPS \\\" colspan=2><span>Distance</span><select ng-model=GateWay.GPS.distance class=\\\"form-control input-sm w inline m-t-sm m-b-sm\\\" ng-options=\\\"  k for k  in $sys.gateway.gps_distance\\\" ng-change=\\\" cc() \\\" label=Distance></select></td><td ng-if=\\\"enbaleGPS \\\" colspan=2><span>波特率</span><select ng-model=GateWay.GPS.baud_rate class=\\\"form-control input-sm w inline m-t-sm m-b-sm\\\" ng-change=\\\" cc() \\\" ng-options=\\\"  k for k  in $sys.gateway.gps_baud_rate\\\"></select></td></tr></tbody></table></div><div ng-show=enbaleGPS class=\\\"panel-footer b-t-none b-b b-l b-r\\\"><div ng-show=needUpdate class=\\\"m-t-sm m-b-sm\\\"><button class=\\\"btn btn-success btn-sm w-94 m-l\\\" token ng-click=\\\" saveGateWay( ) \\\">保存网关设置</button> <strong class=\\\"text-danger m-l\\\"><i class=\\\"fa fa-exclamation-triangle\\\"></i><span>网关配置需要保存!!</span></strong></div><div ng-show=\\\" haveSave  &&  !needUpdate \\\" class=\\\"m-t-sm m-b-sm\\\" style=\\\"height: 30px\\\"><strong class=\\\"text-info m-lg\\\"><i class=\\\"fa fa-thumbs-o-up\\\"></i> <span>保存成功!</span></strong></div></div></div>\"\n  );\n\n\n  $templateCache.put('athena/sysmodel/sys_message_center.html',\n    \"<div class=\\\"panel-heading w-full\\\" ng-if=isModelState><div class=\\\"form-group m-t-sm m-b-sm m-l-xs\\\"><span style=\\\"margin-right: 30px\\\">配置项</span><select ng-model=odp.puuid class=\\\"input input-sm w form-control inline\\\" ng-options=\\\"   p.uuid as p.name for p in profiles  \\\" ng-change=\\\"loadMessages( odp.puuid  )\\\"></select></div></div><div class=\\\"panel-body table-responsive no-padder\\\" ng-class=\\\"{'b-t-none': !isModelState}\\\"><table class=\\\"table table-striped j_table b-t-none\\\"><thead class=flip-content><tr class=background><th>Message名称</th><th>触发器 Id</th><th>发送方式</th><th>发送对象</th><th width=30%>消息体</th><th ng-if=isModelState>操作</th></tr></thead><tbody class=text-center><tr ng-repeat=\\\"  m  in messages  \\\"><td>{{m.name}}</td><td>{{m.trigger_id}}</td><td>{{m.user_category}}</td><td>{{m.user_id }}</td><td>{{m.message_params}}</td><td ng-if=isModelState><a class=\\\"text-info m-r-xs\\\" ng-click=\\\"createMessage(  $index  , m   )\\\">编辑</a> <a class=\\\"text-info m-r-xs\\\" translate=bu.bu4 ng-click=\\\"deleteMessage(  $index  , m   )\\\">移除</a></td></tr></tbody></table></div><div class=\\\"panel-footer b-t-none\\\" ng-if=isModelState><button class=\\\"btn btn-primary btn-sm w-70 m-t-sm m-b-sm m-l-xs\\\" ng-click=\\\" createMessage( ) \\\">添加通知</button></div>\"\n  );\n\n\n  $templateCache.put('athena/sysmodel/sys_panel.html',\n    \"<div class=\\\"panel panel-default b-t-none\\\"><div class=\\\"panel-body bg-light bg-white text-base\\\"><div class=\\\"col-md-6 m-b padder-md\\\"><div class=\\\"m-b hbox\\\"><div class=\\\"col w-sm\\\">信息板</div><div class=\\\"col text-right\\\">{{ project.name}}</div></div><div class=\\\"m-b hbox\\\"><div class=\\\"col w-sm\\\">创建时间</div><div class=\\\"col text-right\\\">{{ project.createTime | date:'yyyy-MM-dd HH:mm:ss'}}</div></div><div class=\\\"m-b hbox\\\"><div class=\\\"col w-sm\\\">上次修改时间</div><div class=\\\"col text-right\\\">{{ project.modifyTime | date:'yyyy-MM-dd HH:mm:ss'}}</div></div><div class=m-b><div class=\\\"col w-sm m-b-sm\\\">备注</div><div class=\\\"b-a m-t-sm alert ng-binding\\\" style=\\\"color: #a0a0a0;height:100px\\\">{{project.description}}</div></div><div class=\\\"col-xs-12 no-padder\\\"><button class=\\\"btn btn-primary btn-sm m-b-sm pull-left\\\" style=margin-right:20px ng-disabled=project.name ng-click=createProject()>创建信息板</button> <button class=\\\"btn btn-primary btn-sm m-b-sm pull-left\\\" style=margin-right:20px ng-disabled=!project.name ng-click=openDyaliasSystem()>配置</button> <button class=\\\"btn btn-primary btn-sm m-b-sm pull-left\\\" style=margin-right:20px ng-disabled=!project.name ng-click=deleteProject()>移除</button> <button class=\\\"btn btn-primary btn-sm m-b-sm pull-left\\\" style=margin-right:20px ng-disabled=!project.name ng-click=modifyProjectMessage()>修改信息</button></div></div></div></div>\"\n  );\n\n\n  $templateCache.put('athena/sysmodel/sys_profile.html',\n    \"<div class=\\\"panel panel-default b-t-none\\\"><div class=\\\"panel-body table-responsive no-padder\\\"><table class=\\\"table table-hover table-striped\\\"><thead class=flip-content><tr class=background><th>名称</th><th>ID</th><th>触发器数目</th><th><a translate=th.th3>创建时间</a></th><th><a>最后更新时间</a></th><th>备注</th><th>删除</th></tr></thead><tbody><tr ng-repeat=\\\"  prof  in profiles  \\\"><td>{{ prof.name }}<popwin ng-model=prof pk=uuid prop=name handler=\\\"updateSysProfile \\\"></td><td>{{ :: prof.uuid }}</td><td>{{ :: prof.trigger_count || 0 }}</td><td class=numeric>{{ :: prof.create_time | date:\\\"yyyy-MM-dd HH:mm Z\\\"}}</td><td class=numeric>{{ :: prof.last_modify_time| date:\\\"yyyy-MM-dd HH:mm Z\\\" }}</td><td class=numeric>{{ prof.desc }}<popwin ng-model=prof pk=uuid prop=desc handler=\\\"updateSysProfile \\\"></td><td><a class=text-info ng-click=\\\"deleteSysProfile( this, $index, prof)\\\">删除</a></td></tr></tbody></table></div><div class=panel-footer><button class=\\\"btn btn-primary btn-sm\\\" ng-click=\\\" addSysProfile() \\\">添加系统配置</button></div></div>\"\n  );\n\n\n  $templateCache.put('athena/sysmodel/sys_proftrigger.html',\n    \"<div class=\\\"panel panel-default b-t-none\\\"><div class=\\\"panel-heading bg-white-only\\\" ng-if=isModelState><div class=\\\"form-group m-b-none m-l-xs\\\"><span style=\\\"margin-right: 30px\\\">配置项</span><select ng-model=odp.puuid class=\\\"input input-sm w form-control inline\\\" ng-options=\\\"p.uuid as p.name for p in profiles  \\\" ng-change=\\\"loadPageData( 1 )\\\"></select></div></div><div class=\\\"panel-body table-responsive no-padder b-t-none b-b-none\\\" load-mask><table class=\\\"table table-hover table-striped j_table b-t-none\\\"><thead class=flip-content><tr class=background><th>ID</th><th>名称</th><th>触发类型</th><th>行为</th><th>触发源</th><th>条件</th><th width=20%>备注</th><th ng-if=isModelState width=1%>编辑</th><th ng-if=isModelState width=1%>删除</th></tr></thead><tbody ng-init=\\\" _config = $sys.trigger \\\"><tr ng-repeat=\\\"    t in page.data  \\\"><td>{{t.id}}</td><td>{{t.name}}</td><td>{{ _config.type[t.type] }}</td><td>{{ _config.action[t.action] }}</td><td>{{ _config.origin[t.origin] }}</td><td ng-style=t.lose_tag><i class=\\\"fa fa-android text-info-dker\\\" popover-trigger=mouseenter popover=\\\"{{ conditions( t.conditions ) }}\\\" popover-placement=top popover-title=触发条件></i></td><td>{{t.desc }}</td><td ng-if=isModelState><a class=\\\"text-info m-r-xs\\\" ng-click=\\\"c_u_Trigger(  $index  , t   )\\\">编辑</a></td><td ng-if=isModelState><a class=\\\"text-info m-r-xs\\\" translate=bu.bu4 ng-click=\\\"deleteTrigger(  $index  , t   )\\\">移除</a></td></tr></tbody></table></div><div class=\\\"panel-footer text-center\\\"><button class=\\\"btn btn-primary btn-sm pull-left\\\" ng-if=isModelState ng-click=\\\" c_u_Trigger('create') \\\">添加触发器</button><div class=text-center ng-include src=\\\" 'athena/debris/_pager.html'  \\\"></div></div></div>\"\n  );\n\n\n  $templateCache.put('athena/sysmodel/sys_tag.html',\n    \"<div class=\\\"panel panel-default b-t-none\\\"><div class=\\\"panel-heading bg-white-only w-full\\\" ng-if=isModelState><div class=\\\"form-group m-l-xs m-b-none\\\"><span style=\\\"margin-right: 30px\\\">配置项</span><select ng-model=odp.puuid class=\\\"input input-sm w form-control inline\\\" ng-options=\\\"   p.uuid as p.name for p in profiles  \\\" ng-change=\\\"loadSysTag( odp.puuid  )\\\"></select></div></div><div load-mask class=\\\"panel-body table-responsive no-padder b-b-none\\\"><table class=\\\"table table-hover table-striped b-t-none\\\"><thead class=flip-content><tr class=background><th>变量名称</th><th>设备</th><th>类型</th><th>缩放</th><th>偏差</th><th>单位</th><th>保存日志</th><th>日志类型</th><th>日志间隔(秒)</th><th width=15%>备注</th><th ng-if=isModelState width=1%>编辑</th><th ng-if=isModelState width=1%>配置</th><th ng-if=isModelState width=1%>删除</th></tr></thead><tbody ng-init=\\\"_$type = $sys.log_type.values\\\"><tr ng-repeat=\\\"  tag  in systags  \\\" ng-init=\\\"getDevName(tag , this )\\\"><td>{{tag.name}}</td><td>{{ dev_name }}</td><td>{{ tag.type }}</td><td><span ng-show=\\\" tag.type == 'Analog' \\\">{{tag.scale}}</span></td><td><span ng-show=\\\" tag.type == 'Analog' \\\">{{tag.deviation}}</span></td><td>{{tag.unit}}</td><td><i ng-if=tag.save_log class=\\\"glyphicon glyphicon-ok text-success\\\"></i></td><td><span ng-show=tag.save_log>{{ _$type[tag.log_type] }}</span></td><td><span ng-show=tag.save_log>{{ tag.log_type==\\\"RAW\\\" ? tag.log_cycle : undefined }}</span></td><td>{{ tag.desc||\\\"\\\" }}</td><td ng-if=isModelState><a class=\\\"text-info m-r-xs\\\" ng-click=\\\"updateTag(  $index  , tag , this  )\\\">编辑</a></td><td ng-if=isModelState><a class=\\\"text-info m-r-xs\\\" ng-click=\\\"editLogPart(  $index  , tag   )\\\">配置</a></td><td ng-if=isModelState><a class=\\\"text-info m-r-xs\\\" translate=bu.bu4 ng-click=\\\"deleteTag(  $index  , tag   )\\\">移除</a></td></tr></tbody></table></div><div class=\\\"panel-footer b-b b-l b-r\\\"><button class=\\\"btn btn-primary btn-sm w-70\\\" ng-if=isModelState ng-click=\\\" addTag('add') \\\">添加变量</button></div></div>\"\n  );\n\n\n  $templateCache.put('athena/sysmodel/sysmodel.html',\n    \"<div class=\\\"bg-light lter b-b wrapper-md ng-scope\\\"><h2 class=\\\"m-n font-thin h4\\\">系统模型</h2></div><div class=wrapper-md><div class=\\\"panel panel-default\\\"><div class=panel-heading><div class=\\\"input-group col-sm-4\\\"><input class=form-control ng-model=op.f_n> <span class=input-group-btn><button class=\\\"btn btn-default\\\" type=button>搜索</button></span></div></div><div load-mask class=\\\"panel-body table-responsive no-padder no-border\\\"><table class=\\\"table table-hover table-striped b-t-none\\\"><thead class=flip-content><tr class=background><th><span>名称</span></th><th><a>模式</a></th><th><span>通信类型</span></th><th><a>创建时间</a></th><th><a>最后更新时间</a></th><th>设备个数</th><th>配置项个数</th><th width=20%>备注</th><th>删除</th></tr></thead><tbody><tr ng-repeat=\\\" sm in page.data | filter:{ name: op.f_n } \\\"><td class=text-left><a ng-click=\\\" goto( 'app.sysmodel_p.basic' , sm , sm  )\\\" class=text-info-dk>{{sm.name}}</a><popwin ng-model=sm pk=uuid prop=name handler=\\\"updateSysModel\\\"></td><td>{{ :: $sys.sysModelMode.values[sm.mode] }}</td><td>{{ :: sm.comm_type==1?\\\"DAServer\\\":\\\"Gateway\\\" }}</td><td>{{ :: sm.create_time | date:\\\"yyyy-MM-dd HH:mm\\\" }}</td><td>{{ :: sm.last_modify_time | date:\\\"yyyy-MM-dd HH:mm\\\" }}</td><td>{{ :: sm.device_count }}</td><td>{{ :: sm.profile_count }}</td><td>{{sm.desc }}<popwin ng-model=sm pk=uuid prop=desc handler=\\\"updateSysModel\\\"></td><td><a class=text-info-dk ng-click=\\\"deleteSM( $index , sm  )\\\">删除</a></td></tr></tbody></table></div><div class=panel-footer><button class=\\\"btn btn-primary btn-sm w-94 m-l-sm\\\" ng-click=\\\" createSM() \\\">新建系统模型</button></div></div></div>\"\n  );\n\n\n  $templateCache.put('athena/sysmodel/sysmodel_prop.html',\n    \"<div class=\\\"bg-light lter b-b wrapper-sm padder-md ng-scope\\\"><h2 class=\\\"m-n font-thin h4\\\">{{ title }}</h2><a ui-sref=app.sysmodel class=text-xs>返回 <span class=text-info>系统模型</span></a></div><div class=wrapper-md><ul class=\\\"nav nav-tabs m-t-xxs bg-normal\\\"><li ui-sref-active=active ng-repeat=\\\"t in tabs \\\"><a ui-sref={{t.state}}><i class=\\\"{{t.icon }}\\\"></i> <span translate={{t.title}}>系统配置</span></a></li></ul><div ui-view></div></div>\"\n  );\n\n\n  $templateCache.put('athena/template/delete.html',\n    \"<div class=modal-header>{{title}}</div><div class=modal-body>请确认您是否要删除参数?<br>* {{ T.name }} 被 x个设备资料引用, 是否要删除!</div><div class=\\\"modal-footer m-t-n-sm\\\"><div class=text-center><button class=\\\"btn btn-sm btn-primary w-60\\\" ng-click=\\\" done() \\\">是</button> <button class=\\\"btn btn-sm btn-default w-60\\\" ng-click=\\\" cancel() \\\">否</button></div></div>\"\n  );\n\n\n  $templateCache.put('athena/template/file.html',\n    \"<div class=\\\"modal-header text-center\\\"><span ng-if=isAdd>编辑点</span> <span ng-if=!isAdd>添加点</span></div><div class=modal-body><form name=form class=\\\"form-validation form-horizontal\\\"><input tl-wrap label=点名称 ng-model=point.name required><select tl-wrap label=轮询方式 ng-model=point.poll ng-options=\\\" o.v as o.k  for  o in $sys.point.pointPoll  \\\"></select><select tl-wrap label=独立分包 ng-model=point.is_packet ng-options=\\\"  o.v as o.k for o in  $sys.point.packet\\\"></select><div class=m-t></div><ng-include src=\\\" 'athena/_point/'+ dm.driver_id+'.html' \\\"></ng-include><textarea tl-wrap ng-model=point.desc label=text.desc></textarea></form></div><ng-include src=\\\" 'athena/debris/_modal_footer.html' \\\"></ng-include>\"\n  );\n\n\n  $templateCache.put('athena/template/group.html',\n    \"<div class=modal-body><div class=\\\"text-center font\\\"><h4>编辑分组</h4><h4 translate=\\\"{{ titl }}\\\"></h4></div><form class=\\\"bs-example form-horizontal padding-10\\\"><div class=form-group><label class=\\\"col-sm-3 control-label\\\">名称 Name *</label><div class=col-sm-9><input class=form-control ng-model=g.name></div></div></form></div><div class=\\\"modal-footer m-t-n-sm\\\"><div class=text-center><button class=\\\"btn btn-sm btn-info w-60\\\" ng-click=\\\" done() \\\">保存</button> <button class=\\\"btn btn-sm btn-info w-60\\\" ng-click=\\\" cancel() \\\">取消</button></div></div>\"\n  );\n\n\n  $templateCache.put('athena/template/temp.html',\n    \"<div class=modal-header><span ng-if=isAdd>添加设备模型</span> <span ng-if=!isAdd>编辑设备模型</span></div><div class=modal-body><form name=form class=\\\"form-validation form-horizontal\\\"><input type=submit class=hidden><select tl-wrap label=模型类型 required ng-model=\\\" T.driver_id \\\" ng-if=isAdd ng-options=\\\" o.driver_id  as o.name   for o in drivers  \\\"></select><input tl-wrap required ng-model=T.name label=模型名称><textarea tl-wrap ng-model=T.desc label=text.desc>\\n\" +\n    \"        </textarea></form></div><ng-include src=\\\" 'athena/debris/_modal_footer.html' \\\"></ng-include>\"\n  );\n\n\n  $templateCache.put('athena/template/temp_export.html',\n    \"<div class=modal-body>请确认您是否要导出模板?<br>* {{ T.name }}<br>导出模板可用于上传到其他帐户。<br><div><a class=text-info-dker>xxxxxxxxxxxxxxxx</a></div></div><div class=\\\"modal-footer m-t-n-sm\\\"><div class=text-center><a class=\\\"btn btn-sm btn-primary w-60\\\" href=template/{{T.t_id}}/download>是</a> <button class=\\\"btn btn-sm btn-default w-60\\\" ng-click=\\\" cancel() \\\">否</button></div></div>\"\n  );\n\n\n  $templateCache.put('athena/template/temp_upload.html',\n    \"<div class=modal-header><h5 class=modal-title>模版上传</h5></div><div class=modal-body><form class=\\\"bs-example form-horizontal padding-10\\\"><div class=form-group><label class=\\\"col-sm-3 control-label\\\">文件</label><div class=col-sm-9><input ui-jq=filestyle type=file ng-model-instant onchange=\\\"angular.element(this).scope().setFiles(this)\\\"></div></div><div ng-show=\\\"progress > 1 \\\"><progressbar class=\\\"progress-striped active m-b-sm\\\" value=progress type=success>{{progress}}%</progressbar></div><div ng-show=\\\"showmsg \\\">文件超过 10M , 无法上传!</div><div class=\\\"form-group text-center\\\"><div class=col-sm-12><button class=\\\"btn btn-primary btn-sm w-xs\\\" ng-click=uploadFile() ng-disabled=\\\" ! rightfile \\\">上传</button> <button class=\\\"btn btn-default btn-sm w-xs\\\" ng-click=cancel()>取消</button></div></div></form></div>\"\n  );\n\n\n  $templateCache.put('athena/template/template.html',\n    \"<div class=\\\"bg-light lter b-b wrapper-md ng-scope\\\"><h2 class=\\\"m-n font-thin h4\\\">设备模型</h2></div><div class=wrapper-md><div class=\\\"input-group col-sm-4 m-b-xs\\\"><input class=form-control ng-model=op.f_n> <span class=input-group-btn><button class=\\\"btn btn-default\\\" type=button>搜索</button></span></div><div class=\\\"panel-body no-padder\\\" id=temp_context load-mask><div class=\\\"input-group col-sm-6 col-md-4\\\" ng-show=\\\"deviceModels.length > 15\\\"><span class=input-group-btn><span class=\\\"btn btn-default height-30 w-46\\\" translate=common.search>搜索</span></span> <input class=\\\"form-control input-sm\\\" ng-model=op.f_n></div><div ng-repeat=\\\"dm in deviceModels | filter:{ name:op.f_n} \\\" class=\\\"panel panel-default m-b-xs\\\"><div class=panel-heading><a ng-click=\\\" loadPoints ( this , $event,  $index , dm  ) ; showp = !showp \\\"><i ng-class=\\\"{'fa':true ,'fa-angle-down': showp, 'fa-angle-right': !showp}\\\"></i> {{dm.name }}</a><ul class=\\\"nav nav-pills pull-right\\\"><li><a ng-click=\\\"add_edit_t( this, dm )\\\" class=text-info>编辑</a></li><li><a ng-click=\\\" delTemp(   $index , dm )\\\" class=text-info>删除</a></li></ul></div><div ng-show=\\\"showp \\\" class=\\\"panel-body no-border table-responsive no-padder\\\" load-mask><table class=\\\"table table-hover table-striped b-b\\\" ng-init=\\\"_$config =  $sys.point[dm.driver_id] ;  _$point = $sys.point ;\\\"><thead><tr><td>名称</td><td translate=params.poll></td><td translate=params.is_packet></td><td ng-repeat=\\\" th in  _$config.th \\\" translate=params.{{th}}></td><td>编辑</td><td>删除</td></tr></thead><tbody><tr ng-repeat=\\\" p in points \\\" ng-init=\\\"  pa =  fromJson(p.params); \\\"><td>{{ p.name }}</td><td>{{ _$point.pointPoll[ p.poll ].k }}</td><td>{{ _$point.packet[p.is_packet].k }}</td><td ng-repeat=\\\" th in  _$config.th \\\">{{ _$config[th][pa[th]].k || pa[th] }}</td><td><a ng-click=\\\"addOrEditPoint( this ,p , $index  ,t  )\\\" class=text-info>编辑</a>&nbsp; <a ng-click=add_f(p) class=text-info ng-if=false>克隆</a>&nbsp;</td><td><a ng-click=\\\"delPoint ( this ,$index , p  , dm.uuid  )\\\" class=text-info>删除</a></td></tr></tbody></table><div class=\\\"col-xs-12 m-t-sm m-b-sm\\\"><button class=\\\"btn btn-sm w-70 m-l-sm w-xxm j_addp\\\" ng-click=\\\"addOrEditPoint( this )\\\">添加点</button></div></div></div><button class=\\\"btn btn-sm w-94 btn-primary m-t-sm m-b-sm\\\" ng-click=\\\"add_edit_t( this  )\\\">添加设备模型</button></div></div>\"\n  );\n\n\n  $templateCache.put('athena/useclauses.html',\n    \"<div class=gap-10><blockquote style=\\\"text-align: center; margin: 0px 0px 0px 40px; border: none; padding: 0px\\\"><span style=\\\"color: rgb(123, 123, 123); font-size: 12px; line-height: 23px\\\"><b><font face=Arial>说明 &nbsp; &nbsp;</font></b></span></blockquote><div><span>&nbsp; &nbsp; &nbsp; ForceControl V7.0 是力控科技根据当前制造业和信息技术的融合发展日益深化的趋势，总结多年来的行业工程实践经验，以及对行业领军用户需求进行深度分析的基础上设计开发的自动化软件产品...</span></div></div>\"\n  );\n\n\n  $templateCache.put('athena/user/custom.html',\n    \"custom.html\"\n  );\n\n\n  $templateCache.put('athena/user/info.html',\n    \"<div class=\\\"m-l-sm m-r-sm\\\"><i class=\\\"fa fa-apple fa fa-3x\\\"></i><div class=row><div class=\\\"col-md-4 col-xs-6\\\"><strong>基本信息:</strong><p class=m-l-lg>项目数量 &nbsp;:&nbsp;&nbsp; 2<br>活跃系统数量 &nbsp;:&nbsp;&nbsp; 2<br>发送系统数量 &nbsp;:&nbsp;&nbsp; 2<br>GPS跟踪使能系统数量 &nbsp;:&nbsp;&nbsp; 2<br>用户数量 &nbsp;:&nbsp;&nbsp; 2<br></p></div><div class=\\\"col-md-4 col-xs-6\\\"><strong>登录信息:</strong><p class=m-l-lg>登录帐号&nbsp;&nbsp;:xxxxxxxxx<br>登录时间&nbsp;&nbsp;:<br></p></div><div class=\\\"line b-b\\\"></div></div><strong>为注册级别计算配置限额</strong><form name=forma class=\\\"form-horizontal form-validation\\\"><div class=form-group><label class=\\\"col-md-2 col-sm-3 control-label\\\">选择产品</label><div class=\\\"col-md-2 col-sm-3\\\"><select class=form-control ng-model=\\\"  project.projectname  \\\" ng-options=\\\"  obj.id as obj.name  for obj in product \\\"></select></div></div><div class=form-group><label class=\\\"col-md-2 col-sm-3 control-label\\\">慢日志记录</label><div class=\\\"col-md-2 col-sm-2\\\"><input ui-jq=TouchSpin value=10 class=w-xs data-min=0 data-max=20 data-verticalbuttons=true data-verticalupclass=\\\"fa fa-caret-up\\\" data-verticaldownclass=\\\"fa fa-caret-down\\\"></div><div class=\\\"col-md-2 col-sm-2\\\"><select class=\\\"form-control w-xs\\\" ng-class=\\\" \\\" ng-model=log.s1 ng-options=\\\"   a  for  a   in s1 \\\"></select><span class=pos-fix>分钟</span></div></div><div class=form-group><label class=\\\"col-md-2 col-sm-3 control-label\\\">中速日志记录</label><div class=\\\"col-md-2 col-sm-2\\\"><input ui-jq=TouchSpin value=10 class=w-xs data-min=0 data-max=20 data-verticalbuttons=true data-verticalupclass=\\\"fa fa-caret-up\\\" data-verticaldownclass=\\\"fa fa-caret-down\\\"></div><div class=\\\"col-md-2 col-sm-2\\\"><select class=form-control ng-class=\\\" w-sm\\\" ng-model=log.s2 ng-options=\\\"   a  for  a   in s2 \\\"></select></div></div><div class=form-group><label class=\\\"col-md-2 col-sm-3 control-label\\\">快速日志记录</label><div class=\\\"col-md-2 col-sm-2\\\"><input ui-jq=TouchSpin value=10 class=w-xs data-min=0 data-max=20 data-verticalbuttons=true data-verticalupclass=\\\"fa fa-caret-up\\\" data-verticaldownclass=\\\"fa fa-caret-down\\\"></div><div class=\\\"col-md-2 col-sm-2\\\"><select class=form-control ng-class=\\\" w-sm\\\" ng-model=log.s3 ng-options=\\\"   a  for  a   in s3 \\\"></select></div></div></form><strong>历史数据的存储时间</strong></div>\"\n  );\n\n\n  $templateCache.put('athena/user/promise.html',\n    \"<tabset class=tab-container><tab><tab-heading><i class=\\\"glyphicon glyphicon-bell\\\"></i> Biling</tab-heading><div>Biling</div></tab><tab><tab-heading><i class=\\\"glyphicon glyphicon-bell\\\"></i> 注册</tab-heading><div>注册</div></tab><tab><tab-heading><i class=\\\"glyphicon glyphicon-bell\\\"></i> 短信</tab-heading><div>短信</div></tab><tab><tab-heading><i class=\\\"glyphicon glyphicon-bell\\\"></i> 用户</tab-heading><div>用户</div></tab></tabset>\"\n  );\n\n\n  $templateCache.put('athena/user/users.html',\n    \"<tabset class=tab-container><tab><tab-heading><i class=\\\"glyphicon glyphicon-bell\\\"></i> 所有用户</tab-heading><table ui-jq=dataTable ui-options=\\\"{\\n\" +\n    \"                  sAjaxSource: 'datatable.json',\\n\" +\n    \"                  aoColumns: [\\n\" +\n    \"                    { mData: 'browser' },\\n\" +\n    \"                    { mData: 'browser' },\\n\" +\n    \"                    { mData: 'gps' },\\n\" +\n    \"                    { mData: 'tb' },\\n\" +\n    \"                    { mData: 'platform' }\\n\" +\n    \"                  ]  }\\\" class=\\\"table table-striped m-b-none table-bordered table-striped\\\"><thead><tr><th>用户名</th><th>全名</th><th>有效手机</th><th>有效电子邮件</th><th>上次在线时间</th></tr></thead><tbody></tbody></table></tab><tab><tab-heading><i class=\\\"glyphicon glyphicon-bell\\\"></i> 按项目划分用户</tab-heading><table ui-jq=dataTable ui-options=\\\"{\\n\" +\n    \"                  sAjaxSource: 'datatable.json',\\n\" +\n    \"                  aoColumns: [\\n\" +\n    \"                    { mData: 'engine' },\\n\" +\n    \"                    { mData: 'browser' },\\n\" +\n    \"                    { mData: 'platform' },\\n\" +\n    \"                    { mData: 'version' },\\n\" +\n    \"                    { mData: 'version' },\\n\" +\n    \"                    { mData: 'gps' },\\n\" +\n    \"                    { mData: 'tb' },\\n\" +\n    \"                    { mData: 'grade' }\\n\" +\n    \"                  ]  }\\\" class=\\\"table table-striped m-b-none table-bordered table-striped\\\"><thead><tr><th>全名</th><th>项目访问</th><th>读数据</th><th>些数据</th><th>确认警告</th><th>离线警告</th><th>gps警告</th><th>短信警告</th></tr></thead><tbody></tbody></table></tab><tab><tab-heading><i class=\\\"glyphicon glyphicon-bell\\\"></i> 添加用户</tab-heading><div ng-include=\\\" 'athena/manage/pro_addproject.html'  \\\"></div></tab></tabset>\"\n  );\n\n\n  $templateCache.put('athena/user/visdata.html',\n    \"<tabset class=tab-container><tab><tab-heading><i class=\\\"glyphicon glyphicon-bell\\\"></i> 网络服务</tab-heading><div class=\\\"panel panel-danger\\\"><div class=panel-heading style=\\\"height: 45px\\\"><button class=\\\"btn btn-sm btn-success\\\">添加</button></div><table ui-jq=dataTable ui-options=\\\"{\\n\" +\n    \"                  sAjaxSource: 'datatable.json',\\n\" +\n    \"                  aoColumns: [\\n\" +\n    \"                    { mData: 'browser' },\\n\" +\n    \"                    { mData: 'browser' },\\n\" +\n    \"                    { mData: 'gps' },\\n\" +\n    \"                    { mData: 'gps' },\\n\" +\n    \"                    { mData: 'tb' },\\n\" +\n    \"                    { mData: 'grade' }\\n\" +\n    \"                  ]  }\\\" class=\\\"table table-striped m-b-none table-bordered table-striped\\\"><thead><tr><th>码类型</th><th>信息</th><th>码</th><th>合格者列表</th><th>活跃</th><th>活动</th></tr></thead><tbody></tbody></table></div></tab><tab><tab-heading><i class=\\\"glyphicon glyphicon-bell\\\"></i> RSS摘要</tab-heading><div class=\\\"panel panel-primary\\\"><div class=\\\"panel-heading pan\\\"><button class=\\\"btn btn-sm btn-success\\\">添加</button></div><table ui-jq=dataTable ui-options=\\\"{\\n\" +\n    \"                  sAjaxSource: 'datatable.json',\\n\" +\n    \"                  aoColumns: [\\n\" +\n    \"                    { mData: 'browser' },\\n\" +\n    \"                    { mData: 'browser' },\\n\" +\n    \"                    { mData: 'gps' },\\n\" +\n    \"                    { mData: 'gps' },\\n\" +\n    \"                    { mData: 'tb' },\\n\" +\n    \"                    { mData: 'grade' }\\n\" +\n    \"                  ]  }\\\" class=\\\"table table-striped m-b-none table-bordered table-striped\\\"><thead><tr><th>码类型</th><th>信息</th><th>码</th><th>合格者列表</th><th>活跃</th><th>活动</th></tr></thead><tbody></tbody></table></div></tab><tab><tab-heading><i class=\\\"glyphicon glyphicon-bell\\\"></i> Published Profiles</tab-heading><div class=\\\"panel panel-info\\\"><div class=\\\"panel-heading pan\\\"><button class=\\\"btn btn-sm btn-success\\\">添加</button></div><table ui-jq=dataTable ui-options=\\\"{\\n\" +\n    \"                  sAjaxSource: 'datatable.json',\\n\" +\n    \"                  aoColumns: [\\n\" +\n    \"                    { mData: 'browser' },\\n\" +\n    \"                    { mData: 'version' },\\n\" +\n    \"                    { mData: 'grade' }\\n\" +\n    \"                  ]  }\\\" class=\\\"table table-striped m-b-none table-bordered table-striped\\\"><thead><tr><th>Publicshed profiles</th><th>码</th><th>活动</th></tr></thead><tbody></tbody></table></div></tab></tabset>\"\n  );\n\n\n  $templateCache.put('athena/xxx/file_upload_temp.html',\n    \"<div class=modal-header><h5 class=modal-title>文件上传!</h5></div><div class=modal-body><form class=\\\"bs-example form-horizontal padding-10\\\"><div class=form-group><label class=\\\"col-sm-2 control-label\\\">名称</label><div class=col-sm-10><input class=\\\"form-control input-sm\\\" ng-model=\\\" file.filename \\\"></div></div><div class=form-group><label class=\\\"col-sm-2 control-label\\\">描述</label><div class=col-sm-10><input class=\\\"form-control input-sm\\\" ng-model=\\\"  file.filedesc\\\"></div></div><div class=form-group><label class=\\\"col-sm-2 control-label\\\">文件</label><div class=col-sm-10><input ui-jq=filestyle type=file ng-model-instant class=input-sm onchange=\\\"angular.element(this).scope().setFiles(this)\\\"></div></div><div ng-show=\\\"progress > 1 \\\"><progressbar class=\\\"progress-striped active m-b-sm\\\" value=progress type=success>{{progress}}%</progressbar></div><div ng-show=\\\"showmsg \\\">文件超过 10M , 无法上传!</div><div class=\\\"form-group text-center\\\"><div class=col-sm-12><button class=\\\"btn btn-primary btn-sm\\\" ng-click=uploadFile() ng-disabled=\\\" ! rightfile \\\">上传</button> <button class=\\\"btn btn-default btn-sm\\\" ng-click=\\\" cancel() \\\">取消</button></div></div></form></div>\"\n  );\n\n\n  $templateCache.put('athena/xxx/fileregion_temp.html',\n    \"<div class=\\\"panel panel-default b-white\\\"><div class=\\\"panel-heading padding-5\\\"><div class=col-xs-8><button class=\\\"btn m-t-xxsm btn-sm btn-success\\\" ng-click=\\\"openFileUploadWin('lg')\\\">添加文件</button></div><div class=\\\"input-group col-lg-4\\\"><span class=input-group-btn><button class=\\\"btn btn-default btn-sm\\\" type=button>Search!</button></span> <input class=form-control ng-model=filename></div></div><div class=\\\"panel-body padding-0 table-responsive\\\"><table class=\\\"table table-hover table-bordered table-striped table-bordered table-striped table-condensed flip-content\\\"><thead class=flip-content><tr><th width=40%>文件名</th><th width=40%>大小</th><th width=10%></th></tr></thead><tbody><tr ng-repeat=\\\"  file  in fileregions | filter :  { filename : filename } \\\"><td><a class=text-info-dk href=\\\"{{'project/'+$stateParams.projid +'/file/' +file.id +'/download'  }}\\\">{{ file.filename }}</a></td><td class=numeric>{{ file.size/1024 | number : 0 }} k</td><td><a class=text-info-lter ng-disabled=true translate=dastation_grid.del ng-click=\\\"delFile( { fileid:file.id } , $index  )\\\">移</a></td></tr></tbody></table></div></div>\"\n  );\n\n}]);\n"]}